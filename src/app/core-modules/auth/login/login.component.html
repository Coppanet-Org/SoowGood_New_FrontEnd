<div class="grid h-screen items-center bg-primary grid-cols-1 lg:grid-cols-2">
  <div class="hidden w-full overflow-hidden h-full lg:block">
    <img
      ngSrc="/assets/auth/login-auth.webp"
      width="400"
      height="400"
      alt="auth"
      priority
      class="w-full h-fit object-cover"
    />
  </div>
  <div class="drop-shadow-soft relative">
    <div
      class="relative max-w-[500px] mx-auto mt-10 bg-white p-8 rounded-xl shadow shadow-slate-300"
    >
      <img
        width="70"
        height="70"
        class="md:w-[80px] w-[70px] lg:w-[100px] rounded-full border-2 border-white lg:h-[100px] md:h-[80px] h-[70px] absolute -top-[40px] lg:-top-[60px] left-1/2 -translate-x-1/2"
        ngSrc="/assets/auth/ms-icon-310x310.png"
        alt="icon"
      />
      <h1
        class="text-2xl md:text-3xl lg:text-4xl font-semibold font-Roboto text-primary md:mt-6 lg:mt-8"
      >
        Login
      </h1>
      <p class="text-slate-500 mt-2">Hi, Welcome to SoowGood ðŸ‘‹</p>
      <form class="lg:mt-6" [formGroup]="loginForm" (submit)="onSubmit()">
        <div class="flex flex-col space-y-5 mt-6 lg:mt-10">
          <label for="mobile">
            <p class="font-medium text-slate-700 pb-2">Mobile Number</p>
            <div
              class="form_input flex h-[40px] bg-slate-100"
              [ngClass]="{
                'border-red-500':
                  loginForm.get('mobileNo')?.invalid &&
                  loginForm.get('mobileNo')?.touched
              }"
            >
              <span
                matPrefix
                class="h-fit font-Roboto text-[14px] lg:text-[16px]"
                >+88 &nbsp;</span
              >
              <input
                autocomplete="off"
                matInput
                maxlength="11"
                class="w-full bg-transparent border-none outline-none font-Roboto h-fit font-semibold text-[14px] lg:text-[16px]"
                type="tel"
                formControlName="mobileNo"
                id="mobileNo"
                placeholder="018-000-00000"
                required
                inputmode="numeric"
              />
            </div>
            <mat-error
              class="text-red-600"
              *ngIf="
                loginForm.get('mobileNo')?.hasError('required') &&
                loginForm.get('mobileNo')?.touched
              "
            >
              You must enter a valid mobile number.
            </mat-error>
            <mat-error
              class="text-red-500"
              *ngIf="
                loginForm.get('mobileNo')?.hasError('pattern') &&
                loginForm.get('mobileNo')?.touched
              "
            >
              Mobile number should have exactly 11 digits and follow the
              Bangladeshi format.
            </mat-error>

            <!-- <mat-error *ngIf="formSubmitted && loginForm.get('mobileNo')?.hasError('invalidFormat')">
              Mobile number should only contain numeric digits.
            </mat-error>
            <mat-error *ngIf="formSubmitted && loginForm.get('mobileNo')?.hasError('invalidLength')">
              Mobile number should have 11 digits.
            </mat-error> -->

            <mat-error
              *ngIf="loginForm.get('mobileNo')?.hasError('customError')"
            >
              {{ loginForm.get("mobileNo")?.getError("customError") }}
            </mat-error>
          </label>

          <label for="Password">
            <p class="font-medium text-slate-700 pb-2">Password</p>
            <div
              class="form_input flex justify-between bg-slate-100"
              [ngClass]="{
                'border-red-500':
                  loginForm.get('password')?.invalid &&
                  loginForm.get('password')?.touched
              }"
            >
              <input
                autocomplete="off"
                formControlName="password"
                [type]="passwordFieldType"
                name="password"
                id="password"
                class="outline-none border-none w-full bg-transparent text-[14px] lg:text-[16px]"
                placeholder="Password123@*"
              />
              <span
                (click)="passwordVisibility('password')"
                class="cursor-pointer"
              >
                <i
                  [class]="
                    passwordFieldType === 'password'
                      ? 'fa fa-eye-slash'
                      : 'fa fa-eye'
                  "
                ></i>
              </span>
            </div>
            <div class="flex flex-col">
              <mat-error
                *ngIf="
                  formSubmitted &&
                  loginForm.get('password')?.hasError('required')
                "
              >
                Password is required.
              </mat-error>
              <mat-error
                *ngIf="
                  formSubmitted &&
                  loginForm.get('password')?.hasError('startsWithUppercase')
                "
              >
                Password must start with an uppercase letter.
              </mat-error>
              <mat-error
                *ngIf="
                  formSubmitted &&
                  loginForm.get('password')?.hasError('isAtLeast6Characters')
                "
              >
                Password must be at least 6 characters long.
              </mat-error>
              <mat-error
                *ngIf="
                  formSubmitted &&
                  loginForm
                    .get('password')
                    ?.hasError('includesSpecialCharacter')
                "
              >
                Password must include a special character.
              </mat-error>
              <mat-error
                *ngIf="
                  formSubmitted &&
                  loginForm.get('password')?.hasError('includesNumber')
                "
              >
                Password must include a number.
              </mat-error>
              <mat-error
                *ngIf="loginForm.get('password')?.hasError('customError')"
              >
                {{ loginForm.get("password")?.getError("customError") }}
              </mat-error>
            </div>
          </label>
          <div
            *ngIf="this.errorMessage"
            class="p-4 mb-4 text-sm text-yellow-800 rounded-lg bg-yellow-50 font-semibold font-Roboto"
            role="alert"
          >
            <i class="fa-solid fa-circle-exclamation mr-2"></i>
            {{ this.errorMessage }}
          </div>
          <button
            [disabled]="isLoading || !loginForm.dirty || loginForm.invalid"
            type="submit"
            class="form_btn disabled:bg-gray-500 disabled:select-none"
          >
            <div *ngIf="!isLoading" class="flex items-center">
              <span>Login</span>
              <i class="fa-solid ml-2 fa-right-to-bracket"></i>
            </div>
            <span
              *ngIf="isLoading"
              class="loading loading-dots loading-md"
            ></span>
          </button>

          <p>
            Forgot your password?<strong
              class="cursor-pointer"
              (click)="goToForgotPassword()"
            >
              Reset now</strong
            >
          </p>
          <p class="text-center">
            Don't have an account?
            <a
              routerLink="/signup"
              class="text-primary font-medium inline-flex space-x-1 items-center"
              ><span>Sign up </span
              ><span
                ><svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="h-4 w-4"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"
                  /></svg></span
            ></a>
          </p>
        </div>
      </form>
    </div>
  </div>
</div>
