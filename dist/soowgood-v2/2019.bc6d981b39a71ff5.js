"use strict";(self.webpackChunksoowgood_v2=self.webpackChunksoowgood_v2||[]).push([[2019],{2019:(v,g,s)=>{s.r(g),s.d(g,{AgentLoginModule:()=>C});var d=s(6895),t=s(4006),l=s(262),a=s(3900),u=s(2843),b=s(8745),o=s(4650),A=s(2381),L=s(5374),Z=s(5654),w=s(629),f=s(1951),p=s(4144),T=s(9549);function N(n,m){1&n&&(o.TgZ(0,"div",23)(1,"span"),o._uU(2,"Login"),o.qZA(),o._UZ(3,"i",24),o.qZA())}function x(n,m){1&n&&o._UZ(0,"span",25)}const S=function(n){return{"border-red-500":n}},y=[{path:"",component:(()=>{class n{constructor(r,i,e,h,c,U){this.ToasterService=r,this.UserAuthService=i,this.AgentProfileService=e,this.NormalAuth=h,this._router=c,this.fb=U,this.defaultAuth={mobileNo:"",password:""},this.subs=new b.Y}ngOnInit(){this.loadForm()}loadForm(){this.loginForm=this.fb.group({mobileNo:[this.defaultAuth.mobileNo,t.kI.compose([t.kI.required])],password:[this.defaultAuth.password,t.kI.compose([t.kI.required,t.kI.minLength(7),t.kI.maxLength(100)])]})}onSubmit(){if(this.isLoading=!0,!this.loginForm.valid&&!this.loginForm.touched)return void this.ToasterService.customToast("Please filled all required field","warning");let r,i={userName:this.loginForm.value.mobileNo,email:"",password:this.loginForm.value.password,rememberMe:!1};try{this.UserAuthService.loginByUserDto(i).pipe((0,l.K)(e=>this.handleLoginError(e)),(0,a.w)(e=>(r=e,e.success?this.AgentProfileService.getByUserName(e.userName||""):(this.hasError=!0,this.ToasterService.customToast(e.message||" ","error"),(0,u._)(e.message||"Login failed")))),(0,l.K)(e=>this.handleProfileError(e))).subscribe(e=>{const h={fullName:e.fullName,userId:e.userId,id:e.id,userType:r.roleName.toString().toLowerCase()};this.NormalAuth.setAuthInfoInLocalStorage(h);const c=e.isActive?r.roleName.toString().toLowerCase():(r.roleName.toString()+"/profile-settings").toLowerCase();this._router.navigate([c],{state:{data:e}}).then(()=>{this.isLoading=!1,this.ToasterService.customToast(r.message||" ","success")})})}catch(e){this.hasError=!0,"'tokenEndpoint' should not be null"===e.message&&this.ToasterService.customToast(e.message||" ","success")}}handleLoginError(r){this.isLoading=!1}handleProfileError(r){this.isLoading=!1}ngOnDestroy(){this.subs.unsubscribe()}}return n.\u0275fac=function(r){return new(r||n)(o.Y36(A.G),o.Y36(L.V),o.Y36(Z.j),o.Y36(w.e),o.Y36(f.F0),o.Y36(t.qu))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-agent-login"]],decls:33,vars:7,consts:[[1,"signup-form"],[1,"signup-form__left"],["src","../../../../assets/auth/Repeat Grid 3.png","alt","auth",1,"w-full","h-full"],[1,"signup-form__right","drop-shadow-soft","relative"],[1,"max-w-lg","min-w-[500px]","mx-auto","mt-10","bg-white","p-8","rounded-xl","shadow","shadow-slate-300"],[1,"text-4xl","font-medium"],[1,"text-slate-500","mt-2"],["action","",1,"mt-6",3,"formGroup","submit"],[1,"flex","flex-col","space-y-5","mt-10"],["for","mobile"],[1,"font-medium","text-slate-700","pb-2"],[1,"form_input","flex","h-[40px]",3,"ngClass"],["matPrefix","",1,"h-fit","font-Roboto","font-semibold"],["matInput","","maxlength","11","type","tel","formControlName","mobileNo","id","mobileNo","placeholder","018-000-00000","required","","inputmode","numeric",1,"w-full","border-none","outline-none","h-fit"],["for","Password"],["formControlName","password","type","password","name","password","id","password","placeholder","Password123@*",1,"form_input"],["type","submit",1,"form_btn","disabled:bg-gray-500",3,"disabled"],["class","flex items-center",4,"ngIf"],["class","loading loading-dots loading-md",4,"ngIf"],[1,"text-center"],["routerLink","/agent/signup",1,"text-primary","font-medium","inline-flex","space-x-1","items-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor","stroke-width","2",1,"h-4","w-4"],["stroke-linecap","round","stroke-linejoin","round","d","M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"],[1,"flex","items-center"],[1,"fa-solid","ml-2","fa-right-to-bracket"],[1,"loading","loading-dots","loading-md"]],template:function(r,i){if(1&r&&(o.TgZ(0,"div",0)(1,"div",1),o._UZ(2,"img",2),o.qZA(),o.TgZ(3,"div",3)(4,"div",4)(5,"h1",5),o._uU(6,"Login"),o.qZA(),o.TgZ(7,"p",6),o._uU(8,"Hi, Welcome to SoowGood \u{1f44b}"),o.qZA(),o.TgZ(9,"form",7),o.NdJ("submit",function(){return i.onSubmit()}),o.TgZ(10,"div",8)(11,"label",9)(12,"p",10),o._uU(13,"Mobile Number"),o.qZA(),o.TgZ(14,"div",11)(15,"span",12),o._uU(16,"+88 \xa0"),o.qZA(),o._UZ(17,"input",13),o.qZA()(),o.TgZ(18,"label",14)(19,"p",10),o._uU(20,"Password"),o.qZA(),o._UZ(21,"input",15),o.qZA(),o.TgZ(22,"button",16),o.YNc(23,N,4,0,"div",17),o.YNc(24,x,1,0,"span",18),o.qZA(),o.TgZ(25,"p",19),o._uU(26," Don't have an account? "),o.TgZ(27,"a",20)(28,"span"),o._uU(29,"Sign up "),o.qZA(),o.TgZ(30,"span"),o.O4$(),o.TgZ(31,"svg",21),o._UZ(32,"path",22),o.qZA()()()()()()()()()),2&r){let e;o.xp6(9),o.Q6J("formGroup",i.loginForm),o.xp6(5),o.Q6J("ngClass",o.VKq(5,S,(null==(e=i.loginForm.get("mobileNo"))?null:e.invalid)&&(null==(e=i.loginForm.get("mobileNo"))?null:e.touched))),o.xp6(8),o.Q6J("disabled",i.isLoading),o.xp6(1),o.Q6J("ngIf",!i.isLoading),o.xp6(1),o.Q6J("ngIf",i.isLoading)}},dependencies:[d.mk,d.O5,f.rH,t._Y,t.Fj,t.JJ,t.JL,t.Q7,t.nD,t.sg,t.u,p.Nt,T.qo]}),n})()}];let C=(()=>{class n{}return n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[d.ez,f.Bz.forChild(y),t.u5,t.UX,p.c]}),n})()},8745:(v,g,s)=>{s.d(g,{Y:()=>t});var t=function(){function l(){this._subs=[]}return l.prototype.add=function(){for(var a=[],u=0;u<arguments.length;u++)a[u]=arguments[u];this._subs=this._subs.concat(a)},Object.defineProperty(l.prototype,"sink",{set:function(a){this._subs.push(a)},enumerable:!0,configurable:!0}),l.prototype.unsubscribe=function(){this._subs.forEach(function(a){return a&&function(l){return"function"==typeof l}(a.unsubscribe)&&a.unsubscribe()}),this._subs=[]},l}()}}]);