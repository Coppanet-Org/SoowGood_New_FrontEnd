import{a as E,g as A}from"./chunk-EFF4UWHC.js";import{e as x,h as y,p as C,x as T,z as w}from"./chunk-VFYQ4BPW.js";import{Ca as f,Db as v,Eb as S,Ha as b,Sa as h,X as g,Xa as n,Ya as i,ac as I,fb as c,hb as k,tb as t,vb as l,ya as a,za as p}from"./chunk-TXQBTV46.js";function P(m,s){if(m&1&&t(0),m&2){let u=k();l(" ",u.bookingInfo==null?null:u.bookingInfo.doctorChamberName," ")}}function B(m,s){m&1&&t(0," Soowgood Online Platform ")}var W=(()=>{let s=class s{constructor(o,r,e,d,_){this.ToasterService=o,this.AppointmentService=r,this.DoctorChamberService=e,this.sslCommerzService=d,this.ekPayService=_,this.gotToBack=new f,this.sslInputDto={applicantCode:"",examFee:100,serviceCharge:0,customAmount:10,isCustomAmount:!1},this.hasValidCode=!1,this.sslCInputDto={},this.loading=!1,this.appointmentType=A.getEnumList(E)}getTitle(o,r){if(r=="appointmentType")return this.appointmentType.find(e=>e.id==o)}createAppointmentAndPayment(){this.loading=!0;try{this.AppointmentService.create(this.bookingInfo).subscribe({next:o=>{this.payWithSslCommerz(o.appointmentCode),localStorage.setItem("patientAppointmentCode",JSON.stringify(o.appointmentCode))},error:o=>{console.log(o),this.ToasterService.customToast(String(o.error.error.message),"error"),this.loading=!1}})}catch(o){console.log(o)}}payWithSslCommerz(o){if(this.bookingInfo){let r={};r.applicationCode=o,r.totalAmount=String(this.bookingInfo.totalAppointmentFee),r.transactionId="",this.sslCommerzService.initiatePayment(r).subscribe({next:e=>{e&&e.status==="SUCCESS"&&e.gatewayPageURL?(window.location.href=e.gatewayPageURL,this.loading=!1):this.ToasterService.customToast("Unable to initiate your payment request. Please contact our support team.","error")},error:e=>{this.ToasterService.customToast(String(e.error.error.message),"error"),this.loading=!1}})}else this.ToasterService.customToast("Booking info not found","error")}};s.\u0275fac=function(r){return new(r||s)(p(w),p(x),p(y),p(T),p(C))},s.\u0275cmp=g({type:s,selectors:[["app-booking-review"]],inputs:{bookingInfo:"bookingInfo"},outputs:{gotToBack:"gotToBack"},decls:53,vars:12,consts:[[1,"w-full","my-5","p-4","bg-white","border","border-gray-200","rounded-lg","shadow","sm:p-6","m-auto","custom-scrollbar","max-h-[460px]","overflow-y-scroll"],[1,"text-base","font-semibold","text-gray-900","md:text-xl"],[1,"relative","overflow-x-auto"],[1,"w-full","mt-6","text-sm","text-left","text-gray-500"],[1,"bg-white","border-b"],["scope","row",1,"py-2","font-medium","text-gray-900","whitespace-nowrap"],[1,"py-2"],[1,"bg-white"],[1,"flex","gap-5"],[1,"btn-secondary","bg-primary","mt-6","text-[15px]","tracking-[1px]","py-1","w-full",3,"click"],[1,"btn-secondary","mt-6","text-[16px]","tracking-[1px]","py-2","w-full",3,"click"]],template:function(r,e){r&1&&(n(0,"div",0)(1,"h5",1),t(2),i(),n(3,"div",2)(4,"table",3)(5,"tbody")(6,"tr",4)(7,"th",5),t(8," Patient name: "),i(),n(9,"td",6),t(10),i()(),n(11,"tr",4)(12,"th",5),t(13," Appointment Date : "),i(),n(14,"td",6),t(15),v(16,"date"),i()(),n(17,"tr",4)(18,"th",5),t(19," Appointment Type : "),i(),n(20,"td",6),t(21),i()(),n(22,"tr",4)(23,"th",5),t(24," Hospital name : "),i(),n(25,"td",6),b(26,P,1,1)(27,B,1,0),i()(),n(28,"tr",7)(29,"th",5),t(30," Doctor Fee : "),i(),n(31,"td",6),t(32),i()(),n(33,"tr",7)(34,"th",5),t(35," Booth Fee : "),i(),n(36,"td",6),t(37),i()(),n(38,"tr",7)(39,"th",5),t(40," Platform Fee : "),i(),n(41,"td",6),t(42),i()(),n(43,"tr",7)(44,"th",5),t(45," Total Fee : "),i(),n(46,"td",6),t(47),i()()()(),n(48,"div",8)(49,"button",9),c("click",function(){return e.gotToBack.emit(1)}),t(50," Back "),i(),n(51,"button",10),c("click",function(){return e.createAppointmentAndPayment()}),t(52),i()()()()),r&2&&(a(2),l(" ",e.bookingInfo==null?null:e.bookingInfo.doctorName," "),a(8),l(" ",e.bookingInfo==null?null:e.bookingInfo.patientName," "),a(5),l(" ",S(16,10,e.bookingInfo==null?null:e.bookingInfo.appointmentDate)," "),a(6),l(" ",e.bookingInfo==null?null:e.bookingInfo.appointmentTypeName," "),a(5),h(26,e.bookingInfo!=null&&e.bookingInfo.doctorChamberName?26:27),a(6),l("",e.bookingInfo==null?null:e.bookingInfo.doctorFee," tk."),a(5),l("",e.bookingInfo==null?null:e.bookingInfo.agentFee," tk."),a(5),l("",e.bookingInfo==null?null:e.bookingInfo.platformFee," tk."),a(5),l("",e.bookingInfo==null?null:e.bookingInfo.totalAppointmentFee," tk."),a(5),l(" ",e.loading?"Loading...":"Confirm & Pay"," "))},dependencies:[I]});let m=s;return m})();export{W as a};
