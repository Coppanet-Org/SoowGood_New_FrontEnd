import{a as oe}from"./chunk-BC4RU75W.js";import{a as ne}from"./chunk-7NGZH4SF.js";import{a as ee,c as te,j as ie,k as re}from"./chunk-6KAU5MPM.js";import"./chunk-4DRUEFLH.js";import{b as J,c as K,d as Q,y as X,z as Y}from"./chunk-VFYQ4BPW.js";import{a as W}from"./chunk-7LPMGZKA.js";import{A as U,C as $,D as Z,E as H,c as q,e as s,h as L,i as V,n as j,r as z,u as D,v as B,w as O,x as R,y as G}from"./chunk-FSNV7SJ3.js";import{Ha as S,Ma as f,Qa as w,S as A,Vb as E,Wb as I,X as F,Xa as t,Y as N,Ya as e,Za as u,ca as C,cc as T,fb as v,kb as b,tb as n,uc as M,vb as y,vc as k,xc as P,ya as l,za as c}from"./chunk-TXQBTV46.js";import{a as _,b as x}from"./chunk-5G567QLT.js";function de(o,r){if(o&1&&(t(0,"option",42),n(1),e()),o&2){let h=r.$implicit;b("value",h.id),l(),y(" ",h.displayName," ")}}function pe(o,r){if(o&1&&(t(0,"option",42),n(1),e()),o&2){let h=r.$implicit;b("value",h.id),l(),y(" ",h.displayName," ")}}function ue(o,r){o&1&&(t(0,"mat-error"),n(1," Confirm password is required. "),e())}function ce(o,r){o&1&&(t(0,"mat-error"),n(1," Password not matched. "),e())}function fe(o,r){o&1&&u(0,"span",43)}var ae=(()=>{let r=class r{constructor(m,a,i,d,p,g,se,le){this.fb=m,this.AgentProfileService=a,this.AgentMasterService=i,this.AgentSupervisorService=d,this.NormalAuth=p,this.UserAccountsService=g,this.TosterService=se,this._router=le,this.subs=new ne,this.confirmPasswordFieldType="password",this.passwordFieldType="password",this.formSubmitted=!1}ngOnInit(){this.loadForm(),this.AgentMasterService.getAllAgentMasterList().subscribe(m=>this.agenetMasterList=m)}loadForm(){this.signupForm=this.fb.group({fullName:["",s.required],organizationName:["0",s.required],agentSuperVisor:["0",s.required],address:["",s.required],city:["Dhaka",s.required],zipCode:["1212",s.required],country:["Bangladesh",s.required],mobileNo:["",[s.required,s.minLength(11),s.maxLength(11)]],email:["",s.required],password:["",[s.required,s.pattern(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$#!%*?&])[A-Za-z\d@$#!%*?&]{6,}$/)]],confirmPassword:["",s.required],isActive:["true",s.required]},{validator:oe.matchValidator})}onSubmit(){if(this.isLoading=!0,this.formSubmitted=!0,!this.signupForm.valid){this.isLoading=!1,this.TosterService.customToast("Please filed all required field","warning");return}let m={tenantId:"",userName:this.signupForm.value.mobileNo,name:this.signupForm?.value.fullName,surname:"",email:this.signupForm.value.email,emailConfirmed:!0,phoneNumber:this.signupForm.value.mobileNo,phoneNumberConfirmed:!0,address:this.signupForm.value.address,city:this.signupForm.value.city,zipCode:this.signupForm.value.zipCode,country:this.signupForm.value.country,isActive:!0,lockoutEnabled:!1,lockoutEnd:"2023-07-16T07:38:44.382Z",concurrencyStamp:"",agentMasterId:this.signupForm.value.organizationName,agentSupervisorId:this.signupForm.value.agentSuperVisor};this.UserAccountsService.signupUserByUserDtoAndPasswordAndRole(m,this.signupForm.value?.password,"Agent").subscribe(a=>{a.success?this.AgentProfileService.create(x(_({},this.signupForm.value),{agentMasterId:this.signupForm.value?.organizationName,agentSupervisorId:this.signupForm.value?.agentSuperVisor,userId:a.userId})).subscribe(i=>{this.subs.sink=this.AgentProfileService.getByUserId(i.userId).subscribe(d=>{this.agentProfileDto=d,this.agentId=d.id,this.formSubmitted=!1,this.NormalAuth.signOut(),this._router.navigate(["/agent/login"],{state:{data:a}}).then(p=>this.TosterService.customToast(String(a.message),"success"))})}):(this.isLoading=!1,this.formSubmitted=!1,this.TosterService.customToast(String(a.message),"error"))})}passwordVisibility(m){m==="password"?this.passwordFieldType=this.passwordFieldType==="password"?"text":"password":m==="confirmPassword"&&(this.confirmPasswordFieldType=this.confirmPasswordFieldType==="password"?"text":"password")}loadAgentSupervisors(m){this.AgentSupervisorService.getAgentSupervisorsByAgentMasterList(m.target.value).subscribe(a=>{this.agentSupervisorList=a})}};r.\u0275fac=function(a){return new(a||r)(c($),c(K),c(J),c(Q),c(W),c(X),c(Y),c(M))},r.\u0275cmp=F({type:r,selectors:[["app-agent-signup"]],decls:83,vars:14,consts:[[1,"signup-form"],[1,"signup-form__left"],["width","300","height","300","ngSrc","/assets/agent/auth-bg.avif","alt","auth",1,"w-full","h-full","object-cover"],[1,"signup-form__right","drop-shadow-soft","relative"],[1,"max-w-lg","min-w-[650px]","mx-auto","mt-10","bg-white","p-8","rounded-xl","shadow","shadow-slate-300"],[1,"text-4xl","font-medium"],[1,"text-slate-500","mt-2"],[1,"mt-6",3,"formGroup"],[1,"-mx-3","flex","flex-wrap"],[1,"w-full","px-3","sm:w-1/2","mb-5"],["for","agentOrganization"],[1,"font-medium","text-slate-700","pb-2"],["formControlName","organizationName","name","select","id","organizationName",1,"w-full","rounded-md","border","border-[#e0e0e0]","bg-white","py-2","px-3","text-base","font-normal","text-[14px]","text-[#6B7280]","outline-none","focus:border-[#6A64F1]","focus:shadow-md",3,"change"],["value","0",1,"font-semibold","text-gray-500"],["class","font-semibold text-gray-500",3,"value",4,"ngFor","ngForOf"],["formControlName","agentSuperVisor","name","select","id","agentSuperVisor",1,"w-full","rounded-md","border","border-[#e0e0e0]","bg-white","py-2","px-3","text-base","font-normal","text-[14px]","text-[#6B7280]","outline-none","focus:border-[#6A64F1]","focus:shadow-md"],["for","agentName"],["type","text","formControlName","fullName","id","agentName","placeholder","Name","required","",1,"form_input"],["for","email"],["type","email","formControlName","email","id","email","placeholder","example@mail.com",1,"form_input"],["for","mobile"],[1,"form_input","flex","h-[40px]"],["matPrefix","",1,"h-fit","font-Roboto"],["matInput","","maxlength","11","type","tel","formControlName","mobileNo","id","mobileNo","placeholder","018-000-00000","required","","inputmode","numeric",1,"w-full","border-none","outline-none","h-fit"],["for","Address"],["type","text","formControlName","address","id","address","placeholder","Address","required","",1,"form_input"],[1,"w-full","px-3","sm:w-1/2"],[1,"mb-3"],[1,"form_input","flex","justify-between"],["formControlName","password","name","password","id","password","placeholder","Password",1,"outline-none","border-none","w-full",3,"type","keydown.enter"],[1,"cursor-pointer",3,"click"],["autocomplete","off","formControlName","confirmPassword","name","confirmPassword","placeholder","Confirm password",1,"outline-none","border-none","w-full",3,"type","keydown.enter"],[1,"flex","flex-col"],[4,"ngIf"],[1,"form_btn",3,"click"],[1,"flex","items-center"],[1,"fa-solid","ml-2","fa-right-to-bracket"],["class","loading loading-dots loading-md",4,"ngIf"],[1,"text-center","w-full","mt-5"],["routerLink","/agent/login",1,"text-primary","font-medium","inline-flex","space-x-1","items-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor","stroke-width","2",1,"h-4","w-4"],["stroke-linecap","round","stroke-linejoin","round","d","M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"],[1,"font-semibold","text-gray-500",3,"value"],[1,"loading","loading-dots","loading-md"]],template:function(a,i){if(a&1&&(t(0,"div",0)(1,"div",1),u(2,"img",2),e(),t(3,"div",3)(4,"div",4)(5,"h1",5),n(6,"Agent Signup"),e(),t(7,"p",6),n(8,"Hi, Welcome to SoowGood \u{1F44B}"),e(),t(9,"form",7)(10,"div",8)(11,"div",9)(12,"label",10)(13,"p",11),n(14,"Agent Master"),e(),t(15,"select",12),v("change",function(p){return i.loadAgentSupervisors(p)}),t(16,"option",13),n(17," Select "),e(),S(18,de,2,2,"option",14),e()()(),t(19,"div",9)(20,"label",10)(21,"p",11),n(22,"Supervisor"),e(),t(23,"select",15)(24,"option",13),n(25," Select "),e(),S(26,pe,2,2,"option",14),e()()(),t(27,"div",9)(28,"label",16)(29,"p",11),n(30,"Agent Name"),e(),u(31,"input",17),e()(),t(32,"div",9)(33,"label",18)(34,"p",11),n(35,"Email"),e(),u(36,"input",19),e()(),t(37,"div",9)(38,"label",20)(39,"p",11),n(40,"Mobile Number"),e(),t(41,"div",21)(42,"span",22),n(43,"+88 \xA0"),e(),u(44,"input",23),e()()(),t(45,"div",9)(46,"label",24)(47,"p",11),n(48,"Address"),e(),u(49,"input",25),e()(),t(50,"div",26)(51,"div",27)(52,"p",11),n(53,"Password"),e(),t(54,"div",28)(55,"input",29),v("keydown.enter",function(p){return p.preventDefault()}),e(),t(56,"button",30),v("click",function(){return i.passwordVisibility("password")}),u(57,"i"),e()()()(),t(58,"div",26)(59,"div",27)(60,"p",11),n(61,"Confirm Password"),e(),t(62,"div",28)(63,"input",31),v("keydown.enter",function(p){return p.preventDefault()}),e(),t(64,"button",30),v("click",function(){return i.passwordVisibility("confirmPassword")}),u(65,"i"),e()(),t(66,"div",32),S(67,ue,2,0,"mat-error",33)(68,ce,2,0,"mat-error",33),e()()(),t(69,"button",34),v("click",function(){return i.onSubmit()}),t(70,"div",35)(71,"span"),n(72,"Signup"),e(),u(73,"i",36),e(),S(74,fe,1,0,"span",37),e(),t(75,"p",38),n(76," Already have an account? "),t(77,"a",39)(78,"span"),n(79," Login "),e(),t(80,"span"),C(),t(81,"svg",40),u(82,"path",41),e()()()()()()()()()),a&2){let d,p,g;l(9),f("formGroup",i.signupForm),l(9),f("ngForOf",i.agenetMasterList),l(8),f("ngForOf",i.agentSupervisorList),l(18),w((d=i.signupForm.get("mobileNo"))!=null&&d.invalid?"border-red-600 border-[1px]":""),l(11),f("type",i.passwordFieldType),l(2),w(i.passwordFieldType==="password"?"fa fa-eye-slash":"fa fa-eye"),l(6),f("type",i.confirmPasswordFieldType),l(2),w(i.confirmPasswordFieldType==="password"?"fa fa-eye-slash":"fa fa-eye"),l(2),f("ngIf",i.formSubmitted&&((p=i.signupForm.get("confirmPassword"))==null?null:p.hasError("required"))),l(),f("ngIf",i.formSubmitted&&((g=i.signupForm.get("password"))==null?null:g.valid)&&((g=i.signupForm.get("confirmPassword"))==null?null:g.dirty)&&((g=i.signupForm.get("confirmPassword"))==null?null:g.errors)),l(6),f("ngIf",i.isLoading)}},dependencies:[E,I,k,j,O,R,q,B,L,V,G,U,z,D,ie,ee,te]});let o=r;return o})();var ge=[{path:"",component:ae}],Ve=(()=>{let r=class r{};r.\u0275fac=function(a){return new(a||r)},r.\u0275mod=N({type:r}),r.\u0275inj=A({imports:[T,P.forChild(ge),Z,H,re]});let o=r;return o})();export{Ve as AgentSignupModule};
