import{a as y,b as x}from"./chunk-J72HFQF2.js";import{e as v,h as S,w as k,y as I}from"./chunk-MSMBLCDC.js";import{Bb as f,Ca as g,Cb as h,Wa as t,X as u,Xa as n,_b as b,eb as c,sb as i,ub as l,ya as a,za as s}from"./chunk-BMLH63KZ.js";var z=(()=>{let m=class m{constructor(o,r,e,d){this.ToasterService=o,this.AppointmentService=r,this.DoctorChamberService=e,this.sslCommerzService=d,this.gotToBack=new g,this.sslInputDto={applicantCode:"",examFee:100,serviceCharge:0,customAmount:10,isCustomAmount:!1},this.hasValidCode=!1,this.sslCInputDto={},this.loading=!1,this.appointmentType=y.getEnumList(x)}getTitle(o,r){if(r=="appointmentType")return this.appointmentType.find(e=>e.id==o)}createAppointmentAndPayment(){this.loading=!0;try{this.AppointmentService.create(this.bookingInfo).subscribe({next:o=>{this.payWithSslCommerz(o.appointmentCode),localStorage.setItem("patientAppointmentCode",JSON.stringify(o.appointmentCode))},error:o=>{console.log(o),this.ToasterService.customToast(String(o.error.error.message),"error"),this.loading=!1}})}catch(o){console.log(o)}}payWithSslCommerz(o){if(this.bookingInfo){let r={};r.applicationCode=o,r.totalAmount=String(this.bookingInfo.totalAppointmentFee),r.transactionId="",this.sslCommerzService.initiateTestPayment(r).subscribe({next:e=>{e&&e.status==="SUCCESS"&&e.gatewayPageURL?(window.location.href=e.gatewayPageURL,this.loading=!1):this.ToasterService.customToast("Unable to initiate your payment request. Please contact our support team.","error")},error:e=>{this.ToasterService.customToast(String(e.error.error.message),"error"),this.loading=!1}})}else this.ToasterService.customToast("Booking info not found","error")}};m.\u0275fac=function(r){return new(r||m)(s(I),s(v),s(S),s(k))},m.\u0275cmp=u({type:m,selectors:[["app-booking-review"]],inputs:{bookingInfo:"bookingInfo"},outputs:{gotToBack:"gotToBack"},decls:53,vars:12,consts:[[1,"w-full","my-5","p-4","bg-white","border","border-gray-200","rounded-lg","shadow","sm:p-6","m-auto","custom-scrollbar","max-h-[460px]","overflow-y-scroll"],[1,"text-base","font-semibold","text-gray-900","md:text-xl"],[1,"relative","overflow-x-auto"],[1,"w-full","mt-6","text-sm","text-left","text-gray-500"],[1,"bg-white","border-b"],["scope","row",1,"py-2","font-medium","text-gray-900","whitespace-nowrap"],[1,"py-2"],[1,"bg-white"],[1,"flex","gap-5"],[1,"btn-secondary","bg-primary","mt-6","text-[15px]","tracking-[1px]","py-1","w-full",3,"click"],[1,"btn-secondary","mt-6","text-[16px]","tracking-[1px]","py-2","w-full",3,"click"]],template:function(r,e){r&1&&(t(0,"div",0)(1,"h5",1),i(2),n(),t(3,"div")(4,"div",2)(5,"table",3)(6,"tbody")(7,"tr",4)(8,"th",5),i(9," Patient name: "),n(),t(10,"td",6),i(11),n()(),t(12,"tr",4)(13,"th",5),i(14," Appointment Date : "),n(),t(15,"td",6),i(16),f(17,"date"),n()(),t(18,"tr",4)(19,"th",5),i(20," Appointment Type : "),n(),t(21,"td",6),i(22),n()(),t(23,"tr",4)(24,"th",5),i(25," Hospital name : "),n(),t(26,"td",6),i(27),n()(),t(28,"tr",7)(29,"th",5),i(30," Doctor Fee : "),n(),t(31,"td",6),i(32),n()(),t(33,"tr",7)(34,"th",5),i(35," Booth Fee : "),n(),t(36,"td",6),i(37),n()(),t(38,"tr",7)(39,"th",5),i(40," Platform Fee : "),n(),t(41,"td",6),i(42),n()(),t(43,"tr",7)(44,"th",5),i(45," Total Fee : "),n(),t(46,"td",6),i(47),n()()()(),t(48,"div",8)(49,"button",9),c("click",function(){return e.gotToBack.emit(1)}),i(50," Back "),n(),t(51,"button",10),c("click",function(){return e.createAppointmentAndPayment()}),i(52),n()()()()()),r&2&&(a(2),l(" ",e.bookingInfo==null?null:e.bookingInfo.doctorName," "),a(9),l(" ",e.bookingInfo==null?null:e.bookingInfo.patientName," "),a(5),l(" ",h(17,10,e.bookingInfo==null?null:e.bookingInfo.appointmentDate)," "),a(6),l(" ",e.bookingInfo==null?null:e.bookingInfo.appointmentTypeName," "),a(5),l(" ",e.bookingInfo==null?null:e.bookingInfo.doctorChamberName," "),a(5),l("",e.bookingInfo==null?null:e.bookingInfo.doctorFee," tk."),a(5),l("",e.bookingInfo==null?null:e.bookingInfo.agentFee," tk."),a(5),l("",e.bookingInfo==null?null:e.bookingInfo.platformFee," tk."),a(5),l("",e.bookingInfo==null?null:e.bookingInfo.totalAppointmentFee," tk."),a(5),l(" ",e.loading?"Loading...":"Confirm & Pay"," "))},dependencies:[b]});let p=m;return p})();export{z as a};
