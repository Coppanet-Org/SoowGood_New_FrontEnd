"use strict";(self.webpackChunksoowgood_v2=self.webpackChunksoowgood_v2||[]).push([[2019],{2019:(L,c,t)=>{t.r(c),t.d(c,{AgentLoginModule:()=>P});var h=t(6895),e=t(4006),u=t(262),a=t(3900),m=t(2843),Z=t(8745),o=t(4650),w=t(2381),S=t(5374),T=t(3661),N=t(210),x=t(5654),y=t(629),f=t(2510),A=t(4144),C=t(9549);function U(s,d){1&s&&(o.TgZ(0,"div",23)(1,"span"),o._uU(2,"Login"),o.qZA(),o._UZ(3,"i",24),o.qZA())}function I(s,d){1&s&&o._UZ(0,"span",25)}const F=function(s){return{"border-red-500":s}},Y=[{path:"",component:(()=>{class s{constructor(r,i,l,p,g,n,v,b){this.ToasterService=r,this.UserAuthService=i,this.appAuthService=l,this.oAuthService=p,this.AgentProfileService=g,this.NormalAuth=n,this._router=v,this.fb=b,this.defaultAuth={mobileNo:"",password:""},this.subs=new Z.Y}ngOnInit(){this.loadForm()}loadForm(){this.loginForm=this.fb.group({mobileNo:[this.defaultAuth.mobileNo,e.kI.compose([e.kI.required,e.kI.minLength(11),e.kI.maxLength(11)])],password:[this.defaultAuth.password,e.kI.compose([e.kI.required,e.kI.minLength(7),e.kI.maxLength(100)])]})}onSubmit(){if(!this.loginForm.valid&&!this.loginForm.touched)return void this.ToasterService.customToast("Please filled all required field","warning");let r;const i=this.loginForm.value.mobileNo,l=this.loginForm.value.password;this.oAuthService.oidc=!1;let p={userName:this.loginForm.value.mobileNo,email:"",password:this.loginForm.value.password,rememberMe:!1};try{this.appAuthService.isLoadingSubject.next(!0),this.oAuthService.fetchTokenUsingPasswordFlowAndLoadUserProfile(i,l).then(g=>{g&&this.UserAuthService.loginByUserDto(p).pipe((0,u.K)(n=>this.handleLoginError(n)),(0,a.w)(n=>(r=n,n.success?this.AgentProfileService.getByUserName(n.userName||""):(this.hasError=!0,this.ToasterService.customToast(n.message||" ","error"),(0,m._)(n.message||"Login failed")))),(0,u.K)(n=>this.handleProfileError(n))).subscribe(n=>{console.log(n);const v={fullName:n.fullName,userId:n.userId,id:n.id,userType:r.roleName.toString().toLowerCase()};this.NormalAuth.setAuthInfoInLocalStorage(v);const b=n.isActive?r.roleName.toString().toLowerCase():(r.roleName.toString()+"/profile-settings").toLowerCase();this._router.navigate([b],{state:{data:n}}).then(()=>this.ToasterService.customToast(r.message||" ","success"))})})}catch(g){this.hasError=!0,"'tokenEndpoint' should not be null"===g.message&&this.ToasterService.customToast(g.message||" ","success")}}handleLoginError(r){}handleProfileError(r){}ngOnDestroy(){this.subs.unsubscribe()}}return s.\u0275fac=function(r){return new(r||s)(o.Y36(w.G),o.Y36(S.V),o.Y36(T.K),o.Y36(N.Ct),o.Y36(x.j),o.Y36(y.e),o.Y36(f.F0),o.Y36(e.qu))},s.\u0275cmp=o.Xpm({type:s,selectors:[["app-agent-login"]],decls:33,vars:7,consts:[[1,"signup-form"],[1,"signup-form__left"],["src","../../../../assets/auth/Repeat Grid 3.png","alt","auth",1,"w-full","h-full"],[1,"signup-form__right","drop-shadow-soft","relative"],[1,"max-w-lg","min-w-[500px]","mx-auto","mt-10","bg-white","p-8","rounded-xl","shadow","shadow-slate-300"],[1,"text-4xl","font-medium"],[1,"text-slate-500","mt-2"],["action","",1,"mt-6",3,"formGroup","submit"],[1,"flex","flex-col","space-y-5","mt-10"],["for","mobile"],[1,"font-medium","text-slate-700","pb-2"],[1,"form_input","flex","h-[40px]",3,"ngClass"],["matPrefix","",1,"h-fit","font-Roboto","font-semibold"],["matInput","","maxlength","11","type","tel","formControlName","mobileNo","id","mobileNo","placeholder","018-000-00000","required","","inputmode","numeric",1,"w-full","border-none","outline-none","h-fit"],["for","Password"],["formControlName","password","type","password","name","password","id","password","placeholder","Password123@*",1,"form_input"],["type","submit",1,"form_btn","disabled:bg-gray-500",3,"disabled"],["class","flex items-center",4,"ngIf"],["class","loading loading-dots loading-md",4,"ngIf"],[1,"text-center"],["routerLink","/agent/signup",1,"text-primary","font-medium","inline-flex","space-x-1","items-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor","stroke-width","2",1,"h-4","w-4"],["stroke-linecap","round","stroke-linejoin","round","d","M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"],[1,"flex","items-center"],[1,"fa-solid","ml-2","fa-right-to-bracket"],[1,"loading","loading-dots","loading-md"]],template:function(r,i){if(1&r&&(o.TgZ(0,"div",0)(1,"div",1),o._UZ(2,"img",2),o.qZA(),o.TgZ(3,"div",3)(4,"div",4)(5,"h1",5),o._uU(6,"Login"),o.qZA(),o.TgZ(7,"p",6),o._uU(8,"Hi, Welcome to SoowGood \u{1f44b}"),o.qZA(),o.TgZ(9,"form",7),o.NdJ("submit",function(){return i.onSubmit()}),o.TgZ(10,"div",8)(11,"label",9)(12,"p",10),o._uU(13,"Mobile Number"),o.qZA(),o.TgZ(14,"div",11)(15,"span",12),o._uU(16,"+88 \xa0"),o.qZA(),o._UZ(17,"input",13),o.qZA()(),o.TgZ(18,"label",14)(19,"p",10),o._uU(20,"Password"),o.qZA(),o._UZ(21,"input",15),o.qZA(),o.TgZ(22,"button",16),o.YNc(23,U,4,0,"div",17),o.YNc(24,I,1,0,"span",18),o.qZA(),o.TgZ(25,"p",19),o._uU(26," Don't have an account? "),o.TgZ(27,"a",20)(28,"span"),o._uU(29,"Sign up "),o.qZA(),o.TgZ(30,"span"),o.O4$(),o.TgZ(31,"svg",21),o._UZ(32,"path",22),o.qZA()()()()()()()()()),2&r){let l;o.xp6(9),o.Q6J("formGroup",i.loginForm),o.xp6(5),o.Q6J("ngClass",o.VKq(5,F,(null==(l=i.loginForm.get("mobileNo"))?null:l.invalid)&&(null==(l=i.loginForm.get("mobileNo"))?null:l.touched))),o.xp6(8),o.Q6J("disabled",i.isLoading),o.xp6(1),o.Q6J("ngIf",!i.isLoading),o.xp6(1),o.Q6J("ngIf",i.isLoading)}},dependencies:[h.mk,h.O5,f.rH,e._Y,e.Fj,e.JJ,e.JL,e.Q7,e.nD,e.sg,e.u,A.Nt,C.qo]}),s})()}];let P=(()=>{class s{}return s.\u0275fac=function(r){return new(r||s)},s.\u0275mod=o.oAB({type:s}),s.\u0275inj=o.cJS({imports:[h.ez,f.Bz.forChild(Y),e.u5,e.UX,A.c]}),s})()},8745:(L,c,t)=>{t.d(c,{Y:()=>e});var e=function(){function u(){this._subs=[]}return u.prototype.add=function(){for(var a=[],m=0;m<arguments.length;m++)a[m]=arguments[m];this._subs=this._subs.concat(a)},Object.defineProperty(u.prototype,"sink",{set:function(a){this._subs.push(a)},enumerable:!0,configurable:!0}),u.prototype.unsubscribe=function(){this._subs.forEach(function(a){return a&&function(u){return"function"==typeof u}(a.unsubscribe)&&a.unsubscribe()}),this._subs=[]},u}()}}]);