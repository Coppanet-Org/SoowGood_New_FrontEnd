"use strict";(self.webpackChunksoowgood_v2=self.webpackChunksoowgood_v2||[]).push([[8548],{1369:(q,U,a)=>{a.d(U,{z:()=>ht});var y=a(876),w=a(3862),F=a(1329),h=a(2572),u=a(553),S=a(62),I=a(4351),t=a(9212),x=a(7398),b=a(6306),g=a(2096),_=a(4430);let N=(()=>{class n{constructor(e){this.AppointmentService=e,this.appointmentList=[],this.cache={}}getAllAppointmentList(e,i){return"patient"===i?this.AppointmentService.getAppointmentListByPatientId(e,"patient").pipe((0,x.U)(p=>(this.appointmentList=p,p)),(0,b.K)(p=>(0,g.of)(null))):"agent"===i?this.AppointmentService.getAppointmentListByPatientId(e,"agent").pipe((0,x.U)(p=>(this.appointmentList=p,p)),(0,b.K)(p=>(0,g.of)(null))):"doctor"===i?this.AppointmentService.getAppointmentListByDoctorId(e).pipe((0,x.U)(p=>(this.appointmentList=p,p)),(0,b.K)(p=>(0,g.of)(null))):(0,g.of)(null)}static#t=this.\u0275fac=function(i){return new(i||n)(t.LFG(_.H))};static#e=this.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var k=a(6223),T=a(8184),c=a(9483),f=a(6814),J=a(5776),A=a(3052),P=a(7913),Z=a(7700);let L=(()=>{class n{constructor(e){this.editData=e}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(Z.WI))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-appointment-dialog"]],decls:5,vars:1,consts:[[1,"w-full","p-4","text-center","bg-white","border","border-gray-200","rounded-lg","shadow","sm:p-8"],[1,"mb-2","text-3xl","font-bold","text-gray-900"],[1,"mb-5","text-base","text-gray-500","sm:text-lg"]],template:function(i,o){1&i&&(t.TgZ(0,"div",0)(1,"h5",1),t._uU(2),t.qZA(),t.TgZ(3,"p",2),t._uU(4," Your appointment is approaching; make sure you're ready and confident for the event. Double-check details and prepare accordingly. "),t.qZA()()),2&i&&(t.xp6(2),t.hij(" ",o.editData," "))}})}return n})();var Y=a(6593),j=a(9802),Q=a(9862);function M(n,s){1&n&&t._UZ(0,"img",16)}function R(n,s){if(1&n&&t._UZ(0,"iframe",19),2&n){const e=t.oxw(2);t.Q6J("src",e.selectedFileContent,t.uOi)}}function z(n,s){if(1&n&&t._UZ(0,"img",20),2&n){const e=t.oxw(2);t.Q6J("ngSrc",e.selectedFileContent)}}function E(n,s){if(1&n&&(t.ynx(0),t.YNc(1,R,1,1,"iframe",17)(2,z,1,1,"img",18),t.BQk()),2&n){const e=t.oxw();t.xp6(),t.Q6J("ngIf",e.isPdf(e.selectedFileName)),t.xp6(),t.Q6J("ngIf",!e.isPdf(e.selectedFileName))}}function H(n,s){if(1&n&&(t.TgZ(0,"span",21),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(),t.Oqu(e.selectedFileName)}}function K(n,s){1&n&&(t.TgZ(0,"span"),t._uU(1,"Click here to select your file!"),t.qZA())}function G(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",22),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.onDeleteFile())}),t._uU(1," Change "),t.qZA()}}let B=(()=>{class n{constructor(e,i,o,p,r){this.sanitizer=e,this.dialogRef=i,this.TosterService=o,this.http=p,this.patientId=r,this.apiUrl=`${u.NZ.apis.default.url}/api`,this.loading={status:!1,message:"Send to Doctor"}}onFileChanged(e){const i=e.target.files[0];if(this.fileInfo=i,i){this.selectedFileName=i.name;const o=new FileReader;o.onload=p=>{if("application/pdf"===i.type){const r=p.target?.result,C=new Blob([r],{type:"application/pdf"});this.selectedFileContent=this.sanitizer.bypassSecurityTrustResourceUrl(URL.createObjectURL(C)),console.log(this.selectedFileContent)}else this.selectedFileContent=this.sanitizer.bypassSecurityTrustResourceUrl(URL.createObjectURL(i)),console.log(this.selectedFileContent)},o.readAsArrayBuffer(i)}}savePreviousDocument(){this.fileInfo?(this.loading={status:!0,message:"Sending..."},this.selectedFileName&&(this.fileData=new FormData,this.fileData.append("entityId",this.patientId.toString()),this.fileData.append("entityType","Patient"),this.fileData.append("attachmentType","PatientPreviousDocuments"),this.fileData.append("directoryName","PatientPreviousDocuments\\"+this.patientId.toString()),this.fileData.append(this.selectedFileName,this.fileInfo),this.http.post(`${this.apiUrl}/Common/Documents`,this.fileData).subscribe(e=>{this.loading={status:!1,message:"Sent"},this.selectedFileName="",this.selectedFileContent="",this.TosterService.customToast("Your previous document sucessfully send your doctor.","success")},e=>{console.log(e)}))):this.TosterService.customToast("Please select a file!","warning")}onDeleteFile(){this.selectedFileName="",this.selectedFileContent=""}isPdf(e){return e.toLowerCase().endsWith(".pdf")}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(Y.H7),t.Y36(Z.so),t.Y36(j.G),t.Y36(Q.eN),t.Y36(Z.WI))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-upload-appointment-doc-dialog"]],decls:21,vars:6,consts:[[1,"grid","space-y-2","w-full","p-8","sm:w-full"],[1,"flex","justify-between"],[1,"text-md","font-bold","mb-3","text-gray-500","tracking-wide"],[3,"click"],[1,"flex","items-center","flex-col","justify-center","w-full"],[1,"flex","flex-col","rounded-lg","border-4","border-dashed","w-full","h-60","p-10","group","text-center"],[1,"h-full","w-full","text-center","flex","flex-col","justify-center","items-center"],[1,"flex","flex-auto","max-h-48","mx-auto","-mt-10"],["class","has-mask h-36 object-center","src","https://img.freepik.com/free-vector/image-upload-concept-landing-page_52683-27130.jpg?size=338&ext=jpg","alt","freepik image",4,"ngIf"],[4,"ngIf"],[1,"pointer-none","text-gray-500"],["class","text-sm",4,"ngIf"],["ngClass","mt-3",3,"click",4,"ngIf"],["type","file","accept",".jpg,.jpeg,.png,.pdf",1,"hidden",3,"change"],["attachments","","fileInput",""],[1,"btn-secondary","border","border-transparent","mt-5",3,"click"],["src","https://img.freepik.com/free-vector/image-upload-concept-landing-page_52683-27130.jpg?size=338&ext=jpg","alt","freepik image",1,"has-mask","h-36","object-center"],["width","100%","height","100%",3,"src",4,"ngIf"],["alt","selected file","width","300","height","300","class","has-mask h-36 object-center",3,"ngSrc",4,"ngIf"],["width","100%","height","100%",3,"src"],["alt","selected file","width","300","height","300",1,"has-mask","h-36","object-center",3,"ngSrc"],[1,"text-sm"],["ngClass","mt-3",3,"click"]],template:function(i,o){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"label",2),t._uU(3,"Upload your previous documents."),t.qZA(),t.TgZ(4,"button",3),t.NdJ("click",function(){return o.dialogRef.close()}),t._uU(5,"Close"),t.qZA()(),t.TgZ(6,"div",4)(7,"label",5)(8,"div",6)(9,"div",7),t.YNc(10,M,1,0,"img",8)(11,E,3,2,"ng-container",9),t.qZA(),t.TgZ(12,"p",10),t.YNc(13,H,2,1,"span",11)(14,K,2,0,"span",9),t.qZA(),t.YNc(15,G,2,0,"button",12),t.qZA(),t.TgZ(16,"input",13,14),t.NdJ("change",function(r){return o.onFileChanged(r)}),t.qZA()(),t.TgZ(19,"button",15),t.NdJ("click",function(){return o.savePreviousDocument()}),t._uU(20),t.qZA()()()),2&i&&(t.xp6(10),t.Q6J("ngIf",!o.selectedFileContent),t.xp6(),t.Q6J("ngIf",o.selectedFileContent),t.xp6(2),t.Q6J("ngIf",o.selectedFileName),t.xp6(),t.Q6J("ngIf",!o.selectedFileName),t.xp6(),t.Q6J("ngIf",o.selectedFileName),t.xp6(5),t.hij(" ",o.loading.message," "))},dependencies:[f.mk,f.O5,f.Zd]})}return n})();function O(n,s){1&n&&t._UZ(0,"i",16)}function W(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",17),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.cancellAppointment(o.appointment.id))}),t._UZ(1,"i",18),t._uU(2," Cancel "),t.qZA()}if(2&n){const e=t.oxw(2);t.Tol(e.btnDisable?"btn-secondary-light tooltip tooltip-warning flex-1 basis-5/12 bg-primary/10 text-gray-400 hover:text-neutral-400  mr-0":"btn-secondary-light flex-1 basis-5/12 hover:text-white hover:bg-primary/30 bg-primary/90 text-white  mr-0"),t.uIk("data-tip",e.btnDisable&&"Not acceptable!")}}function $(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.openPdfDialog(o.appointment.id))}),t._UZ(1,"i",20),t._uU(2," Prescription "),t.qZA()}}function X(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",21),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.goToJoinCall(o.appointment,"patient"))}),t._UZ(1,"i",22),t._uU(2," Join Call "),t.qZA()}if(2&n){const e=t.oxw(2);t.Tol(e.btnDisable?"btn-secondary-light tooltip tooltip-warning flex-1 basis-5/12 bg-primary/10 text-gray-400 hover:text-neutral-400  mr-0":"btn-secondary py-2 flex-1 basis-5/12 mr-0 hover:text-white hover:bg-primary border-secondary-dark/30 border"),t.Q6J("disabled",e.btnDisable),t.uIk("data-tip",e.btnDisable&&"Appointment day is over!")}}function V(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",23),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.uploadDocuments(o.appointment))}),t._UZ(1,"i",24),t._uU(2," Upload Documents "),t.qZA()}}function tt(n,s){if(1&n&&(t.TgZ(0,"div")(1,"div",1)(2,"div")(3,"h2",2),t._uU(4),t.qZA()(),t.TgZ(5,"div",3),t._UZ(6,"img",4),t.qZA()(),t.TgZ(7,"div",5)(8,"p",6)(9,"b"),t._uU(10,"Patient Name : "),t.qZA(),t.TgZ(11,"b"),t._uU(12),t.qZA()(),t.TgZ(13,"p",7)(14,"b"),t._uU(15,"Date & Time : "),t.qZA(),t.TgZ(16,"b"),t._uU(17),t.ALo(18,"date"),t.qZA()(),t.TgZ(19,"p",7)(20,"b"),t._uU(21,"Doctor Fee :"),t.qZA(),t.TgZ(22,"span",8),t._uU(23),t.qZA()(),t.TgZ(24,"p",7)(25,"b"),t._uU(26," Appointment Type : "),t.qZA(),t._uU(27),t.qZA(),t.TgZ(28,"p",7)(29,"b"),t._uU(30,"Consultancy Type : "),t.qZA(),t.TgZ(31,"span",9),t.YNc(32,O,1,0,"i",10),t._uU(33),t.qZA()(),t.TgZ(34,"p",7)(35,"b"),t._uU(36," Appointment Serial: "),t.qZA(),t._uU(37),t.qZA(),t.TgZ(38,"p",7)(39,"b"),t._uU(40,"Status : "),t.qZA(),t.TgZ(41,"span"),t._uU(42),t.qZA()()(),t.TgZ(43,"div",11),t.YNc(44,W,3,3,"button",12)(45,$,3,0,"button",13)(46,X,3,4,"button",14)(47,V,3,0,"button",15),t.qZA()()),2&n){const e=t.oxw();t.xp6(4),t.hij(" Dr. ",e.appointment.doctorName," "),t.xp6(8),t.Oqu(e.appointment.patientName),t.xp6(5),t.AsE(" ",t.lcZ(18,16,e.appointment.appointmentDate)," - ",e.appointment.appointmentTime," "),t.xp6(6),t.hij(" ",e.appointment.totalAppointmentFee," tk. "),t.xp6(4),t.hij("",e.appointment.appointmentTypeName," "),t.xp6(5),t.Q6J("ngIf","online"==e.appointment.consultancyTypeName),t.xp6(),t.hij("",e.appointment.consultancyTypeName," "),t.xp6(4),t.hij("",e.appointment.appointmentSerial," no. "),t.xp6(4),t.Tol(4==e.appointment.appointmentStatus?"bg-green-100 text-green-950 py-.5 px-3 rounded-lg":"bg-yellow-100 py-.5 px-3  text-yellow-800 rounded-lg"),t.xp6(),t.hij(" ",2==e.appointment.appointmentStatus?"Confirmed":4==e.appointment.appointmentStatus?"Completed":5==e.appointment.appointmentStatus?"Cancelled":"Progress"," "),t.xp6(2),t.Q6J("ngIf",2==e.appointment.appointmentStatus&&4!==e.appointment.appointmentStatus),t.xp6(),t.Q6J("ngIf",4==e.appointment.appointmentStatus),t.xp6(),t.Q6J("ngIf",2==e.appointment.appointmentStatus),t.xp6(),t.Q6J("ngIf",2==e.appointment.appointmentStatus&&e.uploadPrescriptiion)}}function et(n,s){1&n&&t._UZ(0,"i",16)}function nt(n,s){if(1&n&&(t.TgZ(0,"button"),t._UZ(1,"i",18),t._uU(2," Cancel "),t.qZA()),2&n){const e=t.oxw(2);t.Tol(e.btnDisable?"btn-secondary-light tooltip tooltip-warning flex-1 basis-5/12 bg-primary/10 text-gray-400 hover:text-neutral-400  mr-0":"btn-secondary-light flex-1 basis-5/12  hover:text-white hover:bg-secondary bg-primary/90 text-white  mr-0")}}function ot(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",17),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.goToJoinCall(o.appointment,"doctor"))}),t._UZ(1,"i",22),t._uU(2," Join Call "),t.qZA()}if(2&n){const e=t.oxw(2);t.Tol(e.btnDisable?"btn-secondary-light tooltip tooltip-warning flex-1 basis-5/12 bg-primary/10 text-gray-400 hover:text-neutral-400  mr-0":"btn-secondary-light flex-1 basis-5/12   mr-0 hover:text-white hover:bg-secondary border-secondary-dark/30 border")}}function it(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"div",1)(2,"div")(3,"h2",25),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.goToPatientProfile(o.appointment))}),t._uU(4),t.qZA()(),t.TgZ(5,"div",3),t._UZ(6,"img",4),t.qZA()(),t.TgZ(7,"div",5)(8,"p",26)(9,"b"),t._uU(10,"Date & Time : "),t.qZA(),t.TgZ(11,"b"),t._uU(12),t.ALo(13,"date"),t.qZA()(),t.TgZ(14,"p",7)(15,"b"),t._uU(16,"Doctor Fee :"),t.qZA(),t._uU(17),t.qZA(),t.TgZ(18,"p",7)(19,"b"),t._uU(20," Appointment Type : "),t.qZA(),t._uU(21),t.qZA(),t.TgZ(22,"p",7)(23,"b"),t._uU(24,"Consultancy Type : "),t.qZA(),t.TgZ(25,"span",27),t.YNc(26,et,1,0,"i",10),t._uU(27),t.qZA()(),t.TgZ(28,"p",7)(29,"b"),t._uU(30," Appointment Serial: "),t.qZA(),t._uU(31),t.qZA(),t.TgZ(32,"p",7)(33,"b"),t._uU(34,"Status : "),t.qZA(),t.TgZ(35,"span"),t._uU(36),t.qZA()()(),t.TgZ(37,"div",28),t.YNc(38,nt,3,2,"button",29)(39,ot,3,2,"button",12),t.TgZ(40,"button",30),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.goToBuildPrescription(o.appointment.id))}),t._UZ(41,"i",20),t._uU(42,"Create Prescription "),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(4),t.hij(" ",e.appointment.patientName," "),t.xp6(8),t.AsE(" ",t.lcZ(13,13,e.appointment.appointmentDate)," - ",e.appointment.appointmentTime," "),t.xp6(5),t.hij(" ",e.appointment.totalAppointmentFee," tk. "),t.xp6(4),t.hij("",e.appointment.appointmentTypeName," "),t.xp6(5),t.Q6J("ngIf","online"==e.appointment.consultancyTypeName),t.xp6(),t.hij("",e.appointment.consultancyTypeName," "),t.xp6(4),t.hij("",e.appointment.appointmentSerial," no. "),t.xp6(4),t.Tol(4==e.appointment.appointmentStatus?"bg-green-100 text-green-950 py-.5 px-3 rounded-lg":"bg-yellow-100 py-.5 px-3  text-yellow-800 rounded-lg"),t.xp6(),t.hij(" ",2==e.appointment.appointmentStatus?"Confirmed":4==e.appointment.appointmentStatus?"Completed":5==e.appointment.appointmentStatus?"Cancelled":"Progress"," "),t.xp6(2),t.Q6J("ngIf",4!==e.appointment.appointmentStatus&&2==e.appointment.appointmentStatus),t.xp6(),t.Q6J("ngIf",2==e.appointment.appointmentStatus)}}function at(n,s){1&n&&t._UZ(0,"i",16)}function pt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",17),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.cancellAppointment(o.appointment.id))}),t._UZ(1,"i",18),t._uU(2," Cancel "),t.qZA()}if(2&n){const e=t.oxw(2);t.Tol(e.btnDisable?"btn-secondary-light tooltip tooltip-warning flex-1 basis-5/12 bg-primary/10 text-gray-400 hover:text-neutral-400  mr-0":"btn-secondary-light flex-1 basis-5/12 hover:text-white hover:bg-primary/30 bg-primary/90 text-white  mr-0"),t.uIk("data-tip",e.btnDisable&&"Not acceptable!")}}function st(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.openPdfDialog(o.appointment.id))}),t._UZ(1,"i",20),t._uU(2," Prescription "),t.qZA()}}function lt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",21),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.goToJoinCall(o.appointment,"patient"))}),t._UZ(1,"i",22),t._uU(2," Join Call "),t.qZA()}if(2&n){const e=t.oxw(2);t.Tol(e.btnDisable?"btn-secondary-light tooltip tooltip-warning flex-1 basis-5/12 bg-primary/10 text-gray-400 hover:text-neutral-400  mr-0":"btn-secondary py-2 flex-1 basis-5/12 mr-0 hover:text-white hover:bg-primary border-secondary-dark/30 border"),t.Q6J("disabled",e.btnDisable),t.uIk("data-tip",e.btnDisable&&"Appointment day is over!")}}function rt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",23),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.uploadDocuments(o.appointment))}),t._UZ(1,"i",24),t._uU(2," Upload Documents "),t.qZA()}}function ct(n,s){if(1&n&&(t.TgZ(0,"div")(1,"div",1)(2,"div")(3,"h2",2),t._uU(4),t.qZA()(),t.TgZ(5,"div",3),t._UZ(6,"img",4),t.qZA()(),t.TgZ(7,"div",5)(8,"p",6)(9,"b"),t._uU(10,"Patient : "),t.qZA(),t.TgZ(11,"b",31),t._uU(12),t.qZA()(),t.TgZ(13,"p",7)(14,"b"),t._uU(15,"Code : "),t.qZA(),t._uU(16),t.qZA(),t.TgZ(17,"p",7)(18,"b"),t._uU(19,"Date & Time : "),t.qZA(),t.TgZ(20,"b"),t._uU(21),t.ALo(22,"date"),t.qZA()(),t.TgZ(23,"p",7)(24,"b"),t._uU(25,"Doctor Fee :"),t.qZA(),t.TgZ(26,"span",8),t._uU(27),t.qZA()(),t.TgZ(28,"p",7)(29,"b"),t._uU(30," Appointment Type : "),t.qZA(),t._uU(31),t.qZA(),t.TgZ(32,"p",7)(33,"b"),t._uU(34,"Consultancy Type : "),t.qZA(),t.TgZ(35,"span",32),t.YNc(36,at,1,0,"i",10),t._uU(37),t.qZA()(),t.TgZ(38,"p",7)(39,"b"),t._uU(40," Appointment Serial: "),t.qZA(),t.TgZ(41,"span",33),t._uU(42),t.qZA()(),t.TgZ(43,"p",7)(44,"b"),t._uU(45,"Status : "),t.qZA(),t.TgZ(46,"span"),t._uU(47),t.qZA()()(),t.TgZ(48,"div",11),t.YNc(49,pt,3,3,"button",12)(50,st,3,0,"button",13)(51,lt,3,4,"button",14)(52,rt,3,0,"button",15),t.qZA()()),2&n){const e=t.oxw();t.xp6(4),t.hij(" Dr. ",e.appointment.doctorName," "),t.xp6(8),t.Oqu(e.appointment.patientName),t.xp6(4),t.hij(" ",e.appointment.appointmentCode," "),t.xp6(5),t.AsE(" ",t.lcZ(22,17,e.appointment.appointmentDate)," - ",e.appointment.appointmentTime," "),t.xp6(6),t.hij(" ",e.appointment.totalAppointmentFee," tk. "),t.xp6(4),t.hij("",e.appointment.appointmentTypeName," "),t.xp6(5),t.Q6J("ngIf","online"==e.appointment.consultancyTypeName),t.xp6(),t.hij("",e.appointment.consultancyTypeName," "),t.xp6(5),t.hij("",e.appointment.appointmentSerial," no."),t.xp6(4),t.Tol(4==e.appointment.appointmentStatus?"bg-green-100 font-Roboto text-green-950 py-.5 px-3 rounded-lg":"bg-yellow-100 py-.5 px-3 font-Roboto text-yellow-800 rounded-lg"),t.xp6(),t.hij(" ",2==e.appointment.appointmentStatus?"Confirmed":4==e.appointment.appointmentStatus?"Completed":5==e.appointment.appointmentStatus?"Cancelled":"Progress"," "),t.xp6(2),t.Q6J("ngIf",2==e.appointment.appointmentStatus&&4!==e.appointment.appointmentStatus),t.xp6(),t.Q6J("ngIf",4==e.appointment.appointmentStatus),t.xp6(),t.Q6J("ngIf",2==e.appointment.appointmentStatus),t.xp6(),t.Q6J("ngIf",2==e.appointment.appointmentStatus&&e.uploadPrescriptiion)}}let mt=(()=>{class n{constructor(e,i,o,p,r){this.Router=e,this.dialog=i,this.AppointmentService=o,this.tosterService=p,this.NormalAuth=r,this.uploadPrescriptiion=!0,this.btnDisable=!1,this.btnDisable=!1}ngAfterViewInit(){console.log(this.appointment);const e=new Date,i=new Date(this.appointment.appointmentDate);e.setHours(0,0,0,0),i.setHours(0,0,0,0),this.uploadPrescriptiion=i.getTime()>=e.getTime(),this.btnDisable=i.getTime()<e.getTime()}goToBuildPrescription(e){null!=e&&void 0!==e?window.open("/#/doctor/build-prescription/"+e,"_blank"):console.log("Appointment not found")}goToPatientProfile(e){this.Router.navigate(["/doctor/patients/patient-details/",e.patientProfileId,e.doctorProfileId])}openPdfDialog(e){this.dialog.open(P.P,{data:{appointmentId:e}})}goToJoinCall(e,i){if(e){const o=new Date,p=new Date(e.appointmentDate),r={hour:+e.appointmentTime.split(":")[0],minute:+e.appointmentTime.split(":")[1]};if(o.getFullYear()<=p.getFullYear()&&o.getMonth()<=p.getMonth()&&o.getDate()<=p.getDate())if(o.getFullYear()===p.getFullYear()&&o.getMonth()===p.getMonth()&&o.getDate()===p.getDate()){const v=(m=r.hour,l=r.minute,d=o.getHours(),D=o.getMinutes(),console.log({aptMinute:l,aptHour:m,currentHour:d,currentMinute:D}),l<15&&(l+=60,m-=1),60*(m-d)+(l-D));if(v<15&&v>-30){console.log("Appointment will start soon!");let m=e.doctorName;m="doctor"==i?e.doctorName:e.patientName,window.open(`https://agora-video-call-eight.vercel.app/?username=${m}&aptCode=${e.appointmentCode}&c=${i}`,"_blank")}else v>15?this.openDialog("Appointment time is not here yet!"):(this.openDialog("Appointment time is over!"),this.uploadPrescriptiion=!1)}else this.openDialog("Appointment date is coming soon!");else this.openDialog("Appointment date is over!"),this.uploadPrescriptiion=!1}var m,l,d,D}uploadDocuments(e){this.dialog.open(B,{width:"40vw",data:e?.patientProfileId}).afterClosed().subscribe(o=>{})}openDialog(e){this.dialog.open(L,{width:"40vw",data:e}).afterClosed().subscribe(o=>{})}cancellAppointment(e){let i=this.NormalAuth.authInfo();e&&confirm("Are you Sure, to canel this appointment?")&&this.AppointmentService.cancellAppointment(e,i.id,i.userType).subscribe(p=>{p&&this.tosterService.customToast("Appointment Cancelled!!","success")})}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(T.F0),t.Y36(Z.uw),t.Y36(_.H),t.Y36(j.G),t.Y36(c.e))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-appointment-card"]],inputs:{appointment:"appointment",user:"user"},decls:3,vars:3,consts:[[4,"ngIf"],[1,"border-b-[1px]","flex","justify-between","p-5","bg-primary/90"],[1,"text-[22px]","font-Roboto","text-gray-50","mt-2","capitalize"],[1,"w-[60px]","h-[60px]","overflow-hidden","rounded-full","border-secondary","border-[2px]"],["ngSrc","/assets/doctor/avater.png","alt","img","width","50","height","50",1,"w-full","h-full","object-cover"],[1,"px-6"],[1,"py-1","text-[18px]","text-gray-500","mt-5","flex","justify-between"],[1,"py-1","text-[14px]","text-gray-500","flex","justify-between"],[1,"font-Roboto","text-[18px]"],[1,"badge","text-primary","bg-green-200","font-Roboto"],["class","fa-solid fa-video",4,"ngIf"],[1,"flex","w-full","justify-between","gap-3","flex-wrap","p-4","items-end","h-full"],[3,"class","click",4,"ngIf"],["class","btn-secondary-light flex-1 basis-5/12 mr-0 border-secondary-dark/30 border",3,"click",4,"ngIf"],[3,"disabled","class","click",4,"ngIf"],["class","btn-secondary-light flex-1 tooltip-warning basis-5/12 mr-0 border-secondary-dark/30 border",3,"click",4,"ngIf"],[1,"fa-solid","fa-video"],[3,"click"],[1,"fa-solid","fa-ban","mr-1"],[1,"btn-secondary-light","flex-1","basis-5/12","mr-0","border-secondary-dark/30","border",3,"click"],[1,"fa-solid","fa-prescription","mr-1"],[3,"disabled","click"],[1,"fa-solid","fa-phone-volume","mr-1"],[1,"btn-secondary-light","flex-1","tooltip-warning","basis-5/12","mr-0","border-secondary-dark/30","border",3,"click"],[1,"fa-solid","fa-upload","mr-1"],[1,"cursor-pointer","text-[22px]","font-Roboto","text-gray-50","mt-2","capitalize",3,"click"],[1,"py-1","text-[14px]","text-gray-500","mt-3","flex","justify-between"],[1,"badge","text-primary"],[1,"grid","grid-cols-2","flex-wrap","w-full","justify-between","gap-4","p-4"],[3,"class",4,"ngIf"],[1,"btn-secondary-light","col-span-2","flex-1","active:scale-90","transition-all","duration-75","mr-0","hover:text-white","hover:bg-secondary","border-secondary-dark/30","border",3,"click"],[1,"text-[18px]","capitalize"],[1,"badge","bg-green-200","text-primary"],[1,"font-Roboto"]],template:function(i,o){1&i&&t.YNc(0,tt,48,18,"div",0)(1,it,43,15,"div",0)(2,ct,53,19,"div",0),2&i&&(t.Q6J("ngIf","patient"==o.user),t.xp6(),t.Q6J("ngIf","doctor"==o.user),t.xp6(),t.Q6J("ngIf","agent"==o.user))},dependencies:[f.O5,f.Zd,f.uU]})}return n})();function dt(n,s){1&n&&(t.TgZ(0,"div",8),t._UZ(1,"app-skeleton")(2,"app-skeleton")(3,"app-skeleton")(4,"app-skeleton")(5,"app-skeleton")(6,"app-skeleton")(7,"app-skeleton")(8,"app-skeleton"),t.qZA())}function ut(n,s){1&n&&(t.TgZ(0,"div",9)(1,"div"),t._uU(2,"No records has been found!"),t.qZA()())}function ft(n,s){if(1&n&&(t.TgZ(0,"div",10),t._UZ(1,"app-appointment-card",11),t.qZA()),2&n){const e=s.$implicit,i=t.oxw();t.xp6(),t.Q6J("appointment",e)("user",i.user)}}function gt(n,s){1&n&&(t.TgZ(0,"div",12)(1,"div"),t._uU(2,"No records has been found!"),t.qZA()())}let ht=(()=>{class n{constructor(e,i,o,p,r){this.DoctorPatientAppointmentService=e,this.fb=i,this.AppointmentService=o,this.route=p,this.AuthService=r,this.animationDirection="bottom",this.dataLoading=!1,this.appointmentList=[],this.skelton=!1,this.consultancyType=[],this.specialityList=[],this.specializationList=[],this.totalCount=0,this.filterModel={offset:0,limit:0,pageNo:0,pageSize:10,sortBy:"name",sortOrder:"asc",isDesc:!1},this.subs=new F.Y,this.doctorFilterDto={},this.filterInput={fields:{searchField:{formControlName:"appointmentSearch"},filterField:[{label:"Consultancy Type",fieldType:"select",formControlName:"consultancy",options:y.v.getEnumList(w.Is)},{label:"start date",fieldType:"date-range",formControlName:{startDate:"startDate",endDate:"endDate"}}]}},this.filter=this.fb.group({})}ngOnInit(){this.userType=this.AuthService.authInfo().userType,this.route.queryParams.subscribe(e=>{const i=e["apt-patientname"]?e["apt-patientname"]:e["apt-doctorname"]?e["apt-doctorname"]:e.patientname?e.patientname:e.doctorname,o=e.consultancyType,p=e.startDate,r=e.endDate;this.loadData(o||i||p||r?{consultancy:o,name:i,startDate:p,endDate:r}:{consultancy:void 0,name:void 0,endDate:void 0,startDate:void 0})})}loadData(e){const{consultancy:i,startDate:o,endDate:p,name:r}=e;let C=void 0!==o?new Date(o).toLocaleDateString():void 0,v=void 0!==p?new Date(p).toLocaleDateString():void 0;this.doctorFilterDto.consultancyType=i,this.doctorFilterDto.fromDate=C,this.doctorFilterDto.toDate=v,this.doctorFilterDto.name=r,this.filterModel.limit=this.filterModel.pageSize,this.filterModel.offset=(this.filterModel.pageNo-1)*this.filterModel.pageSize,this.dataLoading=!0,this.skelton=!0,"doctor"==this.user&&(this.subs.sink=(0,h.a)([this.AppointmentService.getAppointmentListForDoctorWithSearchFilter(this.id,this.doctorFilterDto,this.filterModel),this.AppointmentService.getAppointmentCountForDoctorWithSearchFilter(this.id,this.doctorFilterDto)]).subscribe(([l,d])=>{this.totalCount=d,this.appointmentList=l,this.dataLoading=!1,this.skelton=!1},l=>{console.log(l),this.dataLoading=!1,this.skelton=!1})),"patient"==this.user&&(this.subs.sink=(0,h.a)([this.AppointmentService.getAppointmentListForPatientWithSearchFilter(this.id,"patient",this.doctorFilterDto,this.filterModel),this.AppointmentService.getAppointmentCountForPatientWithSearchFilter(this.id,"patient",this.doctorFilterDto)]).subscribe(([l,d])=>{this.totalCount=d,this.appointmentList=l,this.dataLoading=!1,this.skelton=!1},l=>{console.log(l),this.dataLoading=!1,this.skelton=!1})),"agent"==this.user&&(this.subs.sink=(0,h.a)([this.AppointmentService.getAppointmentListForPatientWithSearchFilter(this.id,"agent",this.doctorFilterDto,this.filterModel),this.AppointmentService.getAppointmentCountForPatientWithSearchFilter(this.id,"agent",this.doctorFilterDto)]).subscribe(([l,d])=>{this.totalCount=d,this.appointmentList=l,this.dataLoading=!1,this.skelton=!1},l=>{console.log(l),this.dataLoading=!1,this.skelton=!1}));const m=(new S.s).configureLogging(I.i.Information).withUrl(u.NZ.apis.default.url+"/notify").build();m.start().then(function(){console.log("SignalR Connected!")}).catch(function(l){return console.error(l.toString())}),m.on("BroadcastMessage",()=>{})}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(N),t.Y36(k.qu),t.Y36(_.H),t.Y36(T.gz),t.Y36(c.e))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-all-appointments"]],inputs:{id:"id",user:"user"},decls:12,vars:6,consts:[[1,"w-full","relative"],[3,"filterInput","filterForm","from"],[1,"flex","gap-4","items-center","justify-between","px-6","pb-6"],[1,"dashbord-heading-text","text-[18px]","lg:text-[22px]"],[1,"fa-solid","fa-building-columns","mr-1"],["class","grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 2xl:grid-cols-4 gap-10 flex-wrap",4,"ngIf"],["class","flex justify-center items-center h-[500px] w-full",4,"ngIf"],[1,"grid","px-6","grid-cols-1","md:grid-cols-2","xl:grid-cols-3","gap-10","3xl:grid-cols-4","w-full"],[1,"grid","grid-cols-1","sm:grid-cols-2","md:grid-cols-3","2xl:grid-cols-4","gap-10","flex-wrap"],[1,"flex","justify-center","items-center","h-[500px]","w-full"],[1,"border-[1px]","min-w-[330px]","h-fit","rounded-md","bg-white","overflow-hidden"],[3,"appointment","user"],[1,"flex","justify-center","items-center","h-[500px]","flex-shrink"],["class","border-[1px] min-w-[330px] h-fit rounded-md bg-white overflow-hidden"],["class","flex justify-center items-center h-[500px] flex-shrink"]],template:function(i,o){1&i&&(t.TgZ(0,"div",0),t._UZ(1,"app-filter",1),t.TgZ(2,"div",2)(3,"h1",3),t._UZ(4,"i",4),t._uU(5," Appointments "),t.qZA()(),t.YNc(6,dt,9,0,"div",5)(7,ut,3,0,"div",6),t.TgZ(8,"div",7),t.SjG(9,ft,2,2,"div",13,t.ikw,!1,gt,3,0,"div",14),t.qZA()()),2&i&&(t.xp6(),t.Q6J("filterInput",o.filterInput)("filterForm",o.filter)("from","appointment"),t.xp6(5),t.Q6J("ngIf",o.skelton),t.xp6(),t.Q6J("ngIf",o.noDataAvailable),t.xp6(2),t.wJu(o.appointmentList))},dependencies:[f.O5,J._,A.z,mt],styles:[".mdc-line-ripple{display:none}  .mat-mdc-text-field-wrapper{border:1px solid rgb(211,211,211);height:45px!important}  .mat-mdc-text-field-wrapper .mat-mdc-form-field-flex .mat-mdc-floating-label{top:30px}  .mat-mdc-select-arrow svg{top:0}  .mat-mdc-form-field{margin-left:15px}  .mat-mdc-paginator-page-size-select{height:40px}  .mat-mdc-paginator-container{background:#fff;border-radius:10px}  .mat-mdc-form-field-infix{padding-top:9px!important;padding-bottom:0}"]})}return n})()},5707:(q,U,a)=>{a.d(U,{M:()=>T});var y=a(6814),w=a(8184),F=a(6255),h=a(606),u=a(9212);let S=(()=>{class c{static#t=this.\u0275fac=function(A){return new(A||c)};static#e=this.\u0275mod=u.oAB({type:c});static#n=this.\u0275inj=u.cJS({imports:[y.ez,h.q]})}return c})();var I=a(6223),t=a(9157),x=a(8525),b=a(3365),g=a(8034),_=a(2032),N=a(3680),k=a(9606);let T=(()=>{class c{static#t=this.\u0275fac=function(A){return new(A||c)};static#e=this.\u0275mod=u.oAB({type:c});static#n=this.\u0275inj=u.cJS({imports:[y.ez,w.Bz.forChild([]),F.m,S,I.UX,t.lN,x.LD,b.TU,g.FA,_.c,N.XK,k.i]})}return c})()}}]);