"use strict";(self.webpackChunksoowgood_v2=self.webpackChunksoowgood_v2||[]).push([[952],{952:(F,v,i)=>{i.r(v),i.d(v,{ForgotPasswordModule:()=>X});var f=i(6814),b=i(8184),l=i(6223),p=i(1254),e=i(9212),n=i(9245),s=i(7859),a=i(9802),h=i(9483),_=i(1545),x=i(9157),Z=i(2032),C=i(6642);function J(r,m){1&r&&(e.TgZ(0,"p",56),e._uU(1," You must enter a valid mobile number. "),e.qZA())}function k(r,m){1&r&&(e.TgZ(0,"p",56),e._uU(1," Please include a valid mobile number so we can get back to you. "),e.qZA())}function L(r,m){if(1&r&&(e.TgZ(0,"div",57),e._UZ(1,"i",58),e._uU(2),e.qZA()),2&r){const o=e.oxw();e.xp6(2),e.hij(" ",o.errorMessage," ")}}function M(r,m){if(1&r&&(e.TgZ(0,"div",59),e._UZ(1,"i",58),e._uU(2),e.qZA()),2&r){const o=e.oxw();e.xp6(2),e.hij(" ",o.errorMessage," ")}}function Q(r,m){1&r&&(e.TgZ(0,"p",56),e._uU(1," Password is required. "),e.qZA())}function Y(r,m){1&r&&(e.TgZ(0,"p",56),e._uU(1," Password must start with an uppercase letter. "),e.qZA())}function E(r,m){1&r&&(e.TgZ(0,"p",56),e._uU(1," Password must be at least 6 characters long. "),e.qZA())}function O(r,m){1&r&&(e.TgZ(0,"p",56),e._uU(1," Password must include a special character. "),e.qZA())}function R(r,m){1&r&&(e.TgZ(0,"p",56),e._uU(1," Password must include a number. "),e.qZA())}function V(r,m){1&r&&(e.TgZ(0,"mat-hint",60),e._uU(1,"hint: Password@123"),e.qZA())}function D(r,m){1&r&&(e.TgZ(0,"p",56),e._uU(1," Confirm password is required. "),e.qZA())}function j(r,m){1&r&&(e.TgZ(0,"p",56),e._uU(1," Password not matched. "),e.qZA())}function B(r,m){1&r&&(e.TgZ(0,"p",56),e._uU(1," Accept Terms and Conditions! "),e.qZA())}function z(r,m){if(1&r&&(e.TgZ(0,"div",59),e._UZ(1,"i",58),e._uU(2),e.qZA()),2&r){const o=e.oxw();e.xp6(2),e.hij(" ",o.errorMessage," ")}}const G=r=>({"border-red-500":r}),K=()=>({length:4,allowNumbersOnly:!0});let W=(()=>{class r{constructor(o,c,t,d,u,g,T){this.UserAccountsService=o,this.TosterService=c,this.fb=t,this.otpService=d,this.authService=u,this.router=g,this.activeRoute=T,this.resetFormSubmitted=!1,this.resetLoading=!1,this.resetPasswordFieldType="password",this.resetConfPasswordFieldType="password",this.isEditable=!1,this.isLoading=!1,this.activeTab=0,this.otpMessage="",this.errorMessage="",this.otpLoading=!1}ngOnInit(){this.authService.authInfo()&&(this.TosterService.customToast("Your are already login your account","warning"),this.router.navigate(["/"])),this.loadForm(),this.activeRoute.queryParamMap.subscribe(o=>{this.redirectTo=o.get("redirect")})}loadForm(){this.resetPasswordForm=this.fb.group({username:["",[l.kI.required,l.kI.pattern(/^(?:88)?[0-9]{11}$/)]],newPassword:["",[l.kI.required,p.dN.isAtLeast6Characters,p.dN.includesSpecialCharacter,p.dN.includesNumber]],accept:["",l.kI.required],confirmPassword:["",l.kI.required]},{validator:p.dN.matchValidator})}resetPassword(){if(this.errorMessage="",this.resetFormSubmitted=!0,!this.resetPasswordForm.get("username")?.invalid){this.resetLoading=!0;try{this.otpService.applyOtpForPasswordResetByClientKeyAndRoleAndMobileNo("SoowGood_App",this.redirectTo?.includes("agent")?"agent":"",this.resetPasswordForm.get("username")?.value).subscribe({next:o=>{if(!o)return this.errorMessage="User not found!",this.resetLoading=!1,void(this.resetFormSubmitted=!1);this.resetLoading=!1,this.next(1),this.resetFormSubmitted=!1},error:o=>{this.TosterService.customToast(String(o.message),"error"),this.resetFormSubmitted=!1}})}catch(o){this.TosterService.customToast(String(o),"error"),this.resetFormSubmitted=!1}}}back(o){this.activeTab=o}next(o){this.activeTab=o}onIndexChange(o){this.activeTab=o._selectedIndex}verify(){this.errorMessage="",this.otpLoading=!0;let o=this.otp;o&&this.otpService.varifyOtp(Number(o)).subscribe(c=>{c?(this.otpLoading=!1,this.next(2)):this.errorMessage="Invalid OTP. Please check again!"})}onOtpChange(o){4==o.length?(this.otp=o,this.verify()):console.log("Pin should be 4 character")}resetPasswordVisibility(o){"newPassword"===o?this.resetPasswordFieldType="password"===this.resetPasswordFieldType?"text":"password":"confirmPassword"===o&&(this.resetConfPasswordFieldType="password"===this.resetConfPasswordFieldType?"text":"password")}confirmPassword(){this.resetFormSubmitted=!0,this.errorMessage="";let o=this.resetPasswordForm.get("accept")?.value,c=this.resetPasswordForm.get("confirmPassword")?.value,t={userId:this.resetPasswordForm.get("username")?.value,newPassword:this.resetPasswordForm.get("newPassword")?.value};o?c===t.newPassword?t.newPassword&&t.userId&&o?(this.resetLoading=!0,this.UserAccountsService.resetPasswordByInputDto(t).subscribe({next:d=>{d.success?(this.TosterService.customToast(String(d.message),"success"),this.resetLoading=!1,this.resetFormSubmitted=!1,this.router.navigate(["/"+this.redirectTo]),this.resetPasswordForm.reset()):(this.TosterService.customToast(String(d.message),"error"),this.resetFormSubmitted=!1,this.resetLoading=!1)},error:d=>{this.TosterService.customToast(String(d.message),"error"),this.resetFormSubmitted=!1,this.resetLoading=!1}})):(this.TosterService.customToast("Password/userId not found","error"),this.resetFormSubmitted=!1,this.resetLoading=!1):this.errorMessage="Password not matched":this.errorMessage="You must accept terms & condition"}static#e=this.\u0275fac=function(c){return new(c||r)(e.Y36(n.V),e.Y36(a.G),e.Y36(l.qu),e.Y36(s.n),e.Y36(h.e),e.Y36(b.F0),e.Y36(b.gz))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-forgot-password"]],decls:98,vars:33,consts:[[1,"w-full","h-screen","overflow-y-auto","bg-slate-100"],["id","content","role","main",1,"w-full","max-w-md","mx-auto","p-6"],[1,"flex","flex-col","items-center"],["ngSrc","assets/auth/clr-logo.png","alt","logo","width","200","height","48",1,"w-[200px]","h-12","mr-2"],[1,"forgot-pass"],[2,"background","transparent",3,"selectedIndex","selectedIndexChange"],["stepper",""],[3,"stepControl"],[3,"formGroup"],[1,"mt-7","bg-white","rounded-xl","shadow-lg","border-2","border-secondary/50"],[1,"p-4","sm:p-7"],[1,"text-center"],[1,"block","text-2xl","font-bold","text-gray-800"],[1,"mt-2","text-sm","text-gray-600"],["routerLink","/login",1,"text-secondary","decoration-2","hover:underline","font-medium"],[1,"mt-5"],[1,"grid","gap-y-4"],["for","username",1,"block","text-sm","font-bold","ml-1","mb-2"],[1,"form_input","flex","h-[40px]",3,"ngClass"],["matPrefix","",1,"h-fit","font-Roboto","text-[16px]"],["autocomplete","off","matInput","","maxlength","11","type","tel","formControlName","username","id","username","placeholder","018-000-00000","required","","inputmode","numeric",1,"w-full","bg-white","border-none","outline-none","font-Roboto","h-fit","font-semibold","text-[16px]"],["class","font-Roboto text-[12px] text-red-600 mt-2",4,"ngIf"],["class","p-4 text-sm text-yellow-800 rounded-lg bg-yellow-50 font-semibold font-Roboto","role","alert",4,"ngIf"],[1,"py-3","px-4","inline-flex","justify-center","items-center","gap-2","rounded-md","border","border-transparent","font-semibold","bg-secondary","text-white","hover:bg-secondary/80","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition-all","text-sm",3,"click"],[1,"max-w-lg","text-center","min-w-[400px]","mx-auto","my-10","bg-white","p-5","rounded-xl","shadow","shadow-slate-300"],[1,"w-[150px]","m-auto","rounded-full","h-[150px]","bg-slate-200"],["ngSrc","/assets/auth/v-code.jpg","alt","IMG","width","150","height","150"],[1,"mt-4","text-[28px]","text-primary","font-semibold"],[1,"text-primary"],[1,"mt-6","bg-white"],["inputClass","verify-focus bg-white ",2,"background","white",3,"config","onInputChange"],["class","p-4 mt-4 mb-4 text-sm text-yellow-800 rounded-lg bg-yellow-50 font-semibold font-Roboto","role","alert",4,"ngIf"],[1,"flex","gap-3","mt-6"],[1,"btn-secondary","w-1/2",3,"disabled","click"],[1,"form_btn","w-1/2",3,"disabled","click"],[1,"fa-solid","fa-arrow-right","ml-2"],[1,"p-8","border-[1px]","rounded-lg","mt-6","bg-white"],["for","newPassword",1,"block","mb-2","text-sm","font-medium","text-gray-800"],[1,"form_input","flex","justify-between"],["formControlName","newPassword","name","newPassword","id","newPassword","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"outline-none","border-none","w-full","bg-white",3,"type","keydown.enter"],[1,"cursor-pointer",3,"click"],[1,"flex","flex-col"],["class","text-xs text-red-500 font-normal","align","end",4,"ngIf"],["for","confirm-password",1,"block","mb-2","mt-3","text-sm","font-medium","text-gray-900"],["formControlName","confirmPassword","name","confirm-password","id","confirm-password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"outline-none","border-none","w-full","bg-white",3,"type","keydown.enter"],[1,"flex","items-start","mt-6"],[1,"flex","items-center","h-5"],["id","newsletter","aria-describedby","newsletter","type","checkbox","formControlName","accept","required","",1,"w-4","h-4","border","border-gray-300","rounded","bg-gray-50","focus:ring-3","focus:ring-primary-300"],[1,"ml-3","text-sm"],["for","newsletter",1,"font-light","text-gray-500"],["href","#",1,"font-medium","text-primary-600","hover:underline"],[1,"btn-secondary","w-full","mt-5",3,"click"],[1,"h-[300px]","bg-white","flex","justify-center","text-center"],[1,"mt-3","flex","justify-center","items-center","text-center","divide-x","divide-gray-300"],["routerLink","/",1,"pr-3.5","inline-flex","items-center","gap-x-2","text-sm","text-gray-600","decoration-2","hover:underline","hover:text-primary"],["routerLink","/contact-us",1,"pl-3","inline-flex","items-center","gap-x-2","text-sm","text-gray-600","decoration-2","hover:underline","hover:text-primary"],[1,"font-Roboto","text-[12px]","text-red-600","mt-2"],["role","alert",1,"p-4","text-sm","text-yellow-800","rounded-lg","bg-yellow-50","font-semibold","font-Roboto"],[1,"fa-solid","fa-circle-exclamation","mr-2"],["role","alert",1,"p-4","mt-4","mb-4","text-sm","text-yellow-800","rounded-lg","bg-yellow-50","font-semibold","font-Roboto"],["align","end",1,"text-xs","text-red-500","font-normal"]],template:function(c,t){if(1&c){const d=e.EpF();e.TgZ(0,"div",0)(1,"main",1)(2,"div",2),e._UZ(3,"img",3),e.TgZ(4,"div",4)(5,"mat-stepper",5,6),e.NdJ("selectedIndexChange",function(){e.CHM(d);const g=e.MAs(6);return e.KtG(t.onIndexChange(g))}),e.TgZ(7,"mat-step",7)(8,"form",8)(9,"div",9)(10,"div",10)(11,"div",11)(12,"h1",12),e._uU(13," Forgot password? "),e.qZA(),e.TgZ(14,"p",13),e._uU(15," Remember your password? "),e.TgZ(16,"a",14),e._uU(17," Login here "),e.qZA()()(),e.TgZ(18,"div",15)(19,"div",16)(20,"div")(21,"label",17),e._uU(22,"Mobile Number"),e.qZA(),e.TgZ(23,"div",18)(24,"span",19),e._uU(25,"+88 \xa0"),e.qZA(),e._UZ(26,"input",20),e.qZA(),e.YNc(27,J,2,0,"p",21)(28,k,2,0,"p",21),e.qZA(),e.YNc(29,L,3,1,"div",22),e.TgZ(30,"button",23),e.NdJ("click",function(){return t.resetPassword()}),e._uU(31),e.qZA()()()()()()(),e.TgZ(32,"mat-step")(33,"div",24)(34,"div",25),e._UZ(35,"img",26),e.qZA(),e.TgZ(36,"h1",27),e._uU(37," Verify Your Phone "),e._UZ(38,"br"),e._uU(39," Number "),e.qZA(),e.TgZ(40,"p",28),e._uU(41," We have already sent a verification code"),e._UZ(42,"br"),e._uU(43),e.qZA(),e.TgZ(44,"div",29)(45,"ng-otp-input",30),e.NdJ("onInputChange",function(g){return t.onOtpChange(g)}),e.qZA()(),e.YNc(46,M,3,1,"div",31),e.TgZ(47,"div",32)(48,"button",33),e.NdJ("click",function(){return t.back(0)}),e._uU(49," Back "),e.qZA(),e.TgZ(50,"button",34),e.NdJ("click",function(){return t.verify()}),e._uU(51," Continue "),e._UZ(52,"i",35),e.qZA()()()(),e.TgZ(53,"mat-step")(54,"div",36)(55,"form",8)(56,"label",37),e._uU(57,"New Password"),e.qZA(),e.TgZ(58,"div",38)(59,"input",39),e.NdJ("keydown.enter",function(g){return g.preventDefault()}),e.qZA(),e.TgZ(60,"button",40),e.NdJ("click",function(){return t.resetPasswordVisibility("newPassword")}),e._UZ(61,"i"),e.qZA()(),e.TgZ(62,"div",41),e.YNc(63,Q,2,0,"p",21)(64,Y,2,0,"p",21)(65,E,2,0,"p",21)(66,O,2,0,"p",21)(67,R,2,0,"p",21),e.qZA(),e.YNc(68,V,2,0,"mat-hint",42),e.TgZ(69,"label",43),e._uU(70,"Confirm password"),e.qZA(),e.TgZ(71,"div",38)(72,"input",44),e.NdJ("keydown.enter",function(g){return g.preventDefault()}),e.qZA(),e.TgZ(73,"button",40),e.NdJ("click",function(){return t.resetPasswordVisibility("confirmPassword")}),e._UZ(74,"i"),e.qZA()(),e.TgZ(75,"div",41),e.YNc(76,D,2,0,"p",21)(77,j,2,0,"p",21),e.qZA(),e.TgZ(78,"div",45)(79,"div",46),e._UZ(80,"input",47),e.qZA(),e.TgZ(81,"div",48)(82,"label",49),e._uU(83," I accept the "),e.TgZ(84,"a",50),e._uU(85,"Terms and Conditions"),e.qZA()()(),e.YNc(86,B,2,0,"p",21),e.qZA(),e.YNc(87,z,3,1,"div",31),e.TgZ(88,"button",51),e.NdJ("click",function(){return t.confirmPassword()}),e._uU(89," Confirm Password "),e.qZA()()()(),e.TgZ(90,"mat-step")(91,"div",52),e._uU(92," You have successfully reset your password! Now you can login your account with new password. "),e.qZA()()()()(),e.TgZ(93,"p",53)(94,"a",54),e._uU(95," Home "),e.qZA(),e.TgZ(96,"span",55),e._uU(97," Contact us! "),e.qZA()()()()}if(2&c){let d,u,g,T,S,N,A,U,q,y,I,P,w;e.xp6(5),e.Q6J("selectedIndex",t.activeTab),e.xp6(2),e.Q6J("stepControl",t.resetPasswordForm),e.xp6(),e.Q6J("formGroup",t.resetPasswordForm),e.xp6(15),e.Q6J("ngClass",e.VKq(30,G,(null==(d=t.resetPasswordForm.get("username"))?null:d.invalid)&&(null==(d=t.resetPasswordForm.get("username"))?null:d.touched))),e.xp6(4),e.Q6J("ngIf",t.resetFormSubmitted&&(null==(u=t.resetPasswordForm.get("username"))?null:u.hasError("required"))),e.xp6(),e.Q6J("ngIf",t.resetFormSubmitted&&(null==(g=t.resetPasswordForm.get("username"))?null:g.hasError("pattern"))),e.xp6(),e.Q6J("ngIf",t.errorMessage),e.xp6(2),e.hij(" ",t.resetLoading?"Loading":"Reset password "," "),e.xp6(12),e.hij("to ",null==(T=t.resetPasswordForm.get("username"))?null:T.value," "),e.xp6(2),e.Q6J("config",e.DdM(32,K)),e.xp6(),e.Q6J("ngIf",t.errorMessage),e.xp6(2),e.Q6J("disabled",t.isLoading),e.xp6(2),e.Q6J("disabled",t.isLoading),e.xp6(5),e.Q6J("formGroup",t.resetPasswordForm),e.xp6(4),e.Q6J("type",t.resetPasswordFieldType),e.xp6(2),e.Tol("password"===t.resetPasswordFieldType?"fa fa-eye-slash":"fa fa-eye"),e.xp6(2),e.Q6J("ngIf",t.resetFormSubmitted&&(null==(S=t.resetPasswordForm.get("newPassword"))?null:S.hasError("required"))),e.xp6(),e.Q6J("ngIf",t.resetFormSubmitted&&(null==(N=t.resetPasswordForm.get("newPassword"))?null:N.hasError("startsWithUppercase"))),e.xp6(),e.Q6J("ngIf",t.resetFormSubmitted&&(null==(A=t.resetPasswordForm.get("newPassword"))?null:A.hasError("isAtLeast6Characters"))),e.xp6(),e.Q6J("ngIf",t.resetFormSubmitted&&(null==(U=t.resetPasswordForm.get("newPassword"))?null:U.hasError("includesSpecialCharacter"))),e.xp6(),e.Q6J("ngIf",t.resetFormSubmitted&&(null==(q=t.resetPasswordForm.get("newPassword"))?null:q.hasError("includesNumber"))),e.xp6(),e.Q6J("ngIf",(null==(y=t.resetPasswordForm.get("newPassword"))?null:y.invalid)||"0"===(null==(y=t.resetPasswordForm.get("newPassword"))?null:y.value)),e.xp6(4),e.Q6J("type",t.resetConfPasswordFieldType),e.xp6(2),e.Tol("password"===t.resetConfPasswordFieldType?"fa fa-eye-slash":"fa fa-eye"),e.xp6(2),e.Q6J("ngIf",t.resetFormSubmitted&&(null==(I=t.resetPasswordForm.get("confirmPassword"))?null:I.hasError("required"))),e.xp6(),e.Q6J("ngIf",t.resetFormSubmitted&&(null==(P=t.resetPasswordForm.get("confirmPassword"))?null:P.valid)&&(null==(P=t.resetPasswordForm.get("confirmPassword"))?null:P.dirty)&&(null==(P=t.resetPasswordForm.get("confirmPassword"))?null:P.errors)),e.xp6(9),e.Q6J("ngIf",t.resetFormSubmitted&&(null==(w=t.resetPasswordForm.get("accept"))?null:w.hasError("required"))&&(null==(w=t.resetPasswordForm.get("accept"))?null:w.valid)&&(null==(w=t.resetPasswordForm.get("accept"))?null:w.dirty)&&(null==(w=t.resetPasswordForm.get("accept"))?null:w.errors)),e.xp6(),e.Q6J("ngIf",t.errorMessage)}},dependencies:[f.mk,f.O5,b.rH,l._Y,l.Fj,l.Wl,l.JJ,l.JL,l.Q7,l.nD,l.Zs,l.sg,l.u,f.Zd,_.C0,_.Vq,x.bx,x.qo,Z.Nt,C.df],styles:[".mat-horizontal-stepper-header-container{display:none!important}  .mat-horizontal-content-container{width:450px!important}"]})}return r})();var $=i(2296);const H=[{path:"",component:W}];let X=(()=>{class r{static#e=this.\u0275fac=function(c){return new(c||r)};static#t=this.\u0275mod=e.oAB({type:r});static#r=this.\u0275inj=e.cJS({imports:[f.ez,b.Bz.forChild(H),l.UX,$.ot,_.T5,x.lN,Z.c,C.Xz]})}return r})()},9245:(F,v,i)=>{i.d(v,{V:()=>l});var f=i(9212),b=i(8175);let l=(()=>{class p{constructor(n){this.restService=n,this.apiName="Default",this.decodeJwtByJwt=(s,a)=>this.restService.request({method:"POST",url:"/api/app/user-accounts/decode-jwt",body:s},{apiName:this.apiName,...a}),this.isUserExistsByUserName=(s,a)=>this.restService.request({method:"POST",url:"/api/app/user-accounts/is-user-exists",params:{userName:s}},{apiName:this.apiName,...a}),this.loginByUserDto=(s,a)=>this.restService.request({method:"POST",url:"/api/app/user-accounts/login",body:s},{apiName:this.apiName,...a}),this.refreshAccessTokenByUser=(s,a)=>this.restService.request({method:"POST",url:"/api/app/user-accounts/refresh-access-token",body:s},{apiName:this.apiName,...a}),this.resetPasswordByInputDto=(s,a)=>this.restService.request({method:"POST",url:"/api/app/user-accounts/reset-password",body:s},{apiName:this.apiName,...a}),this.resetPassword_AppByInputDto=(s,a)=>this.restService.request({method:"POST",url:"/api/app/user-accounts/reset-password_App",body:s},{apiName:this.apiName,...a}),this.signupUserByUserDtoAndPasswordAndRole=(s,a,h,_)=>this.restService.request({method:"POST",url:"/api/app/user-accounts/signup-user",params:{password:a,role:h},body:s},{apiName:this.apiName,..._}),this.userDataRemove=(s,a,h)=>this.restService.request({method:"POST",url:"/api/app/user-accounts/user-data-remove",params:{role:a},body:s},{apiName:this.apiName,...h})}static#e=this.\u0275fac=function(s){return new(s||p)(f.LFG(b.vgb))};static#t=this.\u0275prov=f.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"})}return p})()},1254:(F,v,i)=>{i.d(v,{dN:()=>p});class p{static isAtLeast6Characters(n){const s=n.value;return s&&s.length<6?{isAtLeast6Characters:!0}:null}static includesSpecialCharacter(n){const s=n.value;return s&&!/.*[!@#$%^&*()_+{}\[\]:;<>,.?~\\\-=/|]/.test(s)?{includesSpecialCharacter:!0}:null}static includesNumber(n){const s=n.value;return s&&!/.*[0-9]/.test(s)?{includesNumber:!0}:null}static matchValidator(n){const s=n.get("password")?.value,a=n.get("confirmPassword")?.value;if(!a?.length)return null;if(a.length<6)n.get("confirmPassword")?.setErrors({minLength:!0});else{if(s===a)return null;n.get("confirmPassword")?.setErrors({mismatch:!0})}}static mobileNumberFormat(){return n=>/^[0-9]+$/.test(n.value)?null:{invalidFormat:!0}}static mobileNumberLength(){return n=>n.value&&11===n.value.length?null:{invalidLength:!0}}}}}]);