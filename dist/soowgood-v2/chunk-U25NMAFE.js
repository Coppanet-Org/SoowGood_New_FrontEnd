import{D as oe,E as se}from"./chunk-FUUASHDU.js";import{B as J,C as Re,E as Ae,F as Te,Ib as D,Kb as Ne,L as C,Lb as _e,M as Ee,O as R,Pb as Le,R as h,S as M,T as g,Tb as X,U as l,Y as O,_ as we,cc as ee,d as T,e as y,ea as Q,g as W,gc as Me,h as Se,hc as te,i as E,ic as Oe,j as U,ja as I,jc as Fe,k as Ce,kc as F,m as d,mc as je,n as Y,nc as ne,t as Ie,uc as re,v as w,xc as ie,y as B,za as De}from"./chunk-PJQ4EZIT.js";import{a as u,b as v,c as G,g as Z}from"./chunk-5G567QLT.js";var ae=ce;function ce(t,r){return t===r||t!==t&&r!==r?!0:typeof t!=typeof r||{}.toString.call(t)!={}.toString.call(r)||t!==Object(t)||!t?!1:Array.isArray(t)?ke(t,r):{}.toString.call(t)=="[object Set]"?ke(Array.from(t),Array.from(r)):{}.toString.call(t)=="[object Object]"?it(t,r):rt(t,r)}function rt(t,r){return t.toString()===r.toString()}function ke(t,r){var e=t.length;if(e!=r.length)return!1;for(var n=0;n<e;n++)if(!ce(t[n],r[n]))return!1;return!0}function it(t,r){var e=Object.keys(t),n=e.length;if(n!=Object.keys(r).length)return!1;for(var i=0;i<n;i++){var o=e[i];if(!(r.hasOwnProperty(o)&&ce(t[o],r[o])))return!1}return!0}var Pe=j;function j(t){let r=t;var e={}.toString.call(t).slice(8,-1);if(e=="Set")return new Set([...t].map(i=>j(i)));if(e=="Map")return new Map([...t].map(i=>[j(i[0]),j(i[1])]));if(e=="Date")return new Date(t.getTime());if(e=="RegExp")return RegExp(t.source,ot(t));if(e=="Array"||e=="Object"){r=Array.isArray(t)?[]:{};for(var n in t)r[n]=j(t[n])}return r}function ot(t){if(typeof t.source.flags=="string")return t.source.flags;var r=[];return t.global&&r.push("g"),t.ignoreCase&&r.push("i"),t.multiline&&r.push("m"),t.sticky&&r.push("y"),t.unicode&&r.push("u"),r.join("")}var hr=(()=>{class t{canActivate(){return console.error("You should add @abp/ng-oauth packages or create your own auth packages."),!1}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=h({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),ut=(()=>{class t{warningMessage(){console.error("You should add @abp/ng-oauth packages or create your own auth packages.")}init(){return this.warningMessage(),Promise.resolve(void 0)}login(e){return this.warningMessage(),E(void 0)}logout(e){return this.warningMessage(),E(void 0)}navigateToLogin(e){}get isInternalAuth(){throw new Error("not implemented")}get isAuthenticated(){return this.warningMessage(),!1}loginUsingGrant(e,n,i){return console.log({grantType:e,parameters:n,headers:i}),Promise.reject(new Error("not implemented"))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=h({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),ze=new g("LOCALIZATIONS");function $e(t){t&&ue.next([...ue.value,...t])}var ue=new y([]),z=new g("CORE_OPTIONS");function lt(r){var t=G(r,[]);return u({},t)}function le(t){return(r,e,n)=>{if(r==="_")return e;let i=t?.values?.[r];return i&&i[e]||n}}function xe(t){let r=dt(t);return(e,n,i)=>{let{localized:o}=r(e,n);return o||i}}function dt(t){let r=le(t);return(e,n)=>{e=e.concat(t.defaultResourceName||"").filter(Boolean);let i=e.length,o=n.length;for(let s=0;s<i;s++){let a=e[s];for(let c=0;c<o;c++){let p=n[c],f=r(a,p,null);if(f)return{resourceName:a,key:p,localized:f}}}return{resourceName:void 0,key:void 0,localized:void 0}}}function pt(t){return r=>{let e=[],n=t.replace(/\./g,"\\.").replace(/\{\s?([0-9a-zA-Z]+)\s?\}/g,(o,s)=>(e.push(s),"(.+)"));return(r.match(n)||[]).slice(1).reduce((o,s,a)=>{let c=e[a];return o[c]=[...o[c]||[],s].filter(Boolean),o},{})}}function ht(t,r){return t.replace(/(['"]?\{\s*(\d+)\s*\}['"]?)/g,(e,n,i)=>r[i]??n).replace(/\s+/g," ")}var ft=new Oe(()=>!1),H,de,b=class extends F{constructor(){super(...arguments),H.add(this)}request(r,e,n={}){return typeof r=="string"?(W(this,H,"m",de).call(this,n),super.request(r,e||"",n)):(W(this,H,"m",de).call(this,r),super.request(r))}};H=new WeakSet,de=function(r){r.context??(r.context=new Fe),r.context.set(ft,!0)};b.\u0275fac=(()=>{let t;return function(e){return(t||(t=Q(b)))(e||b)}})();b.\u0275prov=h({token:b,factory:b.\u0275fac,providedIn:"root"});function pe(){return function(){}}function gt(t){return t===void 0||t===""}function P(t){return t==null}function Ze(t){return!P(t)}function he(t){return t instanceof Object}function q(t){return Array.isArray(t)}function mt(t){return he(t)&&!q(t)}function fe(t){return t instanceof Node}function Ge(t){return mt(t)&&!fe(t)}function vt(t,r){return Object.prototype.hasOwnProperty.call(t,r)}function We(t,r){return Ge(t)&&Ge(r)?Ye(t,r):P(t)&&P(r)?{}:Ze(r)?r:t}function Ye(t,r){if(P(t)||P(r)||q(t)||q(r)||!he(t)||!he(r)||fe(t)||fe(r))return Ze(r)?r:t;let n=Object.keys(t),i=Object.keys(r);return[...new Set(n.concat(i))].reduce((s,a)=>(s[a]=Ye(t[a],r[a]),s),{})}var N=class{constructor(r){this.initialState=r,this.state$=new y(this.initialState),this.update$=new T,this.sliceState=(e,n=ae)=>this.state$.pipe(d(e),Ae(n)),this.sliceUpdate=(e,n=i=>i!==void 0)=>this.update$.pipe(d(e),w(n))}get state(){return this.state$.value}patch(r){let e=r;typeof r=="object"&&!Array.isArray(r)&&(e=u(u({},this.state),r)),this.state$.next(e),this.update$.next(e)}deepPatch(r){this.state$.next(We(this.state,r)),this.update$.next(r)}set(r){this.state$.next(r),this.update$.next(r)}reset(){this.set(this.initialState)}},Ue=t=>r=>(t&&r[t]||r.default).url||r.default.url,Be=t=>t&&(t.endsWith("/")?t:t+"/"),$=(()=>{class t{constructor(){this.store=new N({})}get createOnUpdateStream(){return this.store.sliceUpdate}getEnvironment$(){return this.store.sliceState(e=>e)}getEnvironment(){return this.store.state}getApiUrl(e){return Ue(e)(this.store.state?.apis)}getApiUrl$(e){return this.store.sliceState(n=>n.apis).pipe(d(Ue(e)))}setState(e){this.store.set(e)}getIssuer(){let e=this.store.state?.oAuthConfig?.issuer;return Be(e)}getIssuer$(){return this.store.sliceState(e=>e?.oAuthConfig?.issuer).pipe(d(Be))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=h({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Je=(()=>{class t{constructor(){this._reporter$=new T,this._errors$=new y([]),this.reportError=e=>{this._reporter$.next(e),this._errors$.next([...this.errors,e])}}get reporter$(){return this._reporter$.asObservable()}get errors$(){return this._errors$.asObservable()}get errors(){return this._errors$.value}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=h({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),_=(()=>{class t{constructor(e,n,i,o,s){this.options=e,this.http=n,this.externalHttp=i,this.environment=o,this.httpErrorReporter=s}getApiFromStore(e){return this.environment.getApiUrl(e)}handleError(e){return this.httpErrorReporter.reportError(e),U(e)}request(e,n,i){n=n||{},i=i||this.getApiFromStore(n.apiName);let S=e,{method:o,params:s}=S,a=G(S,["method","params"]),{observe:c="body",skipHandleError:p}=n,f=this.removeDuplicateSlashes(i+e.url);return this.getHttpClient(n.skipAddingHeader).request(o,f,u(u({observe:c},s&&{params:this.getParams(s,n.httpParamEncoder)}),a)).pipe(B(A=>p?U(A):this.handleError(A)))}getHttpClient(e){return e?this.externalHttp:this.http}getParams(e,n){let i=Object.entries(e).reduce((o,[s,a])=>(gt(a)||a===null&&!this.options.sendNullsAsQueryParam||(o[s]=a),o),{});return n?new te({encoder:n,fromObject:i}):new te({fromObject:i})}removeDuplicateSlashes(e){return e.replace(/([^:]\/)\/+/g,"$1")}}return t.\u0275fac=function(e){return new(e||t)(l(z),l(F),l(b),l($),l(Je))},t.\u0275prov=h({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),yt=(()=>{class t{constructor(e){this.restService=e,this.apiName="abp",this.get=n=>this.restService.request({method:"GET",url:"/api/abp/application-configuration",params:{includeLocalizationResources:n.includeLocalizationResources}},{apiName:this.apiName})}}return t.\u0275fac=function(e){return new(e||t)(l(_))},t.\u0275prov=h({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),bt=(()=>{class t{constructor(e){this.restService=e,this.apiName="abp",this.get=n=>this.restService.request({method:"GET",url:"/api/abp/application-localization",params:{cultureName:n.cultureName,onlyDynamics:n.onlyDynamics}},{apiName:this.apiName})}}return t.\u0275fac=function(e){return new(e||t)(l(_))},t.\u0275prov=h({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Qe=new g("INCUDE_LOCALIZATION_RESOURCES_TOKEN"),L=(()=>{class t{constructor(e,n,i){this.abpConfigService=e,this.abpApplicationLocalizationService=n,this.includeLocalizationResources=i,this.store=new N({}),this.updateSubject=new T,this.initUpdateStream()}get createOnUpdateStream(){return this.store.sliceUpdate}initUpdateStream(){this.updateSubject.pipe(C(()=>this.abpConfigService.get({includeLocalizationResources:!!this.includeLocalizationResources}))).pipe(C(e=>this.getLocalizationAndCombineWithAppState(e))).subscribe(e=>this.store.set(e))}getLocalizationAndCombineWithAppState(e){if(!e.localization.currentCulture.cultureName)throw new Error("culture name should defined");return this.getlocalizationResource(e.localization.currentCulture.cultureName).pipe(d(n=>v(u({},e),{localization:u(u({},e.localization),n)})))}getlocalizationResource(e){return this.abpApplicationLocalizationService.get({cultureName:e,onlyDynamics:!1})}refreshAppState(){return this.updateSubject.next(),this.createOnUpdateStream(e=>e).pipe(J(1))}refreshLocalization(e){return this.includeLocalizationResources?this.refreshAppState().pipe(d(()=>null)):this.getlocalizationResource(e).pipe(R(n=>this.store.patch({localization:u(u({},this.store.state.localization),n)}))).pipe(d(()=>null))}getOne$(e){return this.store.sliceState(n=>n[e])}getOne(e){return this.store.state[e]}getAll$(){return this.store.sliceState(e=>e)}getAll(){return this.store.state}getDeep$(e){return e=He(e),this.store.sliceState(n=>n).pipe(d(n=>e.reduce((i,o)=>{if(i)return i[o]},n)))}getDeep(e){return e=He(e),e.reduce((n,i)=>{if(n)return n[i]},this.store.state)}getFeature(e){return this.store.state.features?.values?.[e]}getFeature$(e){return this.store.sliceState(n=>n.features?.values?.[e])}getFeatures(e){let{features:n}=this.store.state;if(n)return e.reduce((i,o)=>v(u({},i),{[o]:n.values[o]}),{})}getFeatures$(e){return this.store.sliceState(({features:n})=>{if(n?.values)return e.reduce((i,o)=>v(u({},i),{[o]:n.values[o]}),{})})}getSetting(e){return this.store.state.setting?.values?.[e]}getSetting$(e){return this.store.sliceState(n=>n.setting?.values?.[e])}getSettings(e){let n=this.store.state.setting?.values||{};return e?Object.keys(n).filter(o=>o.indexOf(e)>-1).reduce((o,s)=>(o[s]=n[s],o),{}):n}getSettings$(e){return this.store.sliceState(n=>n.setting?.values).pipe(d((n={})=>e?Object.keys(n).filter(o=>o.indexOf(e)>-1).reduce((o,s)=>(o[s]=n[s],o),{}):n))}getGlobalFeatures(){return this.store.state.globalFeatures}getGlobalFeatures$(){return this.store.sliceState(e=>e.globalFeatures)}isGlobalFeatureEnabled(e,n){return(n.enabledFeatures||[]).some(o=>e===o)}getGlobalFeatureIsEnabled(e){return this.isGlobalFeatureEnabled(e,this.store.state.globalFeatures)}getGlobalFeatureIsEnabled$(e){return this.store.sliceState(n=>this.isGlobalFeatureEnabled(e,n.globalFeatures))}}return t.\u0275fac=function(e){return new(e||t)(l(yt),l(bt),l(Qe,8))},t.\u0275prov=h({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function He(t){if(typeof t=="string"&&(t=t.split(".")),!Array.isArray(t))throw new Error("The argument must be a dot string or an string array.");return t}var St=(()=>{class t{constructor(){}get length(){return localStorage.length}clear(){localStorage.clear()}getItem(e){return localStorage.getItem(e)}key(e){return localStorage.key(e)}removeItem(e){localStorage.removeItem(e)}setItem(e,n){localStorage.setItem(e,n)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=h({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),x=(()=>{class t{constructor(e,n){this.configState=e,this.localStorageService=n,this.store=new N({}),this.updateLocalStorage=()=>{this.localStorageService.setItem("abpSession",JSON.stringify(this.store.state))},this.init(),this.setInitialLanguage()}init(){let e=this.localStorageService.getItem("abpSession");e&&this.store.set(JSON.parse(e)),this.store.sliceUpdate(n=>n).subscribe(this.updateLocalStorage)}setInitialLanguage(){let e=this.getLanguage();this.configState.getDeep$("localization.currentCulture.cultureName").pipe(w(n=>!!n),J(1)).subscribe(n=>{n.includes(";")&&(n=n.split(";")[0]),e!==n&&this.setLanguage(n)})}onLanguageChange$(){return this.store.sliceUpdate(e=>e.language)}onTenantChange$(){return this.store.sliceUpdate(e=>e.tenant)}getLanguage(){return this.store.state.language}getLanguage$(){return this.store.sliceState(e=>e.language)}getTenant(){return this.store.state.tenant}getTenant$(){return this.store.sliceState(e=>e.tenant)}setTenant(e){ae(e,this.store.state.tenant)||this.store.set(v(u({},this.store.state),{tenant:e}))}setLanguage(e){e!==this.store.state.language&&(this.store.patch({language:e}),document.documentElement.setAttribute("lang",e))}}return t.\u0275fac=function(e){return new(e||t)(l(L),l(St))},t.\u0275prov=h({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),k=(()=>{class t{constructor(e,n,i,o){if(this.sessionState=e,this.injector=n,this.configState=o,this.latestLang=this.sessionState.getLanguage(),this._languageChange$=new T,this.uiLocalizations$=new y(new Map),this.localizations$=new y(new Map),i)throw new Error("LocalizationService should have only one instance.");this.listenToSetLanguage(),this.initLocalizationValues()}get currentLang(){return this.latestLang||this.sessionState.getLanguage()}get currentLang$(){return this.sessionState.getLanguage$()}get languageChange$(){return this._languageChange$.asObservable()}initLocalizationValues(){ue.subscribe(s=>this.addLocalization(s));let e=this.configState.getDeep$("localization.values"),n=this.configState.getDeep$("localization.resources"),i=this.sessionState.getLanguage$(),o=Y([i,this.uiLocalizations$]).pipe(d(([s,a])=>a.get(s)));Y([e,n,o]).pipe(d(([s,a,c])=>{if(!a)return;let p=It(s||{},a);return p&&(c||(c=new Map),Object.entries(p).forEach(f=>{let m=f[0],S=f[1],A=c?.get(m)||{};A=u(u({},A),S),c?.set(m,A)})),c}),w(Boolean)).subscribe(s=>this.localizations$.next(s))}addLocalization(e){if(!e)return;let n=this.uiLocalizations$.value;e.forEach(i=>{let o=n.get(i.culture)||new Map;i.resources.forEach(s=>{let a=o.get(s.resourceName)||{};a=u(u({},a),s.texts),o.set(s.resourceName,a)}),n.set(i.culture,o)}),this.uiLocalizations$.next(n)}listenToSetLanguage(){this.sessionState.onLanguageChange$().pipe(w(e=>this.configState.getDeep("localization.currentCulture.cultureName")!==e),C(e=>this.configState.refreshAppState().pipe(d(()=>e))),w(Boolean),C(e=>Se(this.registerLocale(e).then(()=>e)))).subscribe(e=>this._languageChange$.next(e))}registerLocale(e){let{registerLocaleFn:n}=this.injector.get(z);return n(e).then(i=>{i?.default&&X(i.default),this.latestLang=e})}get(e,...n){return this.configState.getAll$().pipe(d(i=>this.getLocalization(i,e,...n)))}getResource(e){return this.localizations$.value.get(e)}getResource$(e){return this.localizations$.pipe(d(n=>n.get(e)))}instant(e,...n){return this.getLocalization(this.configState.getAll(),e,...n)}localize(e,n,i){return this.configState.getOne$("localization").pipe(d(le),d(o=>o(e,n,i)))}localizeSync(e,n,i){let o=this.configState.getOne("localization");return le(o)(e,n,i)}localizeWithFallback(e,n,i){return this.configState.getOne$("localization").pipe(d(xe),d(o=>o(e,n,i)))}localizeWithFallbackSync(e,n,i){let o=this.configState.getOne("localization");return xe(o)(e,n,i)}getLocalization(e,n,...i){n||(n="");let o="";typeof n!="string"&&(o=n.defaultValue,n=n.key);let s=n.split("::"),a=S=>{_e()&&console.warn(S)};if(s.length<2)return a("The localization source separator (::) not found."),o||n;if(!e.localization)return o||s[1];let c=s[0]||e.localization.defaultResourceName,p=s[1];if(c==="_")return o||p;if(!c)return a("Localization source name is not specified and the defaultResourceName was not defined!"),o||p;let f=this.localizations$.value.get(c);if(!f)return a("Could not find localization source: "+c),o||p;let m=f[p];return typeof m>"u"?o||p:(i=i.filter(S=>S!=null),m&&(m=ht(m,i)),typeof m!="string"&&(m=""),m||o||n)}}return t.\u0275fac=function(e){return new(e||t)(l(x),l(I),l(t,12),l(L))},t.\u0275prov=h({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Xe(t,r){let e=r[t];return e.baseResources.length===0?e:e.baseResources.reduce((n,i)=>{let o=Xe(i,r),s=u(u({},o.texts),e.texts);return v(u({},n),{texts:s})},e)}function Ct(t){return Object.keys(t).map(e=>{let n=Xe(e,t);return[e,n]}).reduce((e,[n,i])=>v(u({},e),{[n]:i}),{})}function It(t,r){let e=Ct(r);return Object.entries(e).reduce((n,[i,o])=>v(u({},n),{[i]:o.texts}),t)}var Rt=new g("APP_INIT_ERROR_HANDLERS"),At=new g("COOKIE_LANGUAGE_KEY",{factory:()=>".AspNetCore.Culture"}),fr=new g("LIST_QUERY_DEBOUNCE_TIME"),Tt=new g("LOADER_DELAY"),gr=new g("NAVIGATE_TO_MANAGE_PROFILE"),Et=new g("QUEUE_MANAGER"),et=new g("TENANT_KEY"),mr=new g("PIPE_TO_LOGIN_FN_KEY"),vr=new g("SET_TOKEN_RESPONSE_TO_STORAGE_FN_KEY"),wt=new g("CHECK_AUTHENTICATION_STATE_FN_KEY"),tt=new g("OTHERS_GROUP");function Dt(t){return r=>(t.push(r),t)}var ge=class t{constructor(r){this.children=[],this.isLeaf=!0,Object.assign(this,r)}static create(r){return new t(r)}};function Nt(t,r,e,n){let i=_t(t,r,n),o=[];return t.forEach(s=>{let a=r(s),c=e(s),p=i.get(a);if(p)if(c){let f=i.get(c);if(!f)return;f.children.push(p),f.isLeaf=!1,p.parent=f}else o.push(p)}),o}function _t(t,r,e){let n=new Map;return t.forEach(i=>n.set(r(i),e(i))),n}function Lt(t,r){if(!q(t)||!t.some(n=>!!n.group))return;let e=new Map;for(let n of t){let i=n?.group||r;if(typeof i!="string")throw new Error(`Invalid group: ${i}`);let o=e.get(i)||[];o.push(n),e.set(i,o)}return e}var Mt=(()=>{class t{constructor(e){this.configState=e}getGrantedPolicy$(e){return this.getStream().pipe(d(n=>this.isPolicyGranted(e,n)))}getGrantedPolicy(e){let n=this.getSnapshot();return this.isPolicyGranted(e,n)}filterItemsByPolicy(e){let n=this.getSnapshot();return e.filter(i=>!i.requiredPolicy||this.isPolicyGranted(i.requiredPolicy,n))}filterItemsByPolicy$(e){return this.getStream().pipe(d(n=>e.filter(i=>!i.requiredPolicy||this.isPolicyGranted(i.requiredPolicy,n))))}isPolicyGranted(e,n){if(!e)return!0;let i=/\|\|/g,o=/&&/g;if(i.test(e)){let s=e.split("||").filter(Boolean);return s.length<2?!1:s.some(a=>this.getPolicy(a.trim(),n))}else if(o.test(e)){let s=e.split("&&").filter(Boolean);return s.length<2?!1:s.every(a=>this.getPolicy(a.trim(),n))}return this.getPolicy(e,n)}getStream(){return this.configState.getAll$().pipe(d(this.mapToPolicies))}getSnapshot(){return this.mapToPolicies(this.configState.getAll())}mapToPolicies(e){return e?.auth?.grantedPolicies||{}}getPolicy(e,n){return n[e]||!1}}return t.\u0275fac=function(e){return new(e||t)(l(L))},t.\u0275prov=h({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),me=class{constructor(){this._flat$=new y([]),this._tree$=new y([]),this._visible$=new y([])}get flat(){return this._flat$.value}get flat$(){return this._flat$.asObservable()}get tree(){return this._tree$.value}get tree$(){return this._tree$.asObservable()}get visible(){return this._visible$.value}get visible$(){return this._visible$.asObservable()}createTree(r){return Nt(r,e=>e[this.id],e=>e[this.parentId],e=>ge.create(e))}createGroupedTree(r){let e=Lt(r,this.othersGroup);if(e)return Array.from(e,([n,i])=>({group:n,items:i}))}filterWith(r){return this._flat$.value.filter(e=>!r.has(e[this.id]))}findItemsToRemove(r){return this._flat$.value.reduce((e,n)=>{if(!e.has(n[this.parentId]))return e;let i=new Set([n[this.id]]),o=this.findItemsToRemove(i);return new Set([...e,...o])},r)}publish(r,e){return this._flat$.next(r),this._tree$.next(this.createTree(r)),this._visible$.next(this.createTree(e)),r}add(r){let e=new Map;r.forEach(o=>e.set(o[this.id],o));let n=this.filterWith(e);e.forEach(Dt(n)),n.sort(this.sort);let i=n.filter(o=>!this.hide(o));return this.publish(n,i)}find(r,e=this.tree){return e.reduce((n,i)=>n||(r(i)?i:this.find(r,i.children)),null)}patch(r,e){let n=this._flat$.value,i=n.findIndex(s=>s[this.id]===r);if(i<0)return!1;n[i]=u(u({},n[i]),e),n.sort(this.sort);let o=n.filter(s=>!this.hide(s));return this.publish(n,o)}refresh(){return this.add([])}remove(r){let e=new Set;r.forEach(s=>e.add(s));let n=this.findItemsToRemove(e),i=this.filterWith(n),o=i.filter(s=>!this.hide(s));return this.publish(i,o)}search(r,e=this.tree){let n=Object.keys(r);return e.reduce((i,o)=>i||(n.every(s=>o[s]===r[s])?o:this.search(r,o.children)),null)}},Ot=(()=>{class t extends me{constructor(e){super(),this.injector=e,this.id="name",this.parentId="parentName",this.hide=i=>i.invisible||!this.isGranted(i),this.sort=(i,o)=>Number.isInteger(i.order)?Number.isInteger(o.order)?i.order-o.order:-1:1;let n=this.injector.get(L);this.subscription=n.createOnUpdateStream(i=>i).subscribe(()=>this.refresh()),this.permissionService=e.get(Mt),this.othersGroup=e.get(tt)}isGranted({requiredPolicy:e}){return this.permissionService.getGrantedPolicy(e)}hasChildren(e){return!!this.find(i=>i[this.id]===e)?.children?.length}hasInvisibleChild(e){return this.find(i=>i[this.id]===e)?.children?.some(i=>i.invisible)||!1}ngOnDestroy(){this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(l(I))},t.\u0275prov=h({token:t,factory:t.\u0275fac}),t})(),Ft=(()=>{class t extends Ot{hasPathOrChild(e){return!!e.path||this.hasChildren(e.name)}get groupedVisible(){return this.createGroupedTree(this.visible.filter(e=>this.hasPathOrChild(e)))}get groupedVisible$(){return this.visible$.pipe(d(e=>e.filter(n=>this.hasPathOrChild(n))),d(e=>this.createGroupedTree(e)))}}return t.\u0275fac=(()=>{let r;return function(n){return(r||(r=Q(t)))(n||t)}})(),t.\u0275prov=h({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var qe={aa:"en","aa-DJ":"en","aa-ER":"en","aa-ET":"en","af-ZA":"af","agq-CM":"agq","ak-GH":"ak","am-ET":"am","ar-001":"ar",arn:"en","arn-CL":"en","as-IN":"as","asa-TZ":"asa","ast-ES":"ast","az-Cyrl-AZ":"az-Cyrl","az-Latn-AZ":"az-Latn",ba:"ru","ba-RU":"ru","bas-CM":"bas","be-BY":"be","bem-ZM":"bem","bez-TZ":"bez","bg-BG":"bg",bin:"en","bin-NG":"en","bm-Latn":"bm","bm-Latn-ML":"bm","bn-BD":"bn","bo-CN":"bo","br-FR":"br","brx-IN":"brx","bs-Cyrl-BA":"bs-Cyrl","bs-Latn-BA":"bs-Latn",byn:"en","byn-ER":"en","ca-ES":"ca","ca-ES-valencia":"ca-ES-VALENCIA","ce-RU":"ce","cgg-UG":"cgg","chr-Cher":"chr","chr-Cher-US":"chr",co:"en","co-FR":"fr","cs-CZ":"cs","cu-RU":"cu","cy-GB":"cy","da-DK":"da","dav-KE":"dav","de-DE":"de","dje-NE":"dje","dsb-DE":"dsb","dua-CM":"dua",dv:"en","dv-MV":"en","dyo-SN":"dyo","dz-BT":"dz","ebu-KE":"ebu","ee-GH":"ee","el-GR":"el","en-029":"en","en-ID":"en","en-US":"en","eo-001":"en","es-ES":"es","et-EE":"et","eu-ES":"eu","ewo-CM":"ewo","fa-IR":"fa","ff-Latn-SN":"ff-Latn","ff-NG":"ff","fi-FI":"fi","fil-PH":"fil","fo-FO":"fo","fr-029":"fr","fr-FR":"fr","fur-IT":"fur","fy-NL":"fy","ga-IE":"ga","gd-GB":"gd","gl-ES":"gl",gn:"en","gn-PY":"en","gsw-CH":"gsw","gu-IN":"gu","guz-KE":"guz","gv-IM":"gv","ha-Latn":"ha","ha-Latn-GH":"ha-GH","ha-Latn-NE":"ha-NE","ha-Latn-NG":"ha","haw-US":"haw","he-IL":"he","hi-IN":"hi","hr-HR":"hr","hsb-DE":"hsb","hu-HU":"hu","hy-AM":"hy","ia-001":"ia","ia-FR":"ia",ibb:"en","ibb-NG":"en","id-ID":"id","ig-NG":"ig","ii-CN":"ii","is-IS":"is","it-IT":"it",iu:"en","iu-Cans":"en","iu-Cans-CA":"en","iu-Latn":"en","iu-Latn-CA":"en","ja-JP":"ja","jgo-CM":"jgo","jmc-TZ":"jmc","jv-Java":"jv","jv-Java-ID":"jv","jv-Latn":"jv","jv-Latn-ID":"jv","ka-GE":"ka","kab-DZ":"kab","kam-KE":"kam","kde-TZ":"kde","kea-CV":"kea","khq-ML":"khq","ki-KE":"ki","kk-KZ":"kk","kkj-CM":"kkj","kl-GL":"kl","kln-KE":"kln","km-KH":"km","kn-IN":"kn","ko-KR":"ko","kok-IN":"kok",kr:"en","kr-NG":"en","ks-Arab":"ks","ks-Arab-IN":"ks","ks-Deva":"ks","ks-Deva-IN":"ks","ksb-TZ":"ksb","ksf-CM":"ksf","ksh-DE":"ksh","ku-Arab":"ku","ku-Arab-IQ":"ku","ku-Arab-IR":"ku","kw-GB":"kw","ky-KG":"ky",la:"en","la-001":"en","lag-TZ":"lag","lb-LU":"lb","lg-UG":"lg","lkt-US":"lkt","ln-CD":"ln","lo-LA":"lo","lrc-IR":"lrc","lt-LT":"lt","lu-CD":"lu","luo-KE":"luo","luy-KE":"luy","lv-LV":"lv","mas-KE":"mas","mer-KE":"mer","mfe-MU":"mfe","mg-MG":"mg","mgh-MZ":"mgh","mgo-CM":"mgo","mi-NZ":"mi","mk-MK":"mk","ml-IN":"ml","mn-Cyrl":"mn","mn-MN":"mn","mn-Mong":"mn","mn-Mong-CN":"mn","mn-Mong-MN":"mn",mni:"en","mni-IN":"en",moh:"en","moh-CA":"en","mr-IN":"mr","ms-MY":"ms","mt-MT":"mt","mua-CM":"mua","my-MM":"my","mzn-IR":"mzn","naq-NA":"naq","nb-NO":"nb","nd-ZW":"nd","ne-NP":"ne","nl-NL":"nl","nmg-CM":"ngm","nn-NO":"nn","nnh-CM":"nnh",no:"en",nqo:"en","nqo-GN":"en",nr:"en","nr-ZA":"en",nso:"en","nso-ZA":"en","nus-SS":"nus","nyn-UG":"nyn",oc:"en","oc-FR":"fr","om-ET":"om","or-IN":"or","os-GE":"os","pa-Arab-PK":"pa-Arab","pa-IN":"pa",pap:"en","pap-029":"en","pl-PL":"pl","prg-001":"prg",prs:"en","prs-AF":"en","ps-AF":"ps","pt-BR":"pt",quc:"en","quc-Latn":"en","quc-Latn-GT":"en",quz:"en","quz-BO":"en","quz-EC":"en","quz-PE":"en","rm-CH":"rm","rn-BI":"rn","ro-RO":"ro","rof-TZ":"rof","ru-RU":"ru","rw-RW":"rw","rwk-TZ":"rwk",sa:"en","sa-IN":"en","sah-RU":"sah","saq-KE":"saq","sbp-TZ":"en","sd-Arab":"sd","sd-Arab-PK":"sd","sd-Deva":"sd","sd-Deva-IN":"sd","se-NO":"se","seh-MZ":"seh","ses-ML":"ses","sg-CF":"sg","shi-Latn-MA":"shi-Latn","shi-Tfng-MA":"shi-Tfng","si-LK":"si","sk-SK":"sk","sl-SI":"sl",sma:"en","sma-NO":"en","sma-SE":"en",smj:"en","smj-NO":"en","smj-SE":"en","smn-FI":"en",sms:"en","sms-FI":"en","sn-Latn":"sn","sn-Latn-ZW":"sn","so-SO":"so","sq-AL":"so","sr-Cyrl-RS":"sr-Cryl","sr-Latn-RS":"sr-Latn",ss:"en","ss-SZ":"en","ss-ZA":"en",ssy:"en","ssy-ER":"en",st:"en","st-LS":"en","st-ZA":"en","sv-SE":"sv","sw-TZ":"sw",syr:"en","syr-SY":"en","ta-IN":"ta","te-IN":"te","teo-UG":"teo","tg-Cyrl":"tg","tg-Cyrl-TJ":"tg","th-TH":"th","ti-ET":"ti",tig:"en","tig-ER":"en","tk-TM":"tk",tn:"en","tn-BW":"en","tn-ZA":"en","to-TO":"to","tr-TR":"tr",ts:"en","ts-ZA":"en","tt-RU":"tt","twq-NE":"twq","tzm-Arab":"tzm","tzm-Arab-MA":"tzm","tzm-Latn":"tzm","tzm-Latn-DZ":"tzm","tzm-Latn-MA":"tzm","tzm-Tfng":"tzm","tzm-Tfng-MA":"tzm","ug-CN":"ug","uk-UA":"uk","ur-PK":"ur","uz-Arab-AF":"uz-Arab","uz-Cyrl-UZ":"uz-Cyrl","uz-Latn-UZ":"uz-Latn","vai-Latn-LR":"vai-Latn","vai-Vaii-LR":"vai-Vaii",ve:"en","ve-ZA":"en","vi-VN":"vi","vo-001":"vo","vun-TZ":"vun","wae-CH":"wae",wal:"en","wal-ET":"en","wo-SN":"wo","xh-ZA":"xh","xog-UG":"xog","yav-CM":"yav","yi-001":"yi","yo-NG":"yo","zgh-Tfng":"zgh","zgh-Tfng-MA":"zgh","zh-CN":"zh","zh-HK":"zh","zh-MO":"zh","zh-SG":"zh","zh-TW":"zh","zu-ZA":"zu"};var jt=(()=>{class t{constructor(e,n){this.routes=e,this.router=n,this.addRoutes()}addRoutes(){this.router?.config?.forEach(({path:e="",data:n})=>{let i=n?.routes;if(i)if(Array.isArray(i))this.routes.add(i);else{let o=nt([u({path:e},i)],{path:""});this.routes.add(o)}})}}return t.\u0275fac=function(e){return new(e||t)(l(Ft),l(re,8))},t.\u0275prov=h({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function nt(t,r){return t?t.reduce((e,n)=>{let s=v(u({},n),{parentName:r.name,path:(r.path+"/"+n.path).replace(/\/\//g,"/")}),{children:i}=s,o=G(s,["children"]);return e.push(o,...nt(i,o)),e},[]):[]}var kt=(()=>{class t{constructor(e){this.localization=e}transform(e="",...n){let i=n.reduce((o,s)=>o?s?Array.isArray(s)?[...o,...s]:[...o,s]:o:s,[])||[];return this.localization.instant(e,...i)}}return t.\u0275fac=function(e){return new(e||t)(De(k,16))},t.\u0275pipe=we({name:"abpLocalization",type:t,pure:!0}),t.\u0275prov=h({token:t,factory:t.\u0275fac}),t})(),V=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=O({type:t}),t.\u0275inj=M({}),t})();var yr=new g("INJECTOR_PIPE_DATA_TOKEN");function Pt(t){return()=>{let r=t.get(x),e=t.get(Le),n=t.get(At);r.getLanguage$().subscribe(i=>{let o=encodeURIComponent(`c=${i}|uic=${i}`);e.cookie=`${n}=${o}`})}}var zt={provide:D,useFactory:Pt,deps:[I],multi:!0},ve=class extends String{constructor(r){super(),this.localizationService=r}toString(){let{currentLang:r}=this.localizationService;return vt(qe,r)?qe[r]:r}valueOf(){return this.toString()}},$t={provide:Ne,useClass:ve,deps:[k]};Date.prototype.toLocalISOString=function(){let t=this.getTimezoneOffset();return new Date(this.getTime()-t*6e4).toISOString()};function xt(t,r){let e=t.get($),{remoteEnv:n}=r,{headers:i={},method:o="GET",url:s}=n||{};if(!s)return Promise.resolve();let a=t.get(F),c=t.get(Je);return a.request(o,s,{headers:i}).pipe(B(p=>(c.reportError(p),E(null))),R(p=>e.setState(Gt(r,p||{},n)))).toPromise()}function Gt(t,r,e){switch(e.mergeStrategy){case"deepmerge":return We(t,r);case"overwrite":case null:case void 0:return r;default:return e.mergeStrategy(t,r)}}var Ut=(()=>{class t{constructor(e){this.restService=e,this.apiName="abp",this.findTenantById=n=>this.restService.request({method:"GET",url:`/api/abp/multi-tenancy/tenants/by-id/${n}`},{apiName:this.apiName}),this.findTenantByName=n=>this.restService.request({method:"GET",url:`/api/abp/multi-tenancy/tenants/by-name/${n}`},{apiName:this.apiName})}}return t.\u0275fac=function(e){return new(e||t)(l(_))},t.\u0275prov=h({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Bt=(()=>{class t{constructor(e,n,i,o,s){this.restService=e,this.sessionState=n,this.tenantService=i,this.configStateService=o,this.tenantKey=s,this.domainTenant=null,this.isTenantBoxVisible=!0,this.apiName="abp",this.setTenantToState=a=>(this.sessionState.setTenant({id:a.tenantId,name:a.name,isAvailable:!0}),this.configStateService.refreshAppState().pipe(d(c=>a)))}setTenantByName(e){return this.tenantService.findTenantByName(e).pipe(C(this.setTenantToState))}setTenantById(e){return this.tenantService.findTenantById(e).pipe(C(this.setTenantToState))}}return t.\u0275fac=function(e){return new(e||t)(l(_),l(x),l(Ut),l(L),l(et))},t.\u0275prov=h({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),be="{0}";function Ht(t){t.charAt(t.length-1)!=="/"&&(t+="/");let r=pt(t),e=be.replace(/[}{]/g,"");return r(window.location.href)[e]?.[0]}function qt(t){return new URLSearchParams(window.location.search).get(t)}function Vt(t){return Z(this,null,function*(){let r=t.get($),e=t.get(Bt),n=r.getEnvironment()?.application?.baseUrl||"",i=Ht(n),o=()=>{e.isTenantBoxVisible=!1},s=c=>{e.domainTenant={id:c.tenantId,name:c.name,isAvailable:!0}},a=c=>{o(),s(c)};if(i)return Ve(t,i),e.setTenantByName(i).pipe(R(a)).toPromise();{Ve(t,"",be+".");let c=qt(e.tenantKey);if(c)return e.setTenantById(c).toPromise()}return Promise.resolve()})}function Ve(t,r,e=be){let n=t.get($),i=Pe(n.getEnvironment());return i.application.baseUrl&&(i.application.baseUrl=i.application.baseUrl.replace(e,r)),i.oAuthConfig?.redirectUri&&(i.oAuthConfig.redirectUri=i.oAuthConfig.redirectUri.replace(e,r)),i.oAuthConfig||(i.oAuthConfig={}),i.oAuthConfig.issuer=(i.oAuthConfig.issuer||"").replace(e,r),Object.keys(i.apis).forEach(o=>{Object.keys(i.apis[o]).forEach(s=>{i.apis[o][s]=(i.apis[o][s]||"").replace(e,r)})}),n.setState(i)}function Kt(t){return()=>Z(this,null,function*(){let e=t.get($),n=t.get(L),i=t.get(z);e.setState(i.environment),yield xt(t,i.environment),yield Vt(t);let o=t.get(ut,void 0,{optional:!0}),s=t.get(wt,pe,{optional:!0});if(o&&(yield o.init()),i.skipGetAppConfiguration)return;let a=n.refreshAppState().pipe(R(()=>s(t)),R(()=>{let c=n.getOne("currentTenant");t.get(x).setTenant(c)}),B(c=>{let p=t.get(Rt,null);return p&&p.length&&p.forEach(f=>f(c)),U(c)}));yield Ce(a)})}function Zt(t){return()=>{let e=t.get(x),{registerLocaleFn:n}=t.get(z),i=e.getLanguage()||"en";return new Promise((o,s)=>{n(i).then(a=>(a?.default&&X(a.default),o("resolved")),s)})}}function Wt(t){return t==Number(t)}function br(t){let r=[];for(let e in t)Wt(e)||r.push({key:e,value:t[e]});return r}function Yt(t){let{pathname:r}=new URL(t,window.location.origin);return r}var ye=class{constructor(){this.queue=[],this.isRunning=!1,this.stack=0,this.interval=0,this.stackSize=100}init(r,e){this.interval=r,this.stackSize=e}add(r){this.queue.push(r),this.run()}run(){if(this.isRunning)return;this.stack++,this.isRunning=!0;let r=this.queue.shift();if(!r){this.isRunning=!1;return}r(),this.stack>this.stackSize?setTimeout(()=>{this.isRunning=!1,this.run(),this.stack=0},this.interval):(this.isRunning=!1,this.run())}};var Jt=(()=>{class t{constructor(e){this.store=new N({requests:[],filteredRequests:[]}),this.destroy$=new T,this.delay=e.get(Tt,500)}getLoading(){return!!this.applyFilter(this.store.state.requests).length}getLoading$(){return this.store.sliceState(({requests:e})=>e).pipe(d(e=>!!this.applyFilter(e).length),C(e=>e?this.delay===0?E(!0):Ie(this.delay).pipe(Re(!0),Ee(this.destroy$)):E(!1)),R(()=>this.destroy$.next()))}updateLoading$(){return this.store.sliceUpdate(({requests:e})=>!!this.applyFilter(e).length)}clearLoading(){this.store.patch({requests:[]})}addRequest(e){this.store.patch({requests:[...this.store.state.requests,e]})}deleteRequest(e){let n=this.store.state.requests.filter(i=>i!==e);this.store.patch({requests:n})}addFilter(e){let n=Array.isArray(e)?e:[e],i=[...this.store.state.filteredRequests.filter(o=>!n.some(s=>this.isSameRequest(o,s))),...n];this.store.patch({filteredRequests:i})}removeFilter(e){let n=Array.isArray(e)?e:[e],i=this.store.state.filteredRequests.filter(o=>!n.some(s=>this.isSameRequest(o,s)));this.store.patch({filteredRequests:i})}applyFilter(e){if(!e)return[];let{filteredRequests:n}=this.store.state;return e.filter(({method:i,url:o})=>!n.find(s=>this.isSameRequest(s,{method:i,endpoint:Yt(o)})))}isSameRequest(e,n){let{method:i,endpoint:o}=e;return o===n.endpoint&&i===n.method}}return t.\u0275fac=function(e){return new(e||t)(l(I))},t.\u0275prov=h({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Qt={provide:Qe,useValue:!1},K=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=O({type:t}),t.\u0275inj=M({providers:[kt],imports:[ee,ne,oe,se,ie,V,ee,ne,oe,se,ie,V]}),t})(),Ke=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=O({type:t}),t.\u0275inj=M({imports:[K,V,je.withOptions({cookieName:"XSRF-TOKEN",headerName:"RequestVerificationToken"}),K,V]}),t})(),Sr=(()=>{class t{static forRoot(e={}){return{ngModule:Ke,providers:[$t,zt,{provide:"CORE_OPTIONS",useValue:e},{provide:z,useFactory:lt,deps:["CORE_OPTIONS"]},{provide:D,multi:!0,deps:[I],useFactory:Kt},{provide:D,multi:!0,deps:[I],useFactory:Zt},{provide:D,multi:!0,deps:[k],useFactory:pe},{provide:D,multi:!0,deps:[jt],useFactory:pe},{provide:et,useValue:e.tenantKey||"__tenant"},{provide:ze,multi:!0,useValue:$e(e.localizations),deps:[k]},{provide:Et,useClass:ye},{provide:tt,useValue:e.othersGroup||"AbpUi::OthersGroup"},Qt]}}static forChild(e={}){return{ngModule:Ke,providers:[{provide:ze,multi:!0,useValue:$e(e.localizations),deps:[k]}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=O({type:t}),t.\u0275inj=M({imports:[K,K]}),t})();var Cr=(()=>{class t{constructor(e){this.httpWaitService=e}getAdditionalHeaders(e){return e||new Me}intercept(e,n){return this.httpWaitService.addRequest(e),n.handle(e).pipe(Te(()=>this.httpWaitService.deleteRequest(e)))}}return t.\u0275fac=function(e){return new(e||t)(l(Jt))},t.\u0275prov=h({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Rr=(()=>{let r=class r{constructor(n){this.restService=n,this.apiName="Default",this.getDashboadDataForDoctor=(i,o)=>this.restService.request({method:"GET",url:"/api/app/dashboard/dashboad-data-for-doctor",params:{doctorid:i}},u({apiName:this.apiName},o)),this.getDashboadDataForPatient=(i,o,s)=>this.restService.request({method:"GET",url:`/api/app/dashboard/dashboad-data-for-patient/${i}`,params:{role:o}},u({apiName:this.apiName},s)),this.getDashboardAppointmentListForDoctor=(i,o,s)=>this.restService.request({method:"GET",url:`/api/app/dashboard/dashboard-appointment-list-for-doctor/${i}`,params:{day:o}},u({apiName:this.apiName},s)),this.getDashboardAppointmentListForPatient=(i,o,s,a)=>this.restService.request({method:"GET",url:`/api/app/dashboard/dashboard-appointment-list-for-patient/${i}`,params:{role:o,day:s}},u({apiName:this.apiName},a))}};r.\u0275fac=function(i){return new(i||r)(l(_))},r.\u0275prov=h({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();export{hr as a,ut as b,z as c,ft as d,pe as e,$ as f,Je as g,_ as h,L as i,St as j,x as k,gr as l,et as m,mr as n,wt as o,qe as p,br as q,Jt as r,Sr as s,Cr as t,Rr as u};
