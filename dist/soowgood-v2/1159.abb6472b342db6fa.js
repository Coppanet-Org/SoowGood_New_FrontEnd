"use strict";(self.webpackChunksoowgood_v2=self.webpackChunksoowgood_v2||[]).push([[1159],{1159:(y,h,r)=>{r.r(h),r.d(h,{AgentLoginModule:()=>Q});var g=r(6814),a=r(6223),d=r(6306),u=r(4664),f=r(8504),T=r(1329),e=r(9212),l=r(9802),b=r(9245),A=r(2598),P=r(9460),U=r(5802),x=r(9483),_=r(8184),Z=r(2032),S=r(9157);function F(t,c){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Password is required. "),e.qZA())}function C(t,c){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Password must start with an uppercase letter. "),e.qZA())}function E(t,c){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Password must be at least 6 characters long. "),e.qZA())}function q(t,c){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Password must include a special character. "),e.qZA())}function I(t,c){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Password must include a number. "),e.qZA())}function J(t,c){if(1&t&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&t){const i=e.oxw();let m;e.xp6(),e.hij(" ",null==(m=i.loginForm.get("password"))?null:m.getError("customError")," ")}}function O(t,c){if(1&t&&(e.TgZ(0,"div",29),e._UZ(1,"i",30),e._uU(2),e.qZA()),2&t){const i=e.oxw();e.xp6(2),e.hij(" ",i.errorMessage," ")}}function B(t,c){1&t&&(e.TgZ(0,"div",31)(1,"span"),e._uU(2,"Login"),e.qZA(),e._UZ(3,"i",32),e.qZA())}function Y(t,c){1&t&&e._UZ(0,"span",33)}const D=t=>({"border-red-500":t}),M=[{path:"",component:(()=>{class t{constructor(i,m,o,p,n,s,v,w){this.ToasterService=i,this.UserAuthService=m,this.appAuthService=o,this.oAuthService=p,this.AgentProfileService=n,this.NormalAuth=s,this._router=v,this.fb=w,this.formSubmitted=!1,this.defaultAuth={mobileNo:"",password:""},this.subs=new T.Y,this.passwordFieldType="password",this.confirmPasswordFieldType="password"}ngOnInit(){this.loadForm()}goToForgotPassword(){this._router.navigate(["/forgot-password"],{queryParams:{redirect:"agent/login"}})}loadForm(){this.loginForm=this.fb.group({mobileNo:[this.defaultAuth.mobileNo,a.kI.required],password:[this.defaultAuth.password,a.kI.compose([a.kI.required])]})}onSubmit(){if(this.formSubmitted=!0,this.loginForm.invalid)return void this.ToasterService.customToast("Please filled all required field","warning");let i;this.isLoading=!0;const m=this.loginForm.value.mobileNo,o=this.loginForm.value.password;this.oAuthService.oidc=!1;let p={userName:this.loginForm.value.mobileNo,email:"",password:this.loginForm.value.password,rememberMe:!1};try{this.appAuthService.isLoadingSubject.next(!0),this.oAuthService.fetchTokenUsingPasswordFlowAndLoadUserProfile(m,o).then(n=>{this.formSubmitted=!1,n&&("Doctor"!==n?.info?.role||"Patient"!==n?.info?.role)&&this.UserAuthService.loginByUserDto(p).pipe((0,d.K)(s=>this.handleLoginError(s)),(0,u.w)(s=>(i=s,s.success?this.AgentProfileService.getByUserName(s.userName||""):(this.hasError=!0,this.ToasterService.customToast(s.message||" ","error"),(0,f._)(s.message||"Login failed")))),(0,d.K)(s=>this.handleProfileError(s))).subscribe(s=>{console.log(s);const v={fullName:s.fullName,userId:s.userId,id:s.id,userType:i.roleName.toString().toLowerCase()};this.NormalAuth.setAuthInfoInLocalStorage(v);const w=s.isActive?i.roleName.toString().toLowerCase():(i.roleName.toString()+"/profile-settings").toLowerCase();this._router.navigate([w],{state:{data:s}}).then(()=>this.ToasterService.customToast(i.message||" ","success"))}),("Doctor"===n?.info?.role||"Patient"===n?.info?.role)&&(this.errorMessage=`You ara a ${n?.info?.role}. Please login from ${n?.info?.role} portal.`)}).catch(n=>{this.isLoading=!1,this.errorMessage=n.error?.error_description})}catch(n){console.log(n),this.hasError=!0,"'tokenEndpoint' should not be null"===n.message&&this.ToasterService.customToast(n.message||" ","success")}}handleLoginError(i){this.isLoading=!1}handleProfileError(i){this.isLoading=!1}passwordVisibility(i){"password"===i?this.passwordFieldType="password"===this.passwordFieldType?"text":"password":"confirmPassword"===i&&(this.confirmPasswordFieldType="password"===this.confirmPasswordFieldType?"text":"password")}ngOnDestroy(){this.subs.unsubscribe()}static#e=this.\u0275fac=function(m){return new(m||t)(e.Y36(l.G),e.Y36(b.V),e.Y36(A.K),e.Y36(P.Ct),e.Y36(U.j),e.Y36(x.e),e.Y36(_.F0),e.Y36(a.qu))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-agent-login"]],decls:50,vars:17,consts:[[1,"signup-form"],[1,"signup-form__left"],["width","300","height","300","ngSrc","/assets/agent/agent-portal.jpg","alt","auth",1,"w-full","h-full","object-cover"],[1,"signup-form__right","drop-shadow-soft","relative"],[1,"max-w-lg","min-w-[500px]","mx-auto","mt-10","bg-white","p-8","rounded-xl","shadow","shadow-slate-300"],[1,"text-4xl","font-bold","font-Roboto"],[1,"text-slate-500","mt-2"],["href","/"],["action","",1,"mt-6",3,"formGroup","submit"],[1,"flex","flex-col","space-y-5","mt-10"],["for","mobile"],[1,"font-medium","text-slate-700","pb-2"],[1,"form_input","flex","h-[40px]",3,"ngClass"],["matPrefix","",1,"h-fit","font-Roboto"],["matInput","","maxlength","11","type","tel","formControlName","mobileNo","id","mobileNo","placeholder","018-000-00000","required","","inputmode","numeric",1,"w-full","border-none","outline-none","font-Roboto","h-fit"],["for","Password"],[1,"form_input","flex","justify-between"],["formControlName","password","name","password","id","password","placeholder","Password123@*",1,"w-full","outline-none",3,"type"],[1,"cursor-pointer",3,"click"],[1,"flex","flex-col"],[4,"ngIf"],["class","p-4 mb-4 text-sm text-yellow-800 rounded-lg bg-yellow-50 font-semibold font-Roboto","role","alert",4,"ngIf"],["type","submit",1,"form_btn","disabled:bg-gray-500","disabled:select-none",3,"disabled"],["class","flex items-center",4,"ngIf"],["class","loading loading-dots loading-md",4,"ngIf"],[1,"text-center"],["routerLink","/agent/signup",1,"text-primary","font-medium","inline-flex","space-x-1","items-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor","stroke-width","2",1,"h-4","w-4"],["stroke-linecap","round","stroke-linejoin","round","d","M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"],["role","alert",1,"p-4","mb-4","text-sm","text-yellow-800","rounded-lg","bg-yellow-50","font-semibold","font-Roboto"],[1,"fa-solid","fa-circle-exclamation","mr-2"],[1,"flex","items-center"],[1,"fa-solid","ml-2","fa-right-to-bracket"],[1,"loading","loading-dots","loading-md"]],template:function(m,o){if(1&m&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"img",2),e.qZA(),e.TgZ(3,"div",3)(4,"div",4)(5,"h1",5),e._uU(6,"Agent Login"),e.qZA(),e.TgZ(7,"p",6),e._uU(8,"Hi, Welcome to SoowGood \u{1f44b}"),e.qZA(),e.TgZ(9,"a",7),e._uU(10,"Back to home"),e.qZA(),e.TgZ(11,"form",8),e.NdJ("submit",function(){return o.onSubmit()}),e.TgZ(12,"div",9)(13,"label",10)(14,"p",11),e._uU(15,"Mobile Number"),e.qZA(),e.TgZ(16,"div",12)(17,"span",13),e._uU(18,"+88 \xa0"),e.qZA(),e._UZ(19,"input",14),e.qZA()(),e.TgZ(20,"label",15)(21,"p",11),e._uU(22,"Password"),e.qZA(),e.TgZ(23,"div",16),e._UZ(24,"input",17),e.TgZ(25,"span",18),e.NdJ("click",function(){return o.passwordVisibility("password")}),e._UZ(26,"i"),e.qZA()(),e.TgZ(27,"div",19),e.YNc(28,F,2,0,"mat-error",20)(29,C,2,0,"mat-error",20)(30,E,2,0,"mat-error",20)(31,q,2,0,"mat-error",20)(32,I,2,0,"mat-error",20)(33,J,2,1,"mat-error",20),e.qZA()(),e.YNc(34,O,3,1,"div",21),e.TgZ(35,"p"),e._uU(36," Forgot your password?"),e.TgZ(37,"strong",18),e.NdJ("click",function(){return o.goToForgotPassword()}),e._uU(38," Reset now"),e.qZA()(),e.TgZ(39,"button",22),e.YNc(40,B,4,0,"div",23)(41,Y,1,0,"span",24),e.qZA(),e.TgZ(42,"p",25),e._uU(43," Don't have an account? "),e.TgZ(44,"a",26)(45,"span"),e._uU(46,"Sign up "),e.qZA(),e.TgZ(47,"span"),e.O4$(),e.TgZ(48,"svg",27),e._UZ(49,"path",28),e.qZA()()()()()()()()()),2&m){let p,n,s,v,w,N,L;e.xp6(11),e.Q6J("formGroup",o.loginForm),e.xp6(5),e.Q6J("ngClass",e.VKq(15,D,(null==(p=o.loginForm.get("mobileNo"))?null:p.invalid)&&(null==(p=o.loginForm.get("mobileNo"))?null:p.touched))),e.xp6(8),e.Q6J("type",o.passwordFieldType),e.xp6(2),e.Tol("password"===o.passwordFieldType?"fa fa-eye-slash":"fa fa-eye"),e.xp6(2),e.Q6J("ngIf",o.formSubmitted&&(null==(n=o.loginForm.get("password"))?null:n.hasError("required"))),e.xp6(),e.Q6J("ngIf",o.formSubmitted&&(null==(s=o.loginForm.get("password"))?null:s.hasError("startsWithUppercase"))),e.xp6(),e.Q6J("ngIf",o.formSubmitted&&(null==(v=o.loginForm.get("password"))?null:v.hasError("isAtLeast6Characters"))),e.xp6(),e.Q6J("ngIf",o.formSubmitted&&(null==(w=o.loginForm.get("password"))?null:w.hasError("includesSpecialCharacter"))),e.xp6(),e.Q6J("ngIf",o.formSubmitted&&(null==(N=o.loginForm.get("password"))?null:N.hasError("includesNumber"))),e.xp6(),e.Q6J("ngIf",null==(L=o.loginForm.get("password"))?null:L.hasError("customError")),e.xp6(),e.Q6J("ngIf",o.errorMessage),e.xp6(5),e.Q6J("disabled",o.isLoading||!o.loginForm.dirty||o.loginForm.invalid),e.xp6(),e.Q6J("ngIf",!o.isLoading),e.xp6(),e.Q6J("ngIf",o.isLoading)}},dependencies:[g.mk,g.O5,_.rH,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.nD,a.sg,a.u,Z.Nt,S.TO,S.qo,g.Zd]})}return t})()}];let Q=(()=>{class t{static#e=this.\u0275fac=function(m){return new(m||t)};static#t=this.\u0275mod=e.oAB({type:t});static#o=this.\u0275inj=e.cJS({imports:[g.ez,_.Bz.forChild(M),a.u5,a.UX,Z.c]})}return t})()},9245:(y,h,r)=>{r.d(h,{V:()=>d});var g=r(9212),a=r(8175);let d=(()=>{class u{constructor(T){this.restService=T,this.apiName="Default",this.decodeJwtByJwt=(e,l)=>this.restService.request({method:"POST",url:"/api/app/user-accounts/decode-jwt",body:e},{apiName:this.apiName,...l}),this.isUserExistsByUserName=(e,l)=>this.restService.request({method:"POST",url:"/api/app/user-accounts/is-user-exists",params:{userName:e}},{apiName:this.apiName,...l}),this.loginByUserDto=(e,l)=>this.restService.request({method:"POST",url:"/api/app/user-accounts/login",body:e},{apiName:this.apiName,...l}),this.refreshAccessTokenByUser=(e,l)=>this.restService.request({method:"POST",url:"/api/app/user-accounts/refresh-access-token",body:e},{apiName:this.apiName,...l}),this.resetPasswordByInputDto=(e,l)=>this.restService.request({method:"POST",url:"/api/app/user-accounts/reset-password",body:e},{apiName:this.apiName,...l}),this.resetPassword_AppByInputDto=(e,l)=>this.restService.request({method:"POST",url:"/api/app/user-accounts/reset-password_App",body:e},{apiName:this.apiName,...l}),this.signupUserByUserDtoAndPasswordAndRole=(e,l,b,A)=>this.restService.request({method:"POST",url:"/api/app/user-accounts/signup-user",params:{password:l,role:b},body:e},{apiName:this.apiName,...A}),this.userDataRemove=(e,l,b)=>this.restService.request({method:"POST",url:"/api/app/user-accounts/user-data-remove",params:{role:l},body:e},{apiName:this.apiName,...b})}static#e=this.\u0275fac=function(e){return new(e||u)(g.LFG(a.vgb))};static#t=this.\u0275prov=g.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"})}return u})()},1329:(y,h,r)=>{r.d(h,{Y:()=>a});var a=function(){function d(){this._subs=[]}return d.prototype.add=function(){for(var u=[],f=0;f<arguments.length;f++)u[f]=arguments[f];this._subs=this._subs.concat(u)},Object.defineProperty(d.prototype,"sink",{set:function(u){this._subs.push(u)},enumerable:!0,configurable:!0}),d.prototype.unsubscribe=function(){this._subs.forEach(function(u){return u&&function(d){return"function"==typeof d}(u.unsubscribe)&&u.unsubscribe()}),this._subs=[]},d}()}}]);