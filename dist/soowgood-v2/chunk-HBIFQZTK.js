import{a as x}from"./chunk-BC4RU75W.js";import{a as le,b as de}from"./chunk-OJYXUISO.js";import{c as fe,d as ge,g as we}from"./chunk-XCW56EU2.js";import{c as he}from"./chunk-EQCB2C7E.js";import{b as be,c as ve,h as _e,j as ye,k as xe}from"./chunk-Y7H6PHVG.js";import"./chunk-YTSUX7O2.js";import"./chunk-4DRUEFLH.js";import{A as ce,r as pe,z as ue}from"./chunk-GEVSPATW.js";import{a as me}from"./chunk-7LPMGZKA.js";import{B as ne,D as se,F as ae,b as J,c as Q,e as _,h as X,i as Z,n as ee,r as te,u as re,y as oe,z as ie}from"./chunk-N3UDIXRD.js";import{Ab as D,Bb as G,Ha as g,Ma as l,Qa as C,S as L,Ub as B,Wb as U,X as R,Xa as t,Y as V,Ya as r,Za as p,aa as j,ba as q,bb as A,cc as Y,fb as f,fc as z,hb as S,sb as O,sc as H,tb as i,uc as W,vb as v,vc as K,xc as $,ya as n,za as h}from"./chunk-TXQBTV46.js";import"./chunk-5G567QLT.js";function Se(o,a){o&1&&(t(0,"p",56),i(1," You must enter a valid mobile number. "),r())}function Ce(o,a){o&1&&(t(0,"p",56),i(1," Please include a valid mobile number so we can get back to you. "),r())}function Te(o,a){if(o&1&&(t(0,"div",57),p(1,"i",58),i(2),r()),o&2){let y=S();n(2),v(" ",y.errorMessage," ")}}function Ie(o,a){if(o&1&&(t(0,"div",59),p(1,"i",58),i(2),r()),o&2){let y=S();n(2),v(" ",y.errorMessage," ")}}function Ee(o,a){o&1&&(t(0,"p",56),i(1," Password is required. "),r())}function ke(o,a){o&1&&(t(0,"p",56),i(1," Password must start with an uppercase letter. "),r())}function Me(o,a){o&1&&(t(0,"p",56),i(1," Password must be at least 6 characters long. "),r())}function Ne(o,a){o&1&&(t(0,"p",56),i(1," Password must include a special character. "),r())}function Le(o,a){o&1&&(t(0,"p",56),i(1," Password must include a number. "),r())}function Re(o,a){o&1&&(t(0,"mat-hint",60),i(1,"hint: Password@123"),r())}function Ve(o,a){o&1&&(t(0,"p",56),i(1," Confirm password is required. "),r())}function je(o,a){o&1&&(t(0,"p",56),i(1," Password not matched. "),r())}function qe(o,a){o&1&&(t(0,"p",56),i(1," Accept Terms and Conditions! "),r())}function Ae(o,a){if(o&1&&(t(0,"div",59),p(1,"i",58),i(2),r()),o&2){let y=S();n(2),v(" ",y.errorMessage," ")}}var Oe=o=>({"border-red-500":o}),De=()=>({length:4,allowNumbersOnly:!0}),Pe=(()=>{let a=class a{constructor(s,u,e,d,m,c,P){this.UserAccountsService=s,this.TosterService=u,this.fb=e,this.otpService=d,this.authService=m,this.router=c,this.activeRoute=P,this.resetFormSubmitted=!1,this.resetLoading=!1,this.resetPasswordFieldType="password",this.resetConfPasswordFieldType="password",this.isEditable=!1,this.isLoading=!1,this.activeTab=0,this.otpMessage="",this.errorMessage="",this.otpLoading=!1}ngOnInit(){this.authService.authInfo()&&(this.TosterService.customToast("Your are already login your account","warning"),this.router.navigate(["/"])),this.loadForm(),this.activeRoute.queryParamMap.subscribe(s=>{this.redirectTo=s.get("redirect")})}loadForm(){this.resetPasswordForm=this.fb.group({username:["",[_.required,_.pattern(/^(?:88)?[0-9]{11}$/)]],newPassword:["",[_.required,x.isAtLeast6Characters,x.includesSpecialCharacter,x.includesNumber]],accept:["",_.required],confirmPassword:["",_.required]},{validator:x.matchValidator})}resetPassword(){if(this.errorMessage="",this.resetFormSubmitted=!0,!this.resetPasswordForm.get("username")?.invalid){this.resetLoading=!0;try{this.otpService.applyOtpForPasswordResetByClientKeyAndRoleAndMobileNo("SoowGood_App",this.redirectTo?.includes("agent")?"agent":"",this.resetPasswordForm.get("username")?.value).subscribe({next:s=>{if(s)this.resetLoading=!1,this.next(1),this.resetFormSubmitted=!1;else{this.errorMessage="User not found!",this.resetLoading=!1,this.resetFormSubmitted=!1;return}},error:s=>{this.TosterService.customToast(String(s.message),"error"),this.resetFormSubmitted=!1}})}catch(s){this.TosterService.customToast(String(s),"error"),this.resetFormSubmitted=!1}}}back(s){this.activeTab=s}next(s){this.activeTab=s}onIndexChange(s){this.activeTab=s._selectedIndex}verify(){this.errorMessage="",this.otpLoading=!0;let s=this.otp;s&&this.otpService.varifyOtp(Number(s)).subscribe(u=>{u?(this.otpLoading=!1,this.next(2)):this.errorMessage="Invalid OTP. Please check again!"})}onOtpChange(s){s.length==4?(this.otp=s,this.verify()):console.log("Pin should be 4 character")}resetPasswordVisibility(s){s==="newPassword"?this.resetPasswordFieldType=this.resetPasswordFieldType==="password"?"text":"password":s==="confirmPassword"&&(this.resetConfPasswordFieldType=this.resetConfPasswordFieldType==="password"?"text":"password")}confirmPassword(){this.resetFormSubmitted=!0,this.errorMessage="";let s=this.resetPasswordForm.get("accept")?.value,u=this.resetPasswordForm.get("confirmPassword")?.value,e={userId:this.resetPasswordForm.get("username")?.value,newPassword:this.resetPasswordForm.get("newPassword")?.value};if(!s){this.errorMessage="You must accept terms & condition";return}if(u!==e.newPassword){this.errorMessage="Password not matched";return}e.newPassword&&e.userId&&s?(this.resetLoading=!0,this.UserAccountsService.resetPasswordByInputDto(e).subscribe({next:d=>{d.success?(this.TosterService.customToast(String(d.message),"success"),this.resetLoading=!1,this.resetFormSubmitted=!1,this.router.navigate(["/"+this.redirectTo]),this.resetPasswordForm.reset()):(this.TosterService.customToast(String(d.message),"error"),this.resetFormSubmitted=!1,this.resetLoading=!1)},error:d=>{this.TosterService.customToast(String(d.message),"error"),this.resetFormSubmitted=!1,this.resetLoading=!1}})):(this.TosterService.customToast("Password/userId not found","error"),this.resetFormSubmitted=!1,this.resetLoading=!1)}};a.\u0275fac=function(u){return new(u||a)(h(ue),h(ce),h(se),h(pe),h(me),h(W),h(H))},a.\u0275cmp=R({type:a,selectors:[["app-forgot-password"]],decls:98,vars:33,consts:[[1,"w-full","h-screen","overflow-y-auto","bg-slate-100"],["id","content","role","main",1,"w-full","max-w-md","mx-auto","p-6"],[1,"flex","flex-col","items-center"],["ngSrc","assets/auth/clr-logo.png","alt","logo","width","200","height","48",1,"w-[200px]","h-12","mr-2"],[1,"forgot-pass"],[2,"background","transparent",3,"selectedIndex","selectedIndexChange"],["stepper",""],[3,"stepControl"],[3,"formGroup"],[1,"mt-7","bg-white","rounded-xl","shadow-lg","border-2","border-secondary/50"],[1,"p-4","sm:p-7"],[1,"text-center"],[1,"block","text-2xl","font-bold","text-gray-800"],[1,"mt-2","text-sm","text-gray-600"],["routerLink","/login",1,"text-secondary","decoration-2","hover:underline","font-medium"],[1,"mt-5"],[1,"grid","gap-y-4"],["for","username",1,"block","text-sm","font-bold","ml-1","mb-2"],[1,"form_input","flex","h-[40px]",3,"ngClass"],["matPrefix","",1,"h-fit","font-Roboto","text-[16px]"],["autocomplete","off","matInput","","maxlength","11","type","tel","formControlName","username","id","username","placeholder","018-000-00000","required","","inputmode","numeric",1,"w-full","bg-white","border-none","outline-none","font-Roboto","h-fit","font-semibold","text-[16px]"],["class","font-Roboto text-[12px] text-red-600 mt-2",4,"ngIf"],["class","p-4 text-sm text-yellow-800 rounded-lg bg-yellow-50 font-semibold font-Roboto","role","alert",4,"ngIf"],[1,"py-3","px-4","inline-flex","justify-center","items-center","gap-2","rounded-md","border","border-transparent","font-semibold","bg-secondary","text-white","hover:bg-secondary/80","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition-all","text-sm",3,"click"],[1,"max-w-lg","text-center","min-w-[400px]","mx-auto","my-10","bg-white","p-5","rounded-xl","shadow","shadow-slate-300"],[1,"w-[150px]","m-auto","rounded-full","h-[150px]","bg-slate-200"],["ngSrc","/assets/auth/v-code.jpg","alt","IMG","width","150","height","150"],[1,"mt-4","text-[28px]","text-primary","font-semibold"],[1,"text-primary"],[1,"mt-6","bg-white"],["inputClass","verify-focus bg-white ",2,"background","white",3,"config","onInputChange"],["class","p-4 mt-4 mb-4 text-sm text-yellow-800 rounded-lg bg-yellow-50 font-semibold font-Roboto","role","alert",4,"ngIf"],[1,"flex","gap-3","mt-6"],[1,"btn-secondary","w-1/2",3,"disabled","click"],[1,"form_btn","w-1/2",3,"disabled","click"],[1,"fa-solid","fa-arrow-right","ml-2"],[1,"p-8","border-[1px]","rounded-lg","mt-6","bg-white"],["for","newPassword",1,"block","mb-2","text-sm","font-medium","text-gray-800"],[1,"form_input","flex","justify-between"],["formControlName","newPassword","name","newPassword","id","newPassword","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"outline-none","border-none","w-full","bg-white",3,"type","keydown.enter"],[1,"cursor-pointer",3,"click"],[1,"flex","flex-col"],["class","text-xs text-red-500 font-normal","align","end",4,"ngIf"],["for","confirm-password",1,"block","mb-2","mt-3","text-sm","font-medium","text-gray-900"],["formControlName","confirmPassword","name","confirm-password","id","confirm-password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"outline-none","border-none","w-full","bg-white",3,"type","keydown.enter"],[1,"flex","items-start","mt-6"],[1,"flex","items-center","h-5"],["id","newsletter","aria-describedby","newsletter","type","checkbox","formControlName","accept","required","",1,"w-4","h-4","border","border-gray-300","rounded","bg-gray-50","focus:ring-3","focus:ring-primary-300"],[1,"ml-3","text-sm"],["for","newsletter",1,"font-light","text-gray-500"],["href","#",1,"font-medium","text-primary-600","hover:underline"],[1,"btn-secondary","w-full","mt-5",3,"click"],[1,"h-[300px]","bg-white","flex","justify-center","text-center"],[1,"mt-3","flex","justify-center","items-center","text-center","divide-x","divide-gray-300"],["routerLink","/",1,"pr-3.5","inline-flex","items-center","gap-x-2","text-sm","text-gray-600","decoration-2","hover:underline","hover:text-primary"],["routerLink","/contact-us",1,"pl-3","inline-flex","items-center","gap-x-2","text-sm","text-gray-600","decoration-2","hover:underline","hover:text-primary"],[1,"font-Roboto","text-[12px]","text-red-600","mt-2"],["role","alert",1,"p-4","text-sm","text-yellow-800","rounded-lg","bg-yellow-50","font-semibold","font-Roboto"],[1,"fa-solid","fa-circle-exclamation","mr-2"],["role","alert",1,"p-4","mt-4","mb-4","text-sm","text-yellow-800","rounded-lg","bg-yellow-50","font-semibold","font-Roboto"],["align","end",1,"text-xs","text-red-500","font-normal"]],template:function(u,e){if(u&1){let d=A();t(0,"div",0)(1,"main",1)(2,"div",2),p(3,"img",3),t(4,"div",4)(5,"mat-stepper",5,6),f("selectedIndexChange",function(){j(d);let c=O(6);return q(e.onIndexChange(c))}),t(7,"mat-step",7)(8,"form",8)(9,"div",9)(10,"div",10)(11,"div",11)(12,"h1",12),i(13," Forgot password? "),r(),t(14,"p",13),i(15," Remember your password? "),t(16,"a",14),i(17," Login here "),r()()(),t(18,"div",15)(19,"div",16)(20,"div")(21,"label",17),i(22,"Mobile Number"),r(),t(23,"div",18)(24,"span",19),i(25,"+88 \xA0"),r(),p(26,"input",20),r(),g(27,Se,2,0,"p",21)(28,Ce,2,0,"p",21),r(),g(29,Te,3,1,"div",22),t(30,"button",23),f("click",function(){return e.resetPassword()}),i(31),r()()()()()()(),t(32,"mat-step")(33,"div",24)(34,"div",25),p(35,"img",26),r(),t(36,"h1",27),i(37," Verify Your Phone "),p(38,"br"),i(39," Number "),r(),t(40,"p",28),i(41," We have already sent a verification code"),p(42,"br"),i(43),r(),t(44,"div",29)(45,"ng-otp-input",30),f("onInputChange",function(c){return e.onOtpChange(c)}),r()(),g(46,Ie,3,1,"div",31),t(47,"div",32)(48,"button",33),f("click",function(){return e.back(0)}),i(49," Back "),r(),t(50,"button",34),f("click",function(){return e.verify()}),i(51," Continue "),p(52,"i",35),r()()()(),t(53,"mat-step")(54,"div",36)(55,"form",8)(56,"label",37),i(57,"New Password"),r(),t(58,"div",38)(59,"input",39),f("keydown.enter",function(c){return c.preventDefault()}),r(),t(60,"button",40),f("click",function(){return e.resetPasswordVisibility("newPassword")}),p(61,"i"),r()(),t(62,"div",41),g(63,Ee,2,0,"p",21)(64,ke,2,0,"p",21)(65,Me,2,0,"p",21)(66,Ne,2,0,"p",21)(67,Le,2,0,"p",21),r(),g(68,Re,2,0,"mat-hint",42),t(69,"label",43),i(70,"Confirm password"),r(),t(71,"div",38)(72,"input",44),f("keydown.enter",function(c){return c.preventDefault()}),r(),t(73,"button",40),f("click",function(){return e.resetPasswordVisibility("confirmPassword")}),p(74,"i"),r()(),t(75,"div",41),g(76,Ve,2,0,"p",21)(77,je,2,0,"p",21),r(),t(78,"div",45)(79,"div",46),p(80,"input",47),r(),t(81,"div",48)(82,"label",49),i(83," I accept the "),t(84,"a",50),i(85,"Terms and Conditions"),r()()(),g(86,qe,2,0,"p",21),r(),g(87,Ae,3,1,"div",31),t(88,"button",51),f("click",function(){return e.confirmPassword()}),i(89," Confirm Password "),r()()()(),t(90,"mat-step")(91,"div",52),i(92," You have successfully reset your password! Now you can login your account with new password. "),r()()()()(),t(93,"p",53)(94,"a",54),i(95," Home "),r(),t(96,"span",55),i(97," Contact us! "),r()()()()}if(u&2){let d,m,c,P,T,I,E,k,M,F,N,b,w;n(5),l("selectedIndex",e.activeTab),n(2),l("stepControl",e.resetPasswordForm),n(),l("formGroup",e.resetPasswordForm),n(15),l("ngClass",G(30,Oe,((d=e.resetPasswordForm.get("username"))==null?null:d.invalid)&&((d=e.resetPasswordForm.get("username"))==null?null:d.touched))),n(4),l("ngIf",e.resetFormSubmitted&&((m=e.resetPasswordForm.get("username"))==null?null:m.hasError("required"))),n(),l("ngIf",e.resetFormSubmitted&&((c=e.resetPasswordForm.get("username"))==null?null:c.hasError("pattern"))),n(),l("ngIf",e.errorMessage),n(2),v(" ",e.resetLoading?"Loading":"Reset password "," "),n(12),v("to ",(P=e.resetPasswordForm.get("username"))==null?null:P.value," "),n(2),l("config",D(32,De)),n(),l("ngIf",e.errorMessage),n(2),l("disabled",e.isLoading),n(2),l("disabled",e.isLoading),n(5),l("formGroup",e.resetPasswordForm),n(4),l("type",e.resetPasswordFieldType),n(2),C(e.resetPasswordFieldType==="password"?"fa fa-eye-slash":"fa fa-eye"),n(2),l("ngIf",e.resetFormSubmitted&&((T=e.resetPasswordForm.get("newPassword"))==null?null:T.hasError("required"))),n(),l("ngIf",e.resetFormSubmitted&&((I=e.resetPasswordForm.get("newPassword"))==null?null:I.hasError("startsWithUppercase"))),n(),l("ngIf",e.resetFormSubmitted&&((E=e.resetPasswordForm.get("newPassword"))==null?null:E.hasError("isAtLeast6Characters"))),n(),l("ngIf",e.resetFormSubmitted&&((k=e.resetPasswordForm.get("newPassword"))==null?null:k.hasError("includesSpecialCharacter"))),n(),l("ngIf",e.resetFormSubmitted&&((M=e.resetPasswordForm.get("newPassword"))==null?null:M.hasError("includesNumber"))),n(),l("ngIf",((F=e.resetPasswordForm.get("newPassword"))==null?null:F.invalid)||((F=e.resetPasswordForm.get("newPassword"))==null?null:F.value)==="0"),n(4),l("type",e.resetConfPasswordFieldType),n(2),C(e.resetConfPasswordFieldType==="password"?"fa fa-eye-slash":"fa fa-eye"),n(2),l("ngIf",e.resetFormSubmitted&&((N=e.resetPasswordForm.get("confirmPassword"))==null?null:N.hasError("required"))),n(),l("ngIf",e.resetFormSubmitted&&((b=e.resetPasswordForm.get("confirmPassword"))==null?null:b.valid)&&((b=e.resetPasswordForm.get("confirmPassword"))==null?null:b.dirty)&&((b=e.resetPasswordForm.get("confirmPassword"))==null?null:b.errors)),n(9),l("ngIf",e.resetFormSubmitted&&((w=e.resetPasswordForm.get("accept"))==null?null:w.hasError("required"))&&((w=e.resetPasswordForm.get("accept"))==null?null:w.valid)&&((w=e.resetPasswordForm.get("accept"))==null?null:w.dirty)&&((w=e.resetPasswordForm.get("accept"))==null?null:w.errors)),n(),l("ngIf",e.errorMessage)}},dependencies:[B,U,K,ee,Q,J,X,Z,oe,ne,ie,te,re,z,fe,ge,be,ve,ye,le],styles:[".mat-horizontal-stepper-header-container{display:none!important}  .mat-horizontal-content-container{width:450px!important}"]});let o=a;return o})();var Ge=[{path:"",component:Pe}],pt=(()=>{let a=class a{};a.\u0275fac=function(u){return new(u||a)},a.\u0275mod=V({type:a}),a.\u0275inj=L({imports:[Y,$.forChild(Ge),ae,he,we,_e,xe,de]});let o=a;return o})();export{pt as ForgotPasswordModule};
