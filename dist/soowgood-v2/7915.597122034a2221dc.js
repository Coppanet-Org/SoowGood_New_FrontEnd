"use strict";(self.webpackChunksoowgood_v2=self.webpackChunksoowgood_v2||[]).push([[7915],{7915:(N,f,u)=>{u.r(f),u.d(f,{AgentSignupModule:()=>C});var h=u(6814),i=u(6223),d=u(1329),p=u(1254),e=u(9212),o=u(5802),s=u(8175);let l=(()=>{class a{constructor(n){this.restService=n,this.apiName="Default",this.create=(t,r)=>this.restService.request({method:"POST",url:"/api/app/agent-master",body:t},{apiName:this.apiName,...r}),this.get=(t,r)=>this.restService.request({method:"GET",url:`/api/app/agent-master/${t}`},{apiName:this.apiName,...r}),this.getAllAgentMasterList=t=>this.restService.request({method:"GET",url:"/api/app/agent-master/agent-master-list"},{apiName:this.apiName,...t}),this.getByUserName=(t,r)=>this.restService.request({method:"GET",url:"/api/app/agent-master/by-user-name",params:{userName:t}},{apiName:this.apiName,...r}),this.getList=t=>this.restService.request({method:"GET",url:"/api/app/agent-master"},{apiName:this.apiName,...t}),this.update=(t,r)=>this.restService.request({method:"PUT",url:"/api/app/agent-master",body:t},{apiName:this.apiName,...r})}static#e=this.\u0275fac=function(t){return new(t||a)(e.LFG(s.vgb))};static#t=this.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})(),c=(()=>{class a{constructor(n){this.restService=n,this.apiName="Default",this.create=(t,r)=>this.restService.request({method:"POST",url:"/api/app/agent-supervisor",body:t},{apiName:this.apiName,...r}),this.get=(t,r)=>this.restService.request({method:"GET",url:`/api/app/agent-supervisor/${t}`},{apiName:this.apiName,...r}),this.getAgentSupervisorsByAgentMasterList=(t,r)=>this.restService.request({method:"GET",url:`/api/app/agent-supervisor/agent-supervisors-by-agent-master-list/${t}`},{apiName:this.apiName,...r}),this.getByUserName=(t,r)=>this.restService.request({method:"GET",url:"/api/app/agent-supervisor/by-user-name",params:{userName:t}},{apiName:this.apiName,...r}),this.getList=t=>this.restService.request({method:"GET",url:"/api/app/agent-supervisor"},{apiName:this.apiName,...t}),this.getListByMasterId=(t,r)=>this.restService.request({method:"GET",url:`/api/app/agent-supervisor/by-master-id/${t}`},{apiName:this.apiName,...r}),this.update=(t,r)=>this.restService.request({method:"PUT",url:"/api/app/agent-supervisor",body:t},{apiName:this.apiName,...r})}static#e=this.\u0275fac=function(t){return new(t||a)(e.LFG(s.vgb))};static#t=this.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();var S=u(9483),T=u(9245),Z=u(9802),w=u(8184),A=u(2032),y=u(9157);function _(a,b){if(1&a&&(e.TgZ(0,"option",42),e._uU(1),e.qZA()),2&a){const n=b.$implicit;e.s9C("value",n.id),e.xp6(),e.hij(" ",n.displayName," ")}}function q(a,b){if(1&a&&(e.TgZ(0,"option",42),e._uU(1),e.qZA()),2&a){const n=b.$implicit;e.s9C("value",n.id),e.xp6(),e.hij(" ",n.displayName," ")}}function F(a,b){1&a&&(e.TgZ(0,"mat-error"),e._uU(1," Confirm password is required. "),e.qZA())}function P(a,b){1&a&&(e.TgZ(0,"mat-error"),e._uU(1," Password not matched. "),e.qZA())}function x(a,b){1&a&&e._UZ(0,"span",43)}const U=[{path:"",component:(()=>{class a{constructor(n,t,r,m,g,v,I,k){this.fb=n,this.AgentProfileService=t,this.AgentMasterService=r,this.AgentSupervisorService=m,this.NormalAuth=g,this.UserAccountsService=v,this.TosterService=I,this._router=k,this.subs=new d.Y,this.confirmPasswordFieldType="password",this.passwordFieldType="password",this.formSubmitted=!1}ngOnInit(){this.loadForm(),this.AgentMasterService.getAllAgentMasterList().subscribe(n=>this.agenetMasterList=n)}loadForm(){this.signupForm=this.fb.group({fullName:["",i.kI.required],organizationName:["0",i.kI.required],agentSuperVisor:["0",i.kI.required],address:["",i.kI.required],city:["Dhaka",i.kI.required],zipCode:["1212",i.kI.required],country:["Bangladesh",i.kI.required],mobileNo:["",[i.kI.required,i.kI.minLength(11),i.kI.maxLength(11)]],email:["",i.kI.required],password:["",[i.kI.required,i.kI.pattern(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$#!%*?&])[A-Za-z\d@$#!%*?&]{6,}$/)]],confirmPassword:["",i.kI.required],isActive:["true",i.kI.required]},{validator:p.dN.matchValidator})}onSubmit(){if(this.isLoading=!0,this.formSubmitted=!0,!this.signupForm.valid)return this.isLoading=!1,void this.TosterService.customToast("Please filed all required field","warning");this.UserAccountsService.signupUserByUserDtoAndPasswordAndRole({tenantId:"",userName:this.signupForm.value.mobileNo,name:this.signupForm?.value.fullName,surname:"",email:this.signupForm.value.email,emailConfirmed:!0,phoneNumber:this.signupForm.value.mobileNo,phoneNumberConfirmed:!0,address:this.signupForm.value.address,city:this.signupForm.value.city,zipCode:this.signupForm.value.zipCode,country:this.signupForm.value.country,isActive:!0,lockoutEnabled:!1,lockoutEnd:"2023-07-16T07:38:44.382Z",concurrencyStamp:"",agentMasterId:this.signupForm.value.organizationName,agentSupervisorId:this.signupForm.value.agentSuperVisor},this.signupForm.value?.password,"Agent").subscribe(t=>{t.success?this.AgentProfileService.create({...this.signupForm.value,agentMasterId:this.signupForm.value?.organizationName,agentSupervisorId:this.signupForm.value?.agentSuperVisor,userId:t.userId}).subscribe(r=>{this.subs.sink=this.AgentProfileService.getByUserId(r.userId).subscribe(m=>{this.agentProfileDto=m,this.agentId=m.id,this.formSubmitted=!1,this.NormalAuth.signOut(),this._router.navigate(["/agent/login"],{state:{data:t}}).then(g=>this.TosterService.customToast(String(t.message),"success"))})}):(this.isLoading=!1,this.formSubmitted=!1,this.TosterService.customToast(String(t.message),"error"))})}passwordVisibility(n){"password"===n?this.passwordFieldType="password"===this.passwordFieldType?"text":"password":"confirmPassword"===n&&(this.confirmPasswordFieldType="password"===this.confirmPasswordFieldType?"text":"password")}loadAgentSupervisors(n){this.AgentSupervisorService.getAgentSupervisorsByAgentMasterList(n.target.value).subscribe(t=>{this.agentSupervisorList=t})}static#e=this.\u0275fac=function(t){return new(t||a)(e.Y36(i.qu),e.Y36(o.j),e.Y36(l),e.Y36(c),e.Y36(S.e),e.Y36(T.V),e.Y36(Z.G),e.Y36(w.F0))};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-agent-signup"]],decls:83,vars:14,consts:[[1,"signup-form"],[1,"signup-form__left"],["width","300","height","300","ngSrc","assets/agent/agent-portal.jpg","alt","auth",1,"w-full","h-full","object-cover"],[1,"signup-form__right","drop-shadow-soft","relative"],[1,"max-w-lg","min-w-[650px]","mx-auto","mt-10","bg-white","p-8","rounded-xl","shadow","shadow-slate-300"],[1,"text-4xl","font-medium"],[1,"text-slate-500","mt-2"],[1,"mt-6",3,"formGroup"],[1,"-mx-3","flex","flex-wrap"],[1,"w-full","px-3","sm:w-1/2","mb-5"],["for","agentOrganization"],[1,"font-medium","text-slate-700","pb-2"],["formControlName","organizationName","name","select","id","organizationName",1,"w-full","rounded-md","border","border-[#e0e0e0]","bg-white","py-2","px-3","text-base","font-normal","text-[14px]","text-[#6B7280]","outline-none","focus:border-[#6A64F1]","focus:shadow-md",3,"change"],["value","0",1,"font-semibold","text-gray-500"],["class","font-semibold text-gray-500",3,"value",4,"ngFor","ngForOf"],["formControlName","agentSuperVisor","name","select","id","agentSuperVisor",1,"w-full","rounded-md","border","border-[#e0e0e0]","bg-white","py-2","px-3","text-base","font-normal","text-[14px]","text-[#6B7280]","outline-none","focus:border-[#6A64F1]","focus:shadow-md"],["for","agentName"],["type","text","formControlName","fullName","id","agentName","placeholder","Name","required","",1,"form_input"],["for","email"],["type","email","formControlName","email","id","email","placeholder","example@mail.com",1,"form_input"],["for","mobile"],[1,"form_input","flex","h-[40px]"],["matPrefix","",1,"h-fit","font-Roboto"],["matInput","","maxlength","11","type","tel","formControlName","mobileNo","id","mobileNo","placeholder","018-000-00000","required","","inputmode","numeric",1,"w-full","border-none","outline-none","h-fit"],["for","Address"],["type","text","formControlName","address","id","address","placeholder","Address","required","",1,"form_input"],[1,"w-full","px-3","sm:w-1/2"],[1,"mb-3"],[1,"form_input","flex","justify-between"],["formControlName","password","name","password","id","password","placeholder","Password",1,"outline-none","border-none","w-full",3,"type","keydown.enter"],[1,"cursor-pointer",3,"click"],["autocomplete","off","formControlName","confirmPassword","name","confirmPassword","placeholder","Confirm password",1,"outline-none","border-none","w-full",3,"type","keydown.enter"],[1,"flex","flex-col"],[4,"ngIf"],[1,"form_btn",3,"click"],[1,"flex","items-center"],[1,"fa-solid","ml-2","fa-right-to-bracket"],["class","loading loading-dots loading-md",4,"ngIf"],[1,"text-center","w-full","mt-5"],["routerLink","/agent/login",1,"text-primary","font-medium","inline-flex","space-x-1","items-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor","stroke-width","2",1,"h-4","w-4"],["stroke-linecap","round","stroke-linejoin","round","d","M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"],[1,"font-semibold","text-gray-500",3,"value"],[1,"loading","loading-dots","loading-md"]],template:function(t,r){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"img",2),e.qZA(),e.TgZ(3,"div",3)(4,"div",4)(5,"h1",5),e._uU(6,"Agent Signup"),e.qZA(),e.TgZ(7,"p",6),e._uU(8,"Hi, Welcome to SoowGood \u{1f44b}"),e.qZA(),e.TgZ(9,"form",7)(10,"div",8)(11,"div",9)(12,"label",10)(13,"p",11),e._uU(14,"Agent Master"),e.qZA(),e.TgZ(15,"select",12),e.NdJ("change",function(g){return r.loadAgentSupervisors(g)}),e.TgZ(16,"option",13),e._uU(17," Select "),e.qZA(),e.YNc(18,_,2,2,"option",14),e.qZA()()(),e.TgZ(19,"div",9)(20,"label",10)(21,"p",11),e._uU(22,"Supervisor"),e.qZA(),e.TgZ(23,"select",15)(24,"option",13),e._uU(25," Select "),e.qZA(),e.YNc(26,q,2,2,"option",14),e.qZA()()(),e.TgZ(27,"div",9)(28,"label",16)(29,"p",11),e._uU(30,"Agent Name"),e.qZA(),e._UZ(31,"input",17),e.qZA()(),e.TgZ(32,"div",9)(33,"label",18)(34,"p",11),e._uU(35,"Email"),e.qZA(),e._UZ(36,"input",19),e.qZA()(),e.TgZ(37,"div",9)(38,"label",20)(39,"p",11),e._uU(40,"Mobile Number"),e.qZA(),e.TgZ(41,"div",21)(42,"span",22),e._uU(43,"+88 \xa0"),e.qZA(),e._UZ(44,"input",23),e.qZA()()(),e.TgZ(45,"div",9)(46,"label",24)(47,"p",11),e._uU(48,"Address"),e.qZA(),e._UZ(49,"input",25),e.qZA()(),e.TgZ(50,"div",26)(51,"div",27)(52,"p",11),e._uU(53,"Password"),e.qZA(),e.TgZ(54,"div",28)(55,"input",29),e.NdJ("keydown.enter",function(g){return g.preventDefault()}),e.qZA(),e.TgZ(56,"button",30),e.NdJ("click",function(){return r.passwordVisibility("password")}),e._UZ(57,"i"),e.qZA()()()(),e.TgZ(58,"div",26)(59,"div",27)(60,"p",11),e._uU(61,"Confirm Password"),e.qZA(),e.TgZ(62,"div",28)(63,"input",31),e.NdJ("keydown.enter",function(g){return g.preventDefault()}),e.qZA(),e.TgZ(64,"button",30),e.NdJ("click",function(){return r.passwordVisibility("confirmPassword")}),e._UZ(65,"i"),e.qZA()(),e.TgZ(66,"div",32),e.YNc(67,F,2,0,"mat-error",33)(68,P,2,0,"mat-error",33),e.qZA()()(),e.TgZ(69,"button",34),e.NdJ("click",function(){return r.onSubmit()}),e.TgZ(70,"div",35)(71,"span"),e._uU(72,"Signup"),e.qZA(),e._UZ(73,"i",36),e.qZA(),e.YNc(74,x,1,0,"span",37),e.qZA(),e.TgZ(75,"p",38),e._uU(76," Already have an account? "),e.TgZ(77,"a",39)(78,"span"),e._uU(79," Login "),e.qZA(),e.TgZ(80,"span"),e.O4$(),e.TgZ(81,"svg",40),e._UZ(82,"path",41),e.qZA()()()()()()()()()),2&t){let m,g,v;e.xp6(9),e.Q6J("formGroup",r.signupForm),e.xp6(9),e.Q6J("ngForOf",r.agenetMasterList),e.xp6(8),e.Q6J("ngForOf",r.agentSupervisorList),e.xp6(18),e.Tol(null!=(m=r.signupForm.get("mobileNo"))&&m.invalid?"border-red-600 border-[1px]":""),e.xp6(11),e.Q6J("type",r.passwordFieldType),e.xp6(2),e.Tol("password"===r.passwordFieldType?"fa fa-eye-slash":"fa fa-eye"),e.xp6(6),e.Q6J("type",r.confirmPasswordFieldType),e.xp6(2),e.Tol("password"===r.confirmPasswordFieldType?"fa fa-eye-slash":"fa fa-eye"),e.xp6(2),e.Q6J("ngIf",r.formSubmitted&&(null==(g=r.signupForm.get("confirmPassword"))?null:g.hasError("required"))),e.xp6(),e.Q6J("ngIf",r.formSubmitted&&(null==(v=r.signupForm.get("password"))?null:v.valid)&&(null==(v=r.signupForm.get("confirmPassword"))?null:v.dirty)&&(null==(v=r.signupForm.get("confirmPassword"))?null:v.errors)),e.xp6(6),e.Q6J("ngIf",r.isLoading)}},dependencies:[h.sg,h.O5,w.rH,i._Y,i.YN,i.Kr,i.Fj,i.EJ,i.JJ,i.JL,i.Q7,i.nD,i.sg,i.u,A.Nt,y.TO,y.qo,h.Zd]})}return a})()}];let C=(()=>{class a{static#e=this.\u0275fac=function(t){return new(t||a)};static#t=this.\u0275mod=e.oAB({type:a});static#r=this.\u0275inj=e.cJS({imports:[h.ez,w.Bz.forChild(U),i.u5,i.UX,A.c]})}return a})()},9245:(N,f,u)=>{u.d(f,{V:()=>d});var h=u(9212),i=u(8175);let d=(()=>{class p{constructor(o){this.restService=o,this.apiName="Default",this.decodeJwtByJwt=(s,l)=>this.restService.request({method:"POST",url:"/api/app/user-accounts/decode-jwt",body:s},{apiName:this.apiName,...l}),this.isUserExistsByUserName=(s,l)=>this.restService.request({method:"POST",url:"/api/app/user-accounts/is-user-exists",params:{userName:s}},{apiName:this.apiName,...l}),this.loginByUserDto=(s,l)=>this.restService.request({method:"POST",url:"/api/app/user-accounts/login",body:s},{apiName:this.apiName,...l}),this.refreshAccessTokenByUser=(s,l)=>this.restService.request({method:"POST",url:"/api/app/user-accounts/refresh-access-token",body:s},{apiName:this.apiName,...l}),this.resetPasswordByInputDto=(s,l)=>this.restService.request({method:"POST",url:"/api/app/user-accounts/reset-password",body:s},{apiName:this.apiName,...l}),this.resetPassword_AppByInputDto=(s,l)=>this.restService.request({method:"POST",url:"/api/app/user-accounts/reset-password_App",body:s},{apiName:this.apiName,...l}),this.signupUserByUserDtoAndPasswordAndRole=(s,l,c,S)=>this.restService.request({method:"POST",url:"/api/app/user-accounts/signup-user",params:{password:l,role:c},body:s},{apiName:this.apiName,...S}),this.userDataRemove=(s,l,c)=>this.restService.request({method:"POST",url:"/api/app/user-accounts/user-data-remove",params:{role:l},body:s},{apiName:this.apiName,...c})}static#e=this.\u0275fac=function(s){return new(s||p)(h.LFG(i.vgb))};static#t=this.\u0275prov=h.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"})}return p})()},1254:(N,f,u)=>{u.d(f,{dN:()=>p});class p{static isAtLeast6Characters(o){const s=o.value;return s&&s.length<6?{isAtLeast6Characters:!0}:null}static includesSpecialCharacter(o){const s=o.value;return s&&!/.*[!@#$%^&*()_+{}\[\]:;<>,.?~\\\-=/|]/.test(s)?{includesSpecialCharacter:!0}:null}static includesNumber(o){const s=o.value;return s&&!/.*[0-9]/.test(s)?{includesNumber:!0}:null}static matchValidator(o){const s=o.get("password")?.value,l=o.get("confirmPassword")?.value;if(!l?.length)return null;if(l.length<6)o.get("confirmPassword")?.setErrors({minLength:!0});else{if(s===l)return null;o.get("confirmPassword")?.setErrors({mismatch:!0})}}static mobileNumberFormat(){return o=>/^[0-9]+$/.test(o.value)?null:{invalidFormat:!0}}static mobileNumberLength(){return o=>o.value&&11===o.value.length?null:{invalidLength:!0}}}},1329:(N,f,u)=>{u.d(f,{Y:()=>i});var i=function(){function d(){this._subs=[]}return d.prototype.add=function(){for(var p=[],e=0;e<arguments.length;e++)p[e]=arguments[e];this._subs=this._subs.concat(p)},Object.defineProperty(d.prototype,"sink",{set:function(p){this._subs.push(p)},enumerable:!0,configurable:!0}),d.prototype.unsubscribe=function(){this._subs.forEach(function(p){return p&&function(d){return"function"==typeof d}(p.unsubscribe)&&p.unsubscribe()}),this._subs=[]},d}()}}]);