"use strict";(self.webpackChunksoowgood_v2=self.webpackChunksoowgood_v2||[]).push([[19,381],{2019:(b,d,r)=>{r.r(d),r.d(d,{AgentLoginModule:()=>C});var c=r(6895),e=r(4006),u=r(262),s=r(3900),l=r(2843),n=r(6240),o=r(4650),h=r(2381),f=r(5374),T=r(5654),A=r(629),p=r(2510);function L(a,m){1&a&&o._UZ(0,"span",23)}const Z=[{path:"",component:(()=>{class a{constructor(i,g,t,v,w,S){this.ToasterService=i,this.UserAuthService=g,this.AgentProfileService=t,this.NormalAuth=v,this._router=w,this.fb=S,this.defaultAuth={mobileNo:"",password:""},this.subs=new n.Y}ngOnInit(){this.loadForm()}loadForm(){this.loginForm=this.fb.group({mobileNo:[this.defaultAuth.mobileNo,e.kI.compose([e.kI.required,e.kI.minLength(11),e.kI.maxLength(11)])],password:[this.defaultAuth.password,e.kI.compose([e.kI.required,e.kI.minLength(7),e.kI.maxLength(100)])]})}onSubmit(){if(!this.loginForm.valid&&!this.loginForm.touched)return void this.ToasterService.customToast("Please filled all required field","warning");let i,g={userName:this.loginForm.value.mobileNo,email:"",password:this.loginForm.value.password,rememberMe:!1};try{this.UserAuthService.loginByUserDto(g).pipe((0,u.K)(t=>this.handleLoginError(t)),(0,s.w)(t=>(i=t,t.success?this.AgentProfileService.getByUserName(t.userName||""):(this.hasError=!0,this.ToasterService.customToast(t.message||" ","error"),(0,l._)(t.message||"Login failed")))),(0,u.K)(t=>this.handleProfileError(t))).subscribe(t=>{console.log(t);const v={userId:t.userId,id:t.id,userType:i.roleName.toString().toLowerCase()};this.NormalAuth.setAuthInfoInLocalStorage(v);const w=t.isActive?i.roleName.toString().toLowerCase():(i.roleName.toString()+"/profile-settings").toLowerCase();this._router.navigate([w],{state:{data:t}}).then(()=>this.ToasterService.customToast(i.message||" ","success"))})}catch(t){this.hasError=!0,"'tokenEndpoint' should not be null"===t.message&&this.ToasterService.customToast(t.message||" ","success")}}handleLoginError(i){}handleProfileError(i){}ngOnDestroy(){this.subs.unsubscribe()}}return a.\u0275fac=function(i){return new(i||a)(o.Y36(h.G),o.Y36(f.V),o.Y36(T.j),o.Y36(A.e),o.Y36(p.F0),o.Y36(e.qu))},a.\u0275cmp=o.Xpm({type:a,selectors:[["app-agent-login"]],decls:34,vars:2,consts:[[1,"signup-form"],[1,"signup-form__left"],["src","../../../../assets/auth/Repeat Grid 3.png","alt","auth",1,"w-full","h-full"],[1,"signup-form__right","drop-shadow-soft","relative"],[1,"max-w-lg","min-w-[500px]","mx-auto","mt-10","bg-white","p-8","rounded-xl","shadow","shadow-slate-300"],[1,"text-4xl","font-medium"],[1,"text-slate-500","mt-2"],["action","",1,"mt-6",3,"formGroup"],[1,"flex","flex-col","space-y-5","mt-10"],["for","mobile"],[1,"font-medium","text-slate-700","pb-2"],["type","tel","formControlName","mobileNo","id","mobileNo","placeholder","018-000-00000","required","",1,"form_input"],["for","Password"],["formControlName","password","type","password","name","password","id","password","placeholder","Password123@*",1,"form_input"],[1,"form_btn",3,"click"],[1,"flex"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor","stroke-width","2",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","d","M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"],["class","loading loading-dots loading-md",4,"ngIf"],[1,"text-center"],["routerLink","/agent/signup",1,"text-primary","font-medium","inline-flex","space-x-1","items-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor","stroke-width","2",1,"h-4","w-4"],["stroke-linecap","round","stroke-linejoin","round","d","M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"],[1,"loading","loading-dots","loading-md"]],template:function(i,g){1&i&&(o.TgZ(0,"div",0)(1,"div",1),o._UZ(2,"img",2),o.qZA(),o.TgZ(3,"div",3)(4,"div",4)(5,"h1",5),o._uU(6,"Login"),o.qZA(),o.TgZ(7,"p",6),o._uU(8,"Hi, Welcome to SoowGood \u{1f44b}"),o.qZA(),o.TgZ(9,"form",7)(10,"div",8)(11,"label",9)(12,"p",10),o._uU(13,"Mobile Number"),o.qZA(),o._UZ(14,"input",11),o.qZA(),o.TgZ(15,"label",12)(16,"p",10),o._uU(17," Password"),o.qZA(),o._UZ(18,"input",13),o.qZA(),o.TgZ(19,"button",14),o.NdJ("click",function(){return g.onSubmit()}),o.TgZ(20,"div",15),o.O4$(),o.TgZ(21,"svg",16),o._UZ(22,"path",17),o.qZA(),o.kcU(),o.TgZ(23,"span"),o._uU(24,"Login"),o.qZA()(),o.YNc(25,L,1,0,"span",18),o.qZA(),o.TgZ(26,"p",19),o._uU(27," Don't have an account? "),o.TgZ(28,"a",20)(29,"span"),o._uU(30,"Sign up "),o.qZA(),o.TgZ(31,"span"),o.O4$(),o.TgZ(32,"svg",21),o._UZ(33,"path",22),o.qZA()()()()()()()()()),2&i&&(o.xp6(9),o.Q6J("formGroup",g.loginForm),o.xp6(16),o.Q6J("ngIf",g.isLoading))},dependencies:[c.O5,p.rH,e._Y,e.Fj,e.JJ,e.JL,e.Q7,e.sg,e.u]}),a})()}];let C=(()=>{class a{}return a.\u0275fac=function(i){return new(i||a)},a.\u0275mod=o.oAB({type:a}),a.\u0275inj=o.cJS({imports:[c.ez,p.Bz.forChild(Z),e.u5,e.UX]}),a})()},2381:(b,d,r)=>{r.d(d,{G:()=>u});var c=r(4650),e=r(9094);let u=(()=>{class s{constructor(n){this.toasterService=n}customToast(n,o){return this.toasterService[o](n,this.getToastOptions(o))}getToastOptions(n){const o=this.getBackgroundColor(n);return{duration:3e3,style:{padding:"10px 16px",color:this.getTextColor(n),background:o},iconTheme:this.getIconColor(n)}}getBackgroundColor(n){switch(n){case"success":return"rgb(0 171 7 / 100%)";case"error":return"rgb(255 0 0 / 100%) ";case"warning":return"rgb(255 179 68 / 100%)";default:return"#c2e0c6"}}getTextColor(n){switch(n){case"success":case"error":return"#f1f1f1";case"warning":return"#7a5600";default:return"#333"}}getIconColor(n){switch(n){case"success":default:return{primary:"#005539",secondary:"#f1f1f1"};case"error":return{primary:"#f44336",secondary:"#f1f1f1"};case"warning":return{primary:"#483500",secondary:"#f1f1f1"}}}}return s.\u0275fac=function(n){return new(n||s)(c.LFG(e.jE))},s.\u0275prov=c.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})()},6240:(b,d,r)=>{r.d(d,{Y:()=>e});var e=function(){function u(){this._subs=[]}return u.prototype.add=function(){for(var s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];this._subs=this._subs.concat(s)},Object.defineProperty(u.prototype,"sink",{set:function(s){this._subs.push(s)},enumerable:!0,configurable:!0}),u.prototype.unsubscribe=function(){this._subs.forEach(function(s){return s&&function(u){return"function"==typeof u}(s.unsubscribe)&&s.unsubscribe()}),this._subs=[]},u}()}}]);